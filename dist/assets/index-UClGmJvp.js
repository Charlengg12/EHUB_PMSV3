var ki=Object.defineProperty;var Pi=(t,s,r)=>s in t?ki(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var ns=(t,s,r)=>Pi(t,typeof s!="symbol"?s+"":s,r);import{j as e,S as Le,R as Di,T as Ai,I as _i,V as Mi,P as Ti,C as Ei,a as Ii,b as Ri,c as Oi,d as Fi,e as Li,f as $i,O as vs,g as dr,h as js,i as bs,k as ys,D as Ns,l as ur,u as Ln,o as $n,s as zn,m as Wn,n as Bn,p as Vn,q as qn,r as Hn,t as Yn,v as Un,w as zi,x as Wi,y as Bi,z as Vi,A as qi,B as Hi,E as Yi,F as Gn,W as Ui,G as Gi}from"./ui-DXq1sQR8.js";import{a as mr,r as u,b as hr,c as Xn,R as mt}from"./vendor-CYabRHnS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Ks={},Gr=mr;Ks.createRoot=Gr.createRoot,Ks.hydrateRoot=Gr.hydrateRoot;function Kn(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=Kn(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Qn(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=Kn(t))&&(n&&(n+=" "),n+=s);return n}const Xr=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Kr=Qn,ws=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return Kr(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=s,i=Object.keys(a).map(c=>{const m=r==null?void 0:r[c],p=o==null?void 0:o[c];if(m===null)return null;const f=Xr(m)||Xr(p);return a[c][f]}),l=r&&Object.entries(r).reduce((c,m)=>{let[p,f]=m;return f===void 0||(c[p]=f),c},{}),d=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((c,m)=>{let{class:p,className:f,...h}=m;return Object.entries(h).every(g=>{let[x,v]=g;return Array.isArray(v)?v.includes({...o,...l}[x]):{...o,...l}[x]===v})?[...c,p,f]:c},[]);return Kr(t,i,d,r==null?void 0:r.class,r==null?void 0:r.className)},xr="-",Xi=t=>{const s=Qi(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(xr);return l[0]===""&&l.length!==1&&l.shift(),Jn(l,s)||Ki(i)},getConflictingClassGroupIds:(i,l)=>{const d=r[i]||[];return l&&n[i]?[...d,...n[i]]:d}}},Jn=(t,s)=>{var i;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?Jn(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const o=t.join(xr);return(i=s.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Qr=/^\[(.+)\]$/,Ki=t=>{if(Qr.test(t)){const s=Qr.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Qi=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return Zi(Object.entries(t.classGroups),r).forEach(([o,i])=>{Qs(i,n,o,s)}),n},Qs=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?s:Jr(s,a);o.classGroupId=r;return}if(typeof a=="function"){if(Ji(a)){Qs(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Qs(i,Jr(s,o),r,n)})})},Jr=(t,s)=>{let r=t;return s.split(xr).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Ji=t=>t.isThemeGetter,Zi=(t,s)=>s?t.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[s+i,l])):o);return[r,a]}):t,el=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),s++,s>t&&(s=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},Zn="!",tl=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],o=s.length,i=l=>{const d=[];let c=0,m=0,p;for(let v=0;v<l.length;v++){let y=l[v];if(c===0){if(y===a&&(n||l.slice(v,v+o)===s)){d.push(l.slice(m,v)),m=v+o;continue}if(y==="/"){p=v;continue}}y==="["?c++:y==="]"&&c--}const f=d.length===0?l:l.substring(m),h=f.startsWith(Zn),g=h?f.substring(1):f,x=p&&p>m?p-m:void 0;return{modifiers:d,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:i}):i},sl=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},rl=t=>({cache:el(t.cacheSize),parseClassName:tl(t),...Xi(t)}),nl=/\s+/,al=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,o=[],i=t.trim().split(nl);let l="";for(let d=i.length-1;d>=0;d-=1){const c=i[d],{modifiers:m,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:h}=r(c);let g=!!h,x=n(g?f.substring(0,h):f);if(!x){if(!g){l=c+(l.length>0?" "+l:l);continue}if(x=n(f),!x){l=c+(l.length>0?" "+l:l);continue}g=!1}const v=sl(m).join(":"),y=p?v+Zn:v,j=y+x;if(o.includes(j))continue;o.push(j);const D=a(x,g);for(let N=0;N<D.length;++N){const M=D[N];o.push(y+M)}l=c+(l.length>0?" "+l:l)}return l};function ol(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=ea(s))&&(n&&(n+=" "),n+=r);return n}const ea=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=ea(t[n]))&&(r&&(r+=" "),r+=s);return r};function il(t,...s){let r,n,a,o=i;function i(d){const c=s.reduce((m,p)=>p(m),t());return r=rl(c),n=r.cache.get,a=r.cache.set,o=l,l(d)}function l(d){const c=n(d);if(c)return c;const m=al(d,r);return a(d,m),m}return function(){return o(ol.apply(null,arguments))}}const pe=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},ta=/^\[(?:([a-z-]+):)?(.+)\]$/i,ll=/^\d+\/\d+$/,cl=new Set(["px","full","screen"]),dl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ul=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ml=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ke=t=>Mt(t)||cl.has(t)||ll.test(t),ct=t=>Ft(t,"length",Nl),Mt=t=>!!t&&!Number.isNaN(Number(t)),Ts=t=>Ft(t,"number",Mt),Wt=t=>!!t&&Number.isInteger(Number(t)),fl=t=>t.endsWith("%")&&Mt(t.slice(0,-1)),ne=t=>ta.test(t),dt=t=>dl.test(t),pl=new Set(["length","size","percentage"]),gl=t=>Ft(t,pl,sa),vl=t=>Ft(t,"position",sa),jl=new Set(["image","url"]),bl=t=>Ft(t,jl,Cl),yl=t=>Ft(t,"",wl),Bt=()=>!0,Ft=(t,s,r)=>{const n=ta.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},Nl=t=>ul.test(t)&&!ml.test(t),sa=()=>!1,wl=t=>hl.test(t),Cl=t=>xl.test(t),Sl=()=>{const t=pe("colors"),s=pe("spacing"),r=pe("blur"),n=pe("brightness"),a=pe("borderColor"),o=pe("borderRadius"),i=pe("borderSpacing"),l=pe("borderWidth"),d=pe("contrast"),c=pe("grayscale"),m=pe("hueRotate"),p=pe("invert"),f=pe("gap"),h=pe("gradientColorStops"),g=pe("gradientColorStopPositions"),x=pe("inset"),v=pe("margin"),y=pe("opacity"),j=pe("padding"),D=pe("saturate"),N=pe("scale"),M=pe("sepia"),w=pe("skew"),A=pe("space"),C=pe("translate"),F=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",ne,s],P=()=>[ne,s],O=()=>["",Ke,ct],k=()=>["auto",Mt,ne],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],S=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",ne],je=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Mt,ne];return{cacheSize:500,separator:":",theme:{colors:[Bt],spacing:[Ke,ct],blur:["none","",dt,ne],brightness:G(),borderColor:[t],borderRadius:["none","","full",dt,ne],borderSpacing:P(),borderWidth:O(),contrast:G(),grayscale:oe(),hueRotate:G(),invert:oe(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[fl,ct],inset:L(),margin:L(),opacity:G(),padding:P(),saturate:G(),scale:G(),sepia:oe(),skew:G(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",ne]}],container:["container"],columns:[{columns:[dt]}],"break-after":[{"break-after":je()}],"break-before":[{"break-before":je()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),ne]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wt,ne]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ne]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Wt,ne]}],"grid-cols":[{"grid-cols":[Bt]}],"col-start-end":[{col:["auto",{span:["full",Wt,ne]},ne]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Bt]}],"row-start-end":[{row:["auto",{span:[Wt,ne]},ne]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ne]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ne,s]}],"min-w":[{"min-w":[ne,s,"min","max","fit"]}],"max-w":[{"max-w":[ne,s,"none","full","min","max","fit","prose",{screen:[dt]},dt]}],h:[{h:[ne,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ne,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ne,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ne,s,"auto","min","max","fit"]}],"font-size":[{text:["base",dt,ct]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ts]}],"font-family":[{font:[Bt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ne]}],"line-clamp":[{"line-clamp":["none",Mt,Ts]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ke,ne]}],"list-image":[{"list-image":["none",ne]}],"list-style-type":[{list:["none","disc","decimal",ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...S(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ke,ct]}],"underline-offset":[{"underline-offset":["auto",Ke,ne]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),vl]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gl]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bl]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...S(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:S()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...S()]}],"outline-offset":[{"outline-offset":[Ke,ne]}],"outline-w":[{outline:[Ke,ct]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ke,ct]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",dt,yl]}],"shadow-color":[{shadow:[Bt]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",dt,ne]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[p]}],saturate:[{saturate:[D]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[D]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ne]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",ne]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Wt,ne]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ne]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ne]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ne]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ke,ct,Ts]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kl=il(Sl);function W(...t){return kl(Qn(t))}const Ht=ws("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),T=u.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const i=n?Le:"button";return e.jsx(i,{"data-slot":"button",className:W(Ht({variant:s,size:r,className:t})),ref:o,...a})});T.displayName="Button";function B({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:W("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function te({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:W("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function se({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:W("leading-none",t),...s})}function Yt({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:W("text-muted-foreground",t),...s})}function V({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:W("px-6 [&:last-child]:pb-6",t),...s})}function U({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:W("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var Pl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Dl=Pl.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Al="Label",ra=u.forwardRef((t,s)=>e.jsx(Dl.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ra.displayName=Al;var _l=ra;function E({className:t,...s}){return e.jsx(_l,{"data-slot":"label",className:W("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Ml=ws("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ae({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:W(Ml({variant:s}),t),...r})}function _e({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:W("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}var Tl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],El=Tl.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Il="Separator",Zr="horizontal",Rl=["horizontal","vertical"],na=u.forwardRef((t,s)=>{const{decorative:r,orientation:n=Zr,...a}=t,o=Ol(n)?n:Zr,l=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(El.div,{"data-orientation":o,...l,...a,ref:s})});na.displayName=Il;function Ol(t){return Rl.includes(t)}var Fl=na;function aa({className:t,orientation:s="horizontal",decorative:r=!0,...n}){return e.jsx(Fl,{"data-slot":"separator-root",decorative:r,orientation:s,className:W("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$l=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,n)=>n?n.toUpperCase():r.toLowerCase()),en=t=>{const s=$l(t);return s.charAt(0).toUpperCase()+s.slice(1)},oa=(...t)=>t.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=u.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:i,...l},d)=>u.createElement("svg",{ref:d,...zl,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:oa("lucide",a),...l},[...i.map(([c,m])=>u.createElement(c,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(t,s)=>{const r=u.forwardRef(({className:n,...a},o)=>u.createElement(Wl,{ref:o,iconNode:s,className:oa(`lucide-${Ll(en(t))}`,`lucide-${t}`,n),...a}));return r.displayName=en(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Tt=X("archive",Bl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Js=X("arrow-left",Vl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Dt=X("building",ql);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$e=X("calendar",Hl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tn=X("chart-column",Yl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gl=X("check",Ul);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ia=X("chevron-down",Xl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ql=X("chevron-left",Kl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zl=X("chevron-right",Jl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tc=X("chevron-up",ec);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xt=X("circle-alert",sc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ze=X("circle-check-big",rc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Es=X("circle-check",nc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ms=X("circle-x",ac);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ut=X("clock",oc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Zs=X("copy",ic);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],cc=X("crown",lc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],xe=X("dollar-sign",dc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],De=X("download",uc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],hc=X("external-link",mc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gt=X("eye-off",xc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],st=X("eye",fc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],be=X("file-text",pc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],la=X("folder-open",gc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],jc=X("graduation-cap",vc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yc=X("image",bc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],sn=X("layout-dashboard",Nc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],cs=X("link",wc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Sc=X("log-out",Cc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],er=X("mail",kc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Dc=X("message-square",Pc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_c=X("monitor",Ac);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],rn=X("moon",Mc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wt=X("package",Tc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Ic=X("panel-left",Ec);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Oc=X("paperclip",Rc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Lc=X("phone",Fc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Be=X("plus",$c);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fr=X("save",zc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Bc=X("search",Wc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qc=X("settings",Vc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ct=X("shield",Hc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ds=X("square-check-big",Yc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pr=X("square-pen",Uc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],nn=X("sun",Gc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ca=X("trash-2",Xc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Qc=X("trending-down",Kc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],tr=X("trending-up",Jc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ed=X("truck",Zc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],an=X("upload",td);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],We=X("user-plus",sd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],et=X("user",rd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ze=X("users",nd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],od=X("video",ad);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rt=X("x",id),ld="/assets/logo-CZhMzCMz.png";function Xt({size:t="md",showText:s=!0,className:r="",clickable:n=!1}){const a={sm:"h-10 w-10",md:"h-14 w-14",lg:"h-20 w-20",xl:"h-24 w-24"},o={sm:"text-base",md:"text-lg",lg:"text-2xl",xl:"text-3xl"},i=()=>{n&&(window.location.hash="dashboard")};return e.jsxs("div",{className:`flex items-center gap-3 ${n?"cursor-pointer hover:opacity-80 transition-opacity":""} ${r}`,onClick:i,children:[e.jsx("img",{src:ld,alt:"Ehub Project Management Logo",className:`${a[t]} object-contain`}),s&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`${o[t]} leading-none tracking-tight text-primary font-bold`,children:"Ehub"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Project Management"})]})]})}const cd="/api";class dd{constructor(){ns(this,"baseUrl");ns(this,"token",null);this.baseUrl=cd,this.token=localStorage.getItem("authToken")}async request(s,r={},n=0){const a=`${this.baseUrl}${s}`,o={"Content-Type":"application/json",...r.headers};this.token&&(o.Authorization=`Bearer ${this.token}`);try{const i=await fetch(a,{...r,headers:o});if(i.status===429){const d=i.headers.get("Retry-After"),c=d?parseInt(d,10):NaN,m=Number.isFinite(c)?Math.min(Math.max(c,1),30)*1e3:Math.min(1e3*Math.pow(2,n),8e3);return n<3?(await new Promise(p=>setTimeout(p,m)),this.request(s,r,n+1)):{error:"Too many requests. Please try again shortly."}}if(!i.ok){const d=await i.json().catch(()=>({}));throw new Error(d.error||`HTTP ${i.status}`)}return{data:await i.json()}}catch(i){if(n<2){const l=Math.min(1e3*Math.pow(2,n),4e3);return await new Promise(d=>setTimeout(d,l)),this.request(s,r,n+1)}return console.error(`API request failed for ${s}:`,i),{error:i instanceof Error?i.message:"Unknown error"}}}async login(s,r){const n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({identifier:s,password:r})});return n.data&&n.data.token&&(this.token=n.data.token,localStorage.setItem("authToken",this.token)),n}async signup(s){const r=await this.request("/auth/signup",{method:"POST",body:JSON.stringify(s)});return r.data&&r.data.token&&(this.token=r.data.token,localStorage.setItem("authToken",this.token)),r}logout(){this.token=null,localStorage.removeItem("authToken")}setToken(s){this.token=s,localStorage.setItem("authToken",s)}async getProjects(){return this.request("/projects")}async createProject(s){return this.request("/projects",{method:"POST",body:JSON.stringify(s)})}async updateProject(s,r){return this.request(`/projects/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteProject(s){return this.request(`/projects/${s}`,{method:"DELETE"})}async getTasks(){return this.request("/tasks")}async createTask(s){return this.request("/tasks",{method:"POST",body:JSON.stringify(s)})}async updateTask(s,r){return this.request(`/tasks/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteTask(s){return this.request(`/tasks/${s}`,{method:"DELETE"})}async getWorkLogs(){return this.request("/worklogs")}async createWorkLog(s){return this.request("/worklogs",{method:"POST",body:JSON.stringify(s)})}async getMaterials(){return this.request("/materials")}async createMaterial(s){return this.request("/materials",{method:"POST",body:JSON.stringify(s)})}async getUsers(){return this.request("/users")}async createClient(s){return this.request("/users/client",{method:"POST",body:JSON.stringify(s)})}async healthCheck(){return this.request("/health")}}const ye=new dd;function gr(t){return{id:t.id,name:t.name,email:t.email,role:t.role,school:t.school,secureId:t.secure_id,employeeNumber:t.employee_number,phone:t.phone,gcashNumber:t.gcash_number,clientProjectId:t.client_project_id}}function ud({onLogin:t,onShowSignup:s,onShowForgotPassword:r}){const[n,a]=u.useState({identifier:"",password:""}),[o,i]=u.useState(!1),[l,d]=u.useState(""),[c,m]=u.useState(!1),p=(h,g)=>{a(x=>({...x,[h]:g})),d("")},f=async h=>{h.preventDefault(),m(!0),d("");try{const g=await ye.login(n.identifier,n.password);if(g.data){g.data.token&&ye.setToken(g.data.token);const x=g.data.user,v=gr(x);t(v)}else{if(n.identifier.toLowerCase()==="admin"&&n.password==="admin123"){const x={id:"admin-1",name:"Demo Administrator",email:"admin@ehub.com",role:"admin",school:"Ehub University",phone:"+63 123 456 7890",gcashNumber:"09123456789",secureId:"ADM001",employeeNumber:"EMP001",isActive:!0,createdAt:new Date().toISOString(),department:"Administration"};t(x);return}if(n.identifier.toLowerCase()==="supervisor"&&n.password==="supervisor123"){const x={id:"supervisor-1",name:"Demo Supervisor",email:"supervisor@ehub.com",role:"supervisor",school:"Ehub University",phone:"+63 987 654 3210",gcashNumber:"09987654321",secureId:"SUP001",employeeNumber:"EMP101",isActive:!0,createdAt:new Date().toISOString(),department:"Demo Department"};t(x);return}throw new Error(g.error||"Login failed")}}catch(g){if(n.identifier.toLowerCase()==="admin"&&n.password==="admin123"){const x={id:"admin-1",name:"Demo Administrator",email:"admin@ehub.com",role:"admin",school:"Ehub University",phone:"+63 123 456 7890",gcashNumber:"09123456789",secureId:"ADM001",employeeNumber:"EMP001",isActive:!0,createdAt:new Date().toISOString(),department:"Administration"};t(x);return}if(n.identifier.toLowerCase()==="supervisor"&&n.password==="supervisor123"){const x={id:"supervisor-1",name:"Demo Supervisor",email:"supervisor@ehub.com",role:"supervisor",school:"Ehub University",phone:"+63 987 654 3210",gcashNumber:"09987654321",secureId:"SUP001",employeeNumber:"EMP101",isActive:!0,createdAt:new Date().toISOString(),department:"Demo Department"};t(x);return}d(g instanceof Error?g.message:"Login failed")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(B,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(te,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Xt,{size:"xl",showText:!0,className:"font-[Archivo_Black]"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ct,{className:"h-6 w-6 text-primary"}),e.jsx(se,{className:"text-2xl font-[Archivo_Black]",children:"Ehub Project Management"})]}),e.jsx(Yt,{className:"text-base",children:"Enter your credentials to access the system"})]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"identifier",children:"Employee ID / Secure ID / Email"}),e.jsx(U,{id:"identifier",type:"text",placeholder:"Enter your ID or email",value:n.identifier,onChange:h=>p("identifier",h.target.value),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use your Employee ID, Secure ID, or email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{id:"password",type:o?"text":"password",placeholder:"Enter your password",value:n.password,onChange:h=>p("password",h.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>i(!o),children:o?e.jsx(Gt,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"})})]})]}),l&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:l})}),e.jsx(T,{type:"submit",className:"w-full h-12 text-base bg-accent hover:bg-accent/90 font-[Archivo_Black]",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Authenticating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Login"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:r,className:"text-sm text-primary hover:underline",children:"Forgot your password?"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(aa,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"New Fabricator?"})})]}),e.jsxs(T,{onClick:s,variant:"outline",className:"w-full h-11",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Sign Up as Fabricator"]})]})]})]})}function ce({...t}){return e.jsx(Di,{"data-slot":"select",...t})}function de({...t}){return e.jsx(Mi,{"data-slot":"select-value",...t})}function ue({className:t,size:s="default",children:r,...n}){return e.jsxs(Ai,{"data-slot":"select-trigger","data-size":s,className:W("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,e.jsx(_i,{asChild:!0,children:e.jsx(ia,{className:"size-4 opacity-50"})})]})}function me({className:t,children:s,position:r="popper",...n}){return e.jsx(Ti,{children:e.jsxs(Ei,{"data-slot":"select-content",className:W("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(md,{}),e.jsx(Ii,{className:W("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(hd,{})]})})}function $({className:t,children:s,...r}){return e.jsxs(Ri,{"data-slot":"select-item",className:W("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Oi,{children:e.jsx(Gl,{className:"size-4"})})}),e.jsx(Fi,{children:s})]})}function md({className:t,...s}){return e.jsx(Li,{"data-slot":"select-scroll-up-button",className:W("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(tc,{className:"size-4"})})}function hd({className:t,...s}){return e.jsx($i,{"data-slot":"select-scroll-down-button",className:W("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ia,{className:"size-4"})})}const Fe=ur,xd=dr,da=u.forwardRef(({className:t,...s},r)=>e.jsx(vs,{ref:r,className:W("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));da.displayName=vs.displayName;const Me=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(xd,{children:[e.jsx(da,{}),e.jsxs(js,{ref:n,className:W("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,e.jsxs(bs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(rt,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Me.displayName=js.displayName;const Te=({className:t,...s})=>e.jsx("div",{className:W("flex flex-col gap-2 text-center sm:text-left",t),...s});Te.displayName="DialogHeader";const Ee=u.forwardRef(({className:t,...s},r)=>e.jsx(ys,{ref:r,className:W("text-lg leading-none font-semibold",t),...s}));Ee.displayName=ys.displayName;const Ie=u.forwardRef(({className:t,...s},r)=>e.jsx(Ns,{ref:r,className:W("text-muted-foreground text-sm",t),...s}));Ie.displayName=Ns.displayName;const fd=ws("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function re({className:t,variant:s,asChild:r=!1,...n}){const a=r?Le:"span";return e.jsx(a,{"data-slot":"badge",className:W(fd({variant:s}),t),...n})}function pd({isOpen:t,user:s,onClose:r,onContinue:n}){const[a,o]=u.useState(10),[i,l]=u.useState(!1);u.useEffect(()=>{if(!t){o(10),l(!1);return}const c=setInterval(()=>{o(m=>m<=1?(clearInterval(c),n(),0):m-1)},1e3);return()=>clearInterval(c)},[t,n]);const d=async()=>{if(s!=null&&s.secureId)try{await navigator.clipboard.writeText(s.secureId),l(!0),setTimeout(()=>l(!1),2e3)}catch(c){console.error("Failed to copy ID:",c)}};return s?e.jsx(Fe,{open:t,onOpenChange:()=>{},children:e.jsxs(Me,{className:"max-w-md",children:[e.jsxs(Te,{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(ze,{className:"h-8 w-8 text-green-600"})})}),e.jsx(Ee,{className:"text-xl",children:"Registration Successful!"}),e.jsx(Ie,{children:"Welcome to Ehub Project Management. Your account has been created successfully."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Account Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Name:"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email:"}),e.jsx("span",{className:"font-medium",children:s.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Role:"}),e.jsx(re,{variant:"secondary",className:"capitalize",children:s.role})]})]})]}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-medium text-primary",children:"Your Login ID"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this ID to login to your account"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"bg-background border rounded-md px-4 py-2 font-mono text-lg font-bold text-primary",children:s.secureId}),e.jsxs(T,{variant:"outline",size:"sm",onClick:d,className:"h-10",children:[e.jsx(Zs,{className:"h-4 w-4"}),i?"Copied!":"Copy"]})]})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Important:"})," Please save your Login ID (",s.secureId,") in a secure place. You'll need it to access your account."]})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Automatically continuing in ",a," seconds..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",onClick:r,className:"flex-1",children:"Close"}),e.jsx(T,{onClick:n,className:"flex-1",children:"Continue to Dashboard"})]})]})]})]})}):null}const gd=["Ehub University","Philippine State College of Aeronautics","Technical Education and Skills Development Authority","University of the Philippines","Ateneo de Manila University","De La Salle University","University of Santo Tomas","Far Eastern University","Polytechnic University of the Philippines","Technological University of the Philippines","Mapa University","Adamson University","University of the East","National University","San Beda University","Other"];function vd({onSignup:t,onBackToMain:s}){const[r,n]=u.useState({name:"",email:"",password:"",confirmPassword:"",school:"",phone:"",gcashNumber:""}),[a,o]=u.useState(!1),[i,l]=u.useState(!1),[d,c]=u.useState(""),[m,p]=u.useState(!1),[f,h]=u.useState(!1),[g,x]=u.useState(null),v=(M,w)=>{n(A=>({...A,[M]:w})),c("")},y=()=>r.name.trim()?r.email.trim()?r.email.includes("@")?r.password?r.password.length<6?"Password must be at least 6 characters":r.password!==r.confirmPassword?"Passwords do not match":r.school?r.phone.trim()?r.gcashNumber.trim()?null:"GCash number is required":"Phone number is required":"School is required":"Password is required":"Please enter a valid email":"Email is required":"Name is required",j=async M=>{M.preventDefault();const w=y();if(w){c(w);return}p(!0),c("");try{const A=await ye.signup({name:r.name,email:r.email,password:r.password,school:r.school,phone:r.phone,gcashNumber:r.gcashNumber});if(A.data){const C=A.data.user||A.data,F=gr(C);x(F),h(!0)}else throw new Error(A.error||"Signup failed")}catch(A){c(A instanceof Error?A.message:"Signup failed")}finally{p(!1)}},D=()=>{g&&t(g)},N=()=>{h(!1),s()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden py-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(B,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(te,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Xt,{size:"xl",showText:!1})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(We,{className:"h-6 w-6 text-accent"}),e.jsx(se,{className:"text-2xl",children:"Fabricator Registration"})]}),e.jsx(Yt,{className:"text-base",children:"Create your fabricator account"})]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Full Name"}),e.jsx(U,{id:"name",type:"text",placeholder:"Enter your full name",value:r.name,onChange:M=>v("name",M.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"email",children:"Email Address"}),e.jsx(U,{id:"email",type:"email",placeholder:"Enter your email address",value:r.email,onChange:M=>v("email",M.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{id:"password",type:a?"text":"password",placeholder:"Enter password",value:r.password,onChange:M=>v("password",M.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?e.jsx(Gt,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirm password",value:r.confirmPassword,onChange:M=>v("confirmPassword",M.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>l(!i),children:i?e.jsx(Gt,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"school",children:"School/Institution"}),e.jsxs(ce,{value:r.school,onValueChange:M=>v("school",M),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select your school"})}),e.jsx(me,{children:gd.map(M=>e.jsx($,{value:M,children:M},M))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"phone",children:"Phone Number"}),e.jsx(U,{id:"phone",type:"tel",placeholder:"+63 9XX XXX XXXX",value:r.phone,onChange:M=>v("phone",M.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"gcashNumber",children:"GCash Number"}),e.jsx(U,{id:"gcashNumber",type:"tel",placeholder:"09XX XXX XXXX",value:r.gcashNumber,onChange:M=>v("gcashNumber",M.target.value),required:!0})]})]}),d&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:d})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Create Account"]})}),e.jsxs(T,{type:"button",variant:"outline",onClick:s,className:"w-full",disabled:m,children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"By creating an account, you agree to our terms of service and privacy policy."})})]})]})]}),e.jsx(pd,{isOpen:f,user:g,onClose:N,onContinue:D})]})}function jd({onBackToLogin:t}){const[s,r]=u.useState(""),[n,a]=u.useState(!1),[o,i]=u.useState(!1),[l,d]=u.useState(""),c=async m=>{m.preventDefault(),a(!0),d("");try{console.log(`Password reset email would be sent to ${s}`),i(!0)}catch(p){d(p instanceof Error?p.message:"Failed to send reset email")}finally{a(!1)}};return o?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(B,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(te,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Xt,{size:"xl"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ze,{className:"h-6 w-6 text-green-600"}),e.jsx(se,{className:"text-2xl text-green-600",children:"Reset Email Sent"})]}),e.jsx(Yt,{className:"text-base",children:"Check your email for password reset instructions"})]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We've sent a password reset link to ",e.jsx("strong",{children:s})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The link will expire in 15 minutes for security purposes."})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs(T,{type:"button",onClick:t,className:"w-full",variant:"outline",children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})]})]})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(B,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(te,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Xt,{size:"xl"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(er,{className:"h-6 w-6 text-primary"}),e.jsx(se,{className:"text-2xl",children:"Reset Password"})]}),e.jsx(Yt,{className:"text-base",children:"Enter your email address and we'll send you a reset link"})]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"email",children:"Email Address"}),e.jsx(U,{id:"email",type:"email",placeholder:"Enter your email address",value:s,onChange:m=>r(m.target.value),required:!0})]}),l&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:l})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{type:"submit",className:"w-full",disabled:n||!s,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Sending Reset Email..."]}):e.jsxs(e.Fragment,{children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),"Send Reset Email"]})}),e.jsxs(T,{type:"button",variant:"outline",onClick:t,className:"w-full",disabled:n,children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsxs("p",{children:["Remember your password?"," ",e.jsx("button",{onClick:t,className:"text-primary hover:underline",children:"Sign in here"})]})})]})]})]})}const Is=768;function bd(){const[t,s]=u.useState(void 0);return u.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Is-1}px)`),n=()=>{s(window.innerWidth<Is)};return r.addEventListener("change",n),s(window.innerWidth<Is),()=>r.removeEventListener("change",n)},[]),!!t}function yd({...t}){return e.jsx(ur,{"data-slot":"sheet",...t})}function Nd({...t}){return e.jsx(dr,{"data-slot":"sheet-portal",...t})}function wd({className:t,...s}){return e.jsx(vs,{"data-slot":"sheet-overlay",className:W("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Cd({className:t,children:s,side:r="right",...n}){return e.jsxs(Nd,{children:[e.jsx(wd,{}),e.jsxs(js,{"data-slot":"sheet-content",className:W("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[s,e.jsxs(bs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(rt,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Sd({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:W("flex flex-col gap-1.5 p-4",t),...s})}function kd({className:t,...s}){return e.jsx(ys,{"data-slot":"sheet-title",className:W("text-foreground font-semibold",t),...s})}function Pd({className:t,...s}){return e.jsx(Ns,{"data-slot":"sheet-description",className:W("text-muted-foreground text-sm",t),...s})}function Je(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function on(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Dd(...t){return s=>{let r=!1;const n=t.map(a=>{const o=on(a,s);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():on(t[a],null)}}}}function At(...t){return u.useCallback(Dd(...t),t)}function ua(t,s=[]){let r=[];function n(o,i){const l=u.createContext(i),d=r.length;r=[...r,i];const c=p=>{var y;const{scope:f,children:h,...g}=p,x=((y=f==null?void 0:f[t])==null?void 0:y[d])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:h})};c.displayName=o+"Provider";function m(p,f){var x;const h=((x=f==null?void 0:f[t])==null?void 0:x[d])||l,g=u.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[c,m]}const a=()=>{const o=r.map(i=>u.createContext(i));return function(l){const d=(l==null?void 0:l[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,Ad(a,...s)]}function Ad(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:d,scopeName:c})=>{const p=d(o)[`__scope${c}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}var _d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gt=_d.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Md(t,s){t&&mr.flushSync(()=>t.dispatchEvent(s))}function Lt(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function Td(t,s=globalThis==null?void 0:globalThis.document){const r=Lt(t);u.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var Ed="DismissableLayer",sr="dismissableLayer.update",Id="dismissableLayer.pointerDownOutside",Rd="dismissableLayer.focusOutside",ln,ma=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ha=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...d}=t,c=u.useContext(ma),[m,p]=u.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=u.useState({}),g=At(s,A=>p(A)),x=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),j=m?x.indexOf(m):-1,D=c.layersWithOutsidePointerEventsDisabled.size>0,N=j>=y,M=Ld(A=>{const C=A.target,F=[...c.branches].some(b=>b.contains(C));!N||F||(a==null||a(A),i==null||i(A),A.defaultPrevented||l==null||l())},f),w=$d(A=>{const C=A.target;[...c.branches].some(b=>b.contains(C))||(o==null||o(A),i==null||i(A),A.defaultPrevented||l==null||l())},f);return Td(A=>{j===c.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),u.useEffect(()=>{if(m)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ln=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(m)),c.layers.add(m),cn(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ln)}},[m,f,r,c]),u.useEffect(()=>()=>{m&&(c.layers.delete(m),c.layersWithOutsidePointerEventsDisabled.delete(m),cn())},[m,c]),u.useEffect(()=>{const A=()=>h({});return document.addEventListener(sr,A),()=>document.removeEventListener(sr,A)},[]),e.jsx(gt.div,{...d,ref:g,style:{pointerEvents:D?N?"auto":"none":void 0,...t.style},onFocusCapture:Je(t.onFocusCapture,w.onFocusCapture),onBlurCapture:Je(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Je(t.onPointerDownCapture,M.onPointerDownCapture)})});ha.displayName=Ed;var Od="DismissableLayerBranch",Fd=u.forwardRef((t,s)=>{const r=u.useContext(ma),n=u.useRef(null),a=At(s,n);return u.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),e.jsx(gt.div,{...t,ref:a})});Fd.displayName=Od;function Ld(t,s=globalThis==null?void 0:globalThis.document){const r=Lt(t),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let d=function(){xa(Id,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=d,s.addEventListener("click",a.current,{once:!0})):d()}else s.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{s.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",o),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function $d(t,s=globalThis==null?void 0:globalThis.document){const r=Lt(t),n=u.useRef(!1);return u.useEffect(()=>{const a=o=>{o.target&&!n.current&&xa(Rd,r,{originalEvent:o},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cn(){const t=new CustomEvent(sr);document.dispatchEvent(t)}function xa(t,s,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?Md(a,o):a.dispatchEvent(o)}var St=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},zd=hr.useId||(()=>{}),Wd=0;function Bd(t){const[s,r]=u.useState(zd());return St(()=>{r(n=>n??String(Wd++))},[t]),s?`radix-${s}`:""}var Vd="Arrow",fa=u.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...o}=t;return e.jsx(gt.svg,{...o,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});fa.displayName=Vd;var qd=fa;function Hd(t){const[s,r]=u.useState(void 0);return St(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const d=o.borderBoxSize,c=Array.isArray(d)?d[0]:d;i=c.inlineSize,l=c.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var vr="Popper",[pa,ga]=ua(vr),[Yd,va]=pa(vr),ja=t=>{const{__scopePopper:s,children:r}=t,[n,a]=u.useState(null);return e.jsx(Yd,{scope:s,anchor:n,onAnchorChange:a,children:r})};ja.displayName=vr;var ba="PopperAnchor",ya=u.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,o=va(ba,r),i=u.useRef(null),l=At(s,i);return u.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:e.jsx(gt.div,{...a,ref:l})});ya.displayName=ba;var jr="PopperContent",[Ud,Gd]=pa(jr),Na=u.forwardRef((t,s)=>{var Oe,Xe,z,q,Z,K;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:c=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,...x}=t,v=va(jr,r),[y,j]=u.useState(null),D=At(s,ee=>j(ee)),[N,M]=u.useState(null),w=Hd(N),A=(w==null?void 0:w.width)??0,C=(w==null?void 0:w.height)??0,F=n+(o!=="center"?"-"+o:""),b=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(c)?c:[c],P=L.length>0,O={padding:b,boundary:L.filter(Kd),altBoundary:P},{refs:k,floatingStyles:Y,placement:S,isPositioned:R,middlewareData:I}=Ln({strategy:"fixed",placement:F,whileElementsMounted:(...ee)=>Yn(...ee,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[$n({mainAxis:a+C,alignmentAxis:i}),d&&zn({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Hn():void 0,...O}),d&&Wn({...O}),Bn({...O,apply:({elements:ee,rects:he,availableWidth:_,availableHeight:H})=>{const{width:ae,height:Q}=he.reference,ve=ee.floating.style;ve.setProperty("--radix-popper-available-width",`${_}px`),ve.setProperty("--radix-popper-available-height",`${H}px`),ve.setProperty("--radix-popper-anchor-width",`${ae}px`),ve.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),N&&Vn({element:N,padding:l}),Qd({arrowWidth:A,arrowHeight:C}),f&&qn({strategy:"referenceHidden",...O})]}),[oe,je]=Sa(S),G=Lt(g);St(()=>{R&&(G==null||G())},[R,G]);const ge=(Oe=I.arrow)==null?void 0:Oe.x,Ce=(Xe=I.arrow)==null?void 0:Xe.y,it=((z=I.arrow)==null?void 0:z.centerOffset)!==0,[lt,Ge]=u.useState();return St(()=>{y&&Ge(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:R?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:lt,"--radix-popper-transform-origin":[(q=I.transformOrigin)==null?void 0:q.x,(Z=I.transformOrigin)==null?void 0:Z.y].join(" "),...((K=I.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Ud,{scope:r,placedSide:oe,onArrowChange:M,arrowX:ge,arrowY:Ce,shouldHideArrow:it,children:e.jsx(gt.div,{"data-side":oe,"data-align":je,...x,ref:D,style:{...x.style,animation:R?void 0:"none"}})})})});Na.displayName=jr;var wa="PopperArrow",Xd={top:"bottom",right:"left",bottom:"top",left:"right"},Ca=u.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,o=Gd(wa,n),i=Xd[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(qd,{...a,ref:r,style:{...a.style,display:"block"}})})});Ca.displayName=wa;function Kd(t){return t!==null}var Qd=t=>({name:"transformOrigin",options:t,fn(s){var v,y,j;const{placement:r,rects:n,middlewareData:a}=s,i=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=i?0:t.arrowWidth,d=i?0:t.arrowHeight,[c,m]=Sa(r),p={start:"0%",center:"50%",end:"100%"}[m],f=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,h=(((j=a.arrow)==null?void 0:j.y)??0)+d/2;let g="",x="";return c==="bottom"?(g=i?p:`${f}px`,x=`${-d}px`):c==="top"?(g=i?p:`${f}px`,x=`${n.floating.height+d}px`):c==="right"?(g=`${-d}px`,x=i?p:`${h}px`):c==="left"&&(g=`${n.floating.width+d}px`,x=i?p:`${h}px`),{data:{x:g,y:x}}}});function Sa(t){const[s,r="center"]=t.split("-");return[s,r]}var Jd=ja,Zd=ya,eu=Na,tu=Ca,su="Portal",ka=u.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,o]=u.useState(!1);St(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Xn.createPortal(e.jsx(gt.div,{...n,ref:s}),i):null});ka.displayName=su;function ru(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var br=t=>{const{present:s,children:r}=t,n=nu(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),o=At(n.ref,au(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:o}):null};br.displayName="Presence";function nu(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),o=u.useRef("none"),i=t?"mounted":"unmounted",[l,d]=ru(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const c=as(n.current);o.current=l==="mounted"?c:"none"},[l]),St(()=>{const c=n.current,m=a.current;if(m!==t){const f=o.current,h=as(c);t?d("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(m&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),St(()=>{if(s){let c;const m=s.ownerDocument.defaultView??window,p=h=>{const x=as(n.current).includes(h.animationName);if(h.target===s&&x&&(d("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",c=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},f=h=>{h.target===s&&(o.current=as(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(c),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function as(t){return(t==null?void 0:t.animationName)||"none"}function au(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function ou({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=iu({defaultProp:s,onChange:r}),o=t!==void 0,i=o?t:n,l=Lt(r),d=u.useCallback(c=>{if(o){const p=typeof c=="function"?c(t):c;p!==t&&l(p)}else a(c)},[o,t,a,l]);return[i,d]}function iu({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),o=Lt(s);return u.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}var lu="VisuallyHidden",Pa=u.forwardRef((t,s)=>e.jsx(gt.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Pa.displayName=lu;var cu=Pa,[Cs]=ua("Tooltip",[ga]),Ss=ga(),Da="TooltipProvider",du=700,rr="tooltip.open",[uu,yr]=Cs(Da),Aa=t=>{const{__scopeTooltip:s,delayDuration:r=du,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,[i,l]=u.useState(!0),d=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const m=c.current;return()=>window.clearTimeout(m)},[]),e.jsx(uu,{scope:s,isOpenDelayed:i,delayDuration:r,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),l(!1)},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:d,onPointerInTransitChange:u.useCallback(m=>{d.current=m},[]),disableHoverableContent:a,children:o})};Aa.displayName=Da;var ks="Tooltip",[mu,Jt]=Cs(ks),_a=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a=!1,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=t,d=yr(ks,t.__scopeTooltip),c=Ss(s),[m,p]=u.useState(null),f=Bd(),h=u.useRef(0),g=i??d.disableHoverableContent,x=l??d.delayDuration,v=u.useRef(!1),[y=!1,j]=ou({prop:n,defaultProp:a,onChange:A=>{A?(d.onOpen(),document.dispatchEvent(new CustomEvent(rr))):d.onClose(),o==null||o(A)}}),D=u.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),N=u.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,j(!0)},[j]),M=u.useCallback(()=>{window.clearTimeout(h.current),h.current=0,j(!1)},[j]),w=u.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,j(!0),h.current=0},x)},[x,j]);return u.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),e.jsx(Jd,{...c,children:e.jsx(mu,{scope:s,contentId:f,open:y,stateAttribute:D,trigger:m,onTriggerChange:p,onTriggerEnter:u.useCallback(()=>{d.isOpenDelayed?w():N()},[d.isOpenDelayed,w,N]),onTriggerLeave:u.useCallback(()=>{g?M():(window.clearTimeout(h.current),h.current=0)},[M,g]),onOpen:N,onClose:M,disableHoverableContent:g,children:r})})};_a.displayName=ks;var nr="TooltipTrigger",Ma=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Jt(nr,r),o=yr(nr,r),i=Ss(r),l=u.useRef(null),d=At(s,l,a.onTriggerChange),c=u.useRef(!1),m=u.useRef(!1),p=u.useCallback(()=>c.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(Zd,{asChild:!0,...i,children:e.jsx(gt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:d,onPointerMove:Je(t.onPointerMove,f=>{f.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:Je(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:Je(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Je(t.onFocus,()=>{c.current||a.onOpen()}),onBlur:Je(t.onBlur,a.onClose),onClick:Je(t.onClick,a.onClose)})})});Ma.displayName=nr;var Nr="TooltipPortal",[hu,xu]=Cs(Nr,{forceMount:void 0}),Ta=t=>{const{__scopeTooltip:s,forceMount:r,children:n,container:a}=t,o=Jt(Nr,s);return e.jsx(hu,{scope:s,forceMount:r,children:e.jsx(br,{present:r||o.open,children:e.jsx(ka,{asChild:!0,container:a,children:n})})})};Ta.displayName=Nr;var It="TooltipContent",Ea=u.forwardRef((t,s)=>{const r=xu(It,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,i=Jt(It,t.__scopeTooltip);return e.jsx(br,{present:n||i.open,children:i.disableHoverableContent?e.jsx(Ia,{side:a,...o,ref:s}):e.jsx(fu,{side:a,...o,ref:s})})}),fu=u.forwardRef((t,s)=>{const r=Jt(It,t.__scopeTooltip),n=yr(It,t.__scopeTooltip),a=u.useRef(null),o=At(s,a),[i,l]=u.useState(null),{trigger:d,onClose:c}=r,m=a.current,{onPointerInTransitChange:p}=n,f=u.useCallback(()=>{l(null),p(!1)},[p]),h=u.useCallback((g,x)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},j=vu(y,v.getBoundingClientRect()),D=ju(y,j),N=bu(x.getBoundingClientRect()),M=Nu([...D,...N]);l(M),p(!0)},[p]);return u.useEffect(()=>()=>f(),[f]),u.useEffect(()=>{if(d&&m){const g=v=>h(v,m),x=v=>h(v,d);return d.addEventListener("pointerleave",g),m.addEventListener("pointerleave",x),()=>{d.removeEventListener("pointerleave",g),m.removeEventListener("pointerleave",x)}}},[d,m,h,f]),u.useEffect(()=>{if(i){const g=x=>{const v=x.target,y={x:x.clientX,y:x.clientY},j=(d==null?void 0:d.contains(v))||(m==null?void 0:m.contains(v)),D=!yu(y,i);j?f():D&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[d,m,i,c,f]),e.jsx(Ia,{...t,ref:o})}),[pu,gu]=Cs(ks,{isInside:!1}),Ia=u.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=t,d=Jt(It,r),c=Ss(r),{onClose:m}=d;return u.useEffect(()=>(document.addEventListener(rr,m),()=>document.removeEventListener(rr,m)),[m]),u.useEffect(()=>{if(d.trigger){const p=f=>{const h=f.target;h!=null&&h.contains(d.trigger)&&m()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[d.trigger,m]),e.jsx(ha,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:p=>p.preventDefault(),onDismiss:m,children:e.jsxs(eu,{"data-state":d.stateAttribute,...c,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Un,{children:n}),e.jsx(pu,{scope:r,isInside:!0,children:e.jsx(cu,{id:d.contentId,role:"tooltip",children:a||n})})]})})});Ea.displayName=It;var Ra="TooltipArrow",Oa=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Ss(r);return gu(Ra,r).isInside?null:e.jsx(tu,{...a,...n,ref:s})});Oa.displayName=Ra;function vu(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function ju(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function bu(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function yu(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,i=s.length-1;o<s.length;i=o++){const l=s[o].x,d=s[o].y,c=s[i].x,m=s[i].y;d>n!=m>n&&r<(c-l)*(n-d)/(m-d)+l&&(a=!a)}return a}function Nu(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),wu(s)}function wu(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const o=s[s.length-1],i=s[s.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Cu=Aa,Su=_a,ku=Ma,Pu=Ta,Du=Ea,Au=Oa;function Fa({delayDuration:t=0,...s}){return e.jsx(Cu,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function _u({...t}){return e.jsx(Fa,{children:e.jsx(Su,{"data-slot":"tooltip",...t})})}function Mu({...t}){return e.jsx(ku,{"data-slot":"tooltip-trigger",...t})}function Tu({className:t,sideOffset:s=0,children:r,...n}){return e.jsx(Pu,{children:e.jsxs(Du,{"data-slot":"tooltip-content",sideOffset:s,className:W("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,e.jsx(Au,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Eu="sidebar_state",Iu=60*60*24*7,Ru="16rem",Ou="18rem",Fu="3rem",Lu="b",La=u.createContext(null);function Ps(){const t=u.useContext(La);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function $u({defaultOpen:t=!0,open:s,onOpenChange:r,className:n,style:a,children:o,...i}){const l=bd(),[d,c]=u.useState(!1),[m,p]=u.useState(t),f=s??m,h=u.useCallback(y=>{const j=typeof y=="function"?y(f):y;r?r(j):p(j),document.cookie=`${Eu}=${j}; path=/; max-age=${Iu}`},[r,f]),g=u.useCallback(()=>l?c(y=>!y):h(y=>!y),[l,h,c]);u.useEffect(()=>{const y=j=>{j.key===Lu&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),g())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[g]);const x=f?"expanded":"collapsed",v=u.useMemo(()=>({state:x,open:f,setOpen:h,isMobile:l,openMobile:d,setOpenMobile:c,toggleSidebar:g}),[x,f,h,l,d,c,g]);return e.jsx(La.Provider,{value:v,children:e.jsx(Fa,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Ru,"--sidebar-width-icon":Fu,...a},className:W("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...i,children:o})})})}function zu({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:n,children:a,...o}){const{isMobile:i,state:l,openMobile:d,setOpenMobile:c}=Ps();return r==="none"?e.jsx("div",{"data-slot":"sidebar",className:W("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...o,children:a}):i?e.jsx(yd,{open:d,onOpenChange:c,...o,children:e.jsxs(Cd,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Ou},side:t,children:[e.jsxs(Sd,{className:"sr-only",children:[e.jsx(kd,{children:"Sidebar"}),e.jsx(Pd,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?r:"","data-variant":s,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:W("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:W("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function Wu({className:t,onClick:s,...r}){const{toggleSidebar:n}=Ps();return e.jsxs(T,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:W("size-7",t),onClick:a=>{s==null||s(a),n()},...r,children:[e.jsx(Ic,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function Bu({className:t,...s}){return e.jsx("main",{"data-slot":"sidebar-inset",className:W("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...s})}function Vu({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:W("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})}function qu({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:W("relative flex w-full min-w-0 flex-col p-2",t),...s})}function Hu({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:W("w-full text-sm",t),...s})}function Yu({className:t,...s}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:W("flex w-full min-w-0 flex-col gap-1",t),...s})}function Uu({className:t,...s}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:W("group/menu-item relative",t),...s})}const Gu=ws("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Xu({asChild:t=!1,isActive:s=!1,variant:r="default",size:n="default",tooltip:a,className:o,...i}){const l=t?Le:"button",{isMobile:d,state:c}=Ps(),m=e.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":s,className:W(Gu({variant:r,size:n}),o),...i});return a?(typeof a=="string"&&(a={children:a}),e.jsxs(_u,{children:[e.jsx(Mu,{asChild:!0,children:m}),e.jsx(Tu,{side:"right",align:"center",hidden:c!=="collapsed"||d,...a})]})):m}function Ku({currentUser:t}){const{isMobile:s,setOpenMobile:r,state:n}=Ps(),o=(()=>{const i=[{title:"Dashboard",url:"#dashboard",icon:sn},{title:"Projects",url:"#projects",icon:la}];return t.role==="admin"?[...i,{title:"Archives",url:"#archives",icon:Tt},{title:"Tasks",url:"#tasks",icon:ds},{title:"Users",url:"#users",icon:Ze},{title:"Revenue",url:"#revenue",icon:xe},{title:"Reports",url:"#reports",icon:tn},{title:"Settings",url:"#settings",icon:qc}]:t.role==="supervisor"?[...i,{title:"Archives",url:"#archives",icon:Tt},{title:"Tasks",url:"#tasks",icon:ds},{title:"Team",url:"#team",icon:Ze},{title:"Reports",url:"#reports",icon:tn}]:t.role==="fabricator"?[...i,{title:"Work Log",url:"#worklog",icon:$e},{title:"Materials",url:"#materials",icon:wt},{title:"Tasks",url:"#tasks",icon:ds}]:t.role==="client"?[{title:"Dashboard",url:"#dashboard",icon:sn},{title:"Project Status",url:"#project-status",icon:st},{title:"Documentation",url:"#documentation",icon:De}]:i})();return e.jsx(zu,{className:"border-r-0",collapsible:"offcanvas",children:e.jsxs(Vu,{className:"gap-0 bg-sidebar",children:[e.jsx("div",{className:"p-4 border-b border-sidebar-border",children:e.jsx("h3",{className:`text-sm text-sidebar-foreground/70 tracking-wide uppercase transition-opacity ${n==="collapsed"?"opacity-0 w-0 overflow-hidden":""}`,children:"Navigation"})}),e.jsx(qu,{className:"py-2",children:e.jsx(Hu,{children:e.jsx(Yu,{className:"gap-1 px-2",children:o.map(i=>e.jsx(Uu,{children:e.jsx(Xu,{asChild:!0,className:"hover:bg-sidebar-accent rounded-lg transition-colors",tooltip:n==="collapsed"?i.title:void 0,children:e.jsxs("a",{href:i.url,className:"flex items-center gap-3 px-3 py-2.5",onClick:l=>{const d=i.url;d.startsWith("#")&&(l.preventDefault(),window.location.hash=d),s&&r(!1)},children:[e.jsx(i.icon,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:n==="collapsed"?"sr-only":"",children:i.title})]})})},i.title))})})})]})})}function Qu({...t}){return e.jsx(zi,{"data-slot":"dropdown-menu",...t})}function Ju({...t}){return e.jsx(Wi,{"data-slot":"dropdown-menu-trigger",...t})}function Zu({className:t,sideOffset:s=4,...r}){return e.jsx(Bi,{children:e.jsx(Vi,{"data-slot":"dropdown-menu-content",sideOffset:s,className:W("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function Rs({className:t,inset:s,variant:r="default",...n}){return e.jsx(qi,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:W("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function em({currentTheme:t,onThemeChange:s,isTransitioning:r=!1}){return e.jsxs(Qu,{children:[e.jsx(Ju,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(nn,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(rn,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(Zu,{align:"end",children:[e.jsxs(Rs,{onClick:()=>s("light"),className:t==="light"?"bg-accent text-accent-foreground":"",children:[e.jsx(nn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Light"})]}),e.jsxs(Rs,{onClick:()=>s("dark"),className:t==="dark"?"bg-accent text-accent-foreground":"",children:[e.jsx(rn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dark"})]}),e.jsxs(Rs,{onClick:()=>s("auto"),className:t==="auto"?"bg-accent text-accent-foreground":"",children:[e.jsx(_c,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Auto"}),r&&e.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Transitioning"})]})]})]})}function tm({currentUser:t,onLogout:s,currentTheme:r,onThemeChange:n,isTransitioning:a}){const o=()=>{switch(t.role){case"admin":return e.jsx(cc,{className:"h-4 w-4"});case"supervisor":return e.jsx(Ct,{className:"h-4 w-4"});case"fabricator":return e.jsx(Ct,{className:"h-4 w-4"});default:return e.jsx(Ct,{className:"h-4 w-4"})}},i=()=>{switch(t.role){case"admin":return e.jsx(re,{className:"bg-accent text-accent-foreground",children:"Admin"});case"supervisor":return e.jsx(re,{className:"bg-primary text-primary-foreground",children:"Supervisor"});case"fabricator":return e.jsx(re,{className:"bg-secondary text-secondary-foreground",children:"Fabricator"});case"client":return e.jsx(re,{variant:"outline",className:"border-primary text-primary",children:"Client"});default:return e.jsx(re,{variant:"outline",children:"User"})}};return e.jsxs("header",{className:"flex items-center justify-between px-6 py-3 bg-card border-b shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Wu,{}),e.jsx(Xt,{size:"md",showText:!0,clickable:!0})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(em,{currentTheme:r,onThemeChange:n,isTransitioning:a}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-muted/50 rounded-lg",children:[o(),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[i(),e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:t.secureId})]})]})]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:s,className:"ml-2 border-border hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(Sc,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}function sm({children:t,currentUser:s,onLogout:r,currentTheme:n,onThemeChange:a,isTransitioning:o}){return e.jsx($u,{children:e.jsxs("div",{className:"min-h-screen flex w-full",children:[e.jsx(Ku,{currentUser:s}),e.jsxs(Bu,{className:"flex-1",children:[e.jsx(tm,{currentUser:s,onLogout:r,currentTheme:n,onThemeChange:a,isTransitioning:o}),e.jsx("main",{className:"flex-1 p-6",children:t})]})]})})}const os=t=>{window.location.hash=t};function rm({projects:t,tasks:s,users:r,currentUser:n}){const a=()=>{if(n.role==="admin")return{projects:t,tasks:s,users:r};if(n.role==="supervisor"){const x=t.filter(y=>y.supervisorId===n.id),v=s.filter(y=>x.some(j=>j.id===y.projectId));return{projects:x,tasks:v,users:r.filter(y=>y.role==="fabricator")}}const h=s.filter(x=>x.assignedTo===n.id);return{projects:t.filter(x=>x.fabricatorIds.includes(n.id)),tasks:h,users:[]}},{projects:o,tasks:i,users:l}=a(),d=o.filter(h=>h.status==="in-progress").length,c=i.filter(h=>h.status==="completed").length,p=(()=>{if(n.role==="admin"){const g=o.reduce((v,y)=>v+y.budget,0);return{title:"Total Revenue",value:`${o.reduce((v,y)=>v+y.revenue,0).toLocaleString()}`,description:`${g.toLocaleString()} budgeted`,canView:!0}}if(n.role==="supervisor"){const g=o.reduce((v,y)=>v+y.budget,0),x=o.reduce((v,y)=>v+y.spent,0);return{title:"Project Budget",value:`${g.toLocaleString()}`,description:`${x.toLocaleString()} spent`,canView:!0}}return{title:"Assigned Value",value:`${o.reduce((g,x)=>g+x.revenue,0).toLocaleString()}`,description:`${o.length} assigned projects`,canView:!0}})(),f=[{title:"Active Projects",value:d.toString(),icon:la,description:`${o.length} total projects`,onClick:()=>os("projects")},{title:"Completed Tasks",value:c.toString(),icon:ds,description:`${i.length} total tasks`,onClick:()=>os("tasks")},...n.role!=="fabricator"?[{title:"Team Members",value:l.length.toString(),icon:Ze,description:"Available resources",onClick:()=>os("users")}]:[],{title:p.title,value:p.value,icon:xe,description:p.description,onClick:()=>os("revenue")}];return e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:f.map((h,g)=>e.jsxs(B,{className:"overflow-hidden border-0 shadow-sm hover:shadow-md transition-all cursor-pointer hover:scale-105",onClick:h.onClick,children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2 bg-gradient-to-br from-primary/5 to-transparent",children:[e.jsx(se,{className:"text-sm",children:h.title}),e.jsx("div",{className:`p-2 rounded-lg ${g===0?"bg-primary/10 text-primary":g===1?"bg-accent/10 text-accent":g===2?"bg-secondary/10 text-secondary":"bg-accent/10 text-accent"}`,children:e.jsx(h.icon,{className:"h-5 w-5"})})]}),e.jsxs(V,{className:"pt-4",children:[e.jsx("div",{className:"text-3xl",children:h.value}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.description})]})]},h.title))})}function nm(t,s=[]){let r=[];function n(o,i){const l=u.createContext(i),d=r.length;r=[...r,i];const c=p=>{var y;const{scope:f,children:h,...g}=p,x=((y=f==null?void 0:f[t])==null?void 0:y[d])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:h})};c.displayName=o+"Provider";function m(p,f){var x;const h=((x=f==null?void 0:f[t])==null?void 0:x[d])||l,g=u.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[c,m]}const a=()=>{const o=r.map(i=>u.createContext(i));return function(l){const d=(l==null?void 0:l[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,am(a,...s)]}function am(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:d,scopeName:c})=>{const p=d(o)[`__scope${c}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}var om=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$a=om.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),wr="Progress",Cr=100,[im]=nm(wr),[lm,cm]=im(wr),za=u.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=dm,...i}=t;(a||a===0)&&!dn(a)&&console.error(um(`${a}`,"Progress"));const l=dn(a)?a:Cr;n!==null&&!un(n,l)&&console.error(mm(`${n}`,"Progress"));const d=un(n,l)?n:null,c=hs(d)?o(d,l):void 0;return e.jsx(lm,{scope:r,value:d,max:l,children:e.jsx($a.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":hs(d)?d:void 0,"aria-valuetext":c,role:"progressbar","data-state":Va(d,l),"data-value":d??void 0,"data-max":l,...i,ref:s})})});za.displayName=wr;var Wa="ProgressIndicator",Ba=u.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=cm(Wa,r);return e.jsx($a.div,{"data-state":Va(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});Ba.displayName=Wa;function dm(t,s){return`${Math.round(t/s*100)}%`}function Va(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function hs(t){return typeof t=="number"}function dn(t){return hs(t)&&!isNaN(t)&&t>0}function un(t,s){return hs(t)&&!isNaN(t)&&t<=s&&t>=0}function um(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Cr}\`.`}function mm(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Cr} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var hm=za,xm=Ba;function Kt({className:t,value:s,...r}){return e.jsx(hm,{"data-slot":"progress",className:W("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:e.jsx(xm,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function fm({projects:t,currentUser:s}){const n=s.role==="admin"?t:s.role==="supervisor"?t.filter(i=>i.supervisorId===s.id):t.filter(i=>i.fabricatorIds.includes(s.id)),a=i=>{switch(i){case"completed":return"default";case"in-progress":return"secondary";case"planning":return"outline";case"review":return"destructive";case"on-hold":return"destructive";default:return"outline"}},o=i=>{switch(i){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}};return e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Project Overview"})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(i=>e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm",children:i.name}),e.jsx(re,{variant:a(i.status),children:i.status}),e.jsx(re,{variant:o(i.priority),children:i.priority})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Kt,{value:i.progress,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-12",children:[i.progress,"%"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(i.endDate).toLocaleDateString()]})]})},i.id)),n.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No projects assigned to you"})]})})]})}function pm({tasks:t,projects:s,currentUser:r,onUpdateTaskStatus:n}){const o=(()=>{if(r.role==="admin")return t;if(r.role==="supervisor"){const h=s.filter(g=>g.supervisorId===r.id);return t.filter(g=>h.some(x=>x.id===g.projectId))}return t.filter(h=>h.assignedTo===r.id)})().slice(0,8),i=h=>{switch(h){case"completed":return e.jsx(ze,{className:"h-4 w-4 text-green-500"});case"in-progress":return e.jsx(Ut,{className:"h-4 w-4 text-blue-500"});case"blocked":return e.jsx(xt,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ut,{className:"h-4 w-4 text-gray-400"})}},l=h=>{switch(h){case"completed":return"default";case"in-progress":return"secondary";case"blocked":return"destructive";case"pending":return"outline";default:return"outline"}},d=h=>{switch(h){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},c=h=>{const g=s.find(x=>x.id===h);return(g==null?void 0:g.name)||"Unknown Project"},m=h=>r.role==="fabricator"&&h.assignedTo===r.id,p=h=>(r.role==="admin"||r.role==="supervisor")&&h.status!=="completed",f=h=>{switch(h){case"pending":return"in-progress";case"in-progress":return"completed";case"blocked":return"completed";case"completed":default:return"completed"}};return e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Recent Tasks"})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[o.map(h=>e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[i(h.status),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm",children:h.title}),e.jsx(re,{variant:l(h.status),children:h.status}),e.jsx(re,{variant:d(h.priority),children:h.priority})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c(h.projectId),"  Due:"," ",h.dueDate?new Date(h.dueDate).toLocaleDateString():"No due date"]})]})]}),n&&e.jsxs("div",{className:"flex gap-2",children:[m(h)&&h.status!=="completed"&&e.jsxs(T,{size:"sm",variant:"outline",onClick:()=>{n(h.id,f(h.status))},children:[h.status==="pending"&&"Start",h.status==="in-progress"&&"Complete",h.status==="blocked"&&"Complete"]}),p(h)&&e.jsxs(T,{size:"sm",variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>n(h.id,"completed"),children:[e.jsx(ze,{className:"h-3 w-3 mr-1"}),"Done"]})]})]},h.id)),o.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No tasks available"})]})})]})}function Ye({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:W("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function ie(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Re(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function Se(t,s){const r=ie(t);return isNaN(s)?Re(t,NaN):(s&&r.setDate(r.getDate()+s),r)}function Ve(t,s){const r=ie(t);if(isNaN(s))return Re(t,NaN);if(!s)return r;const n=r.getDate(),a=Re(t,r.getTime());a.setMonth(r.getMonth()+s+1,0);const o=a.getDate();return n>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const Sr=6048e5,gm=864e5;let vm={};function Zt(){return vm}function Ue(t,s){var l,d,c,m;const r=Zt(),n=(s==null?void 0:s.weekStartsOn)??((d=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.weekStartsOn)??0,a=ie(t),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function kt(t){return Ue(t,{weekStartsOn:1})}function qa(t){const s=ie(t),r=s.getFullYear(),n=Re(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=kt(n),o=Re(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=kt(o);return s.getTime()>=a.getTime()?r+1:s.getTime()>=i.getTime()?r:r-1}function Rt(t){const s=ie(t);return s.setHours(0,0,0,0),s}function xs(t){const s=ie(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function He(t,s){const r=Rt(t),n=Rt(s),a=+r-xs(r),o=+n-xs(n);return Math.round((a-o)/gm)}function jm(t){const s=qa(t),r=Re(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),kt(r)}function ar(t,s){const r=s*7;return Se(t,r)}function bm(t,s){return Ve(t,s*12)}function ym(t){let s;return t.forEach(function(r){const n=ie(r);(s===void 0||s<n||isNaN(Number(n)))&&(s=n)}),s||new Date(NaN)}function Nm(t){let s;return t.forEach(r=>{const n=ie(r);(!s||s>n||isNaN(+n))&&(s=n)}),s||new Date(NaN)}function ke(t,s){const r=Rt(t),n=Rt(s);return+r==+n}function kr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wm(t){if(!kr(t)&&typeof t!="number")return!1;const s=ie(t);return!isNaN(Number(s))}function Qt(t,s){const r=ie(t),n=ie(s),a=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return a*12+o}function Cm(t,s,r){const n=Ue(t,r),a=Ue(s,r),o=+n-xs(n),i=+a-xs(a);return Math.round((o-i)/Sr)}function Pr(t){const s=ie(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function Pe(t){const s=ie(t);return s.setDate(1),s.setHours(0,0,0,0),s}function Ha(t){const s=ie(t),r=Re(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Dr(t,s){var l,d,c,m;const r=Zt(),n=(s==null?void 0:s.weekStartsOn)??((d=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.weekStartsOn)??0,a=ie(t),o=a.getDay(),i=(o<n?-7:0)+6-(o-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function Ya(t){return Dr(t,{weekStartsOn:1})}const Sm={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},km=(t,s,r)=>{let n;const a=Sm[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Os(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Pm={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dm={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Am={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_m={date:Os({formats:Pm,defaultWidth:"full"}),time:Os({formats:Dm,defaultWidth:"full"}),dateTime:Os({formats:Am,defaultWidth:"full"})},Mm={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tm=(t,s,r,n)=>Mm[t];function Vt(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(s):s;return a[o]}}const Em={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Im={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rm={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Om={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$m=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},zm={ordinalNumber:$m,era:Vt({values:Em,defaultWidth:"wide"}),quarter:Vt({values:Im,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vt({values:Rm,defaultWidth:"wide"}),day:Vt({values:Om,defaultWidth:"wide"}),dayPeriod:Vt({values:Fm,defaultWidth:"wide",formattingValues:Lm,defaultFormattingWidth:"wide"})};function qt(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=s.match(a);if(!o)return null;const i=o[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?Bm(l,p=>p.test(i)):Wm(l,p=>p.test(i));let c;c=t.valueCallback?t.valueCallback(d):d,c=r.valueCallback?r.valueCallback(c):c;const m=s.slice(i.length);return{value:c,rest:m}}}function Wm(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Bm(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Vm(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],o=s.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=s.slice(a.length);return{value:i,rest:l}}}const qm=/^(\d+)(th|st|nd|rd)?/i,Hm=/\d+/i,Ym={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Um={any:[/^b/i,/^(a|c)/i]},Gm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xm={any:[/1/i,/2/i,/3/i,/4/i]},Km={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qm={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zm={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},th={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sh={ordinalNumber:Vm({matchPattern:qm,parsePattern:Hm,valueCallback:t=>parseInt(t,10)}),era:qt({matchPatterns:Ym,defaultMatchWidth:"wide",parsePatterns:Um,defaultParseWidth:"any"}),quarter:qt({matchPatterns:Gm,defaultMatchWidth:"wide",parsePatterns:Xm,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qt({matchPatterns:Km,defaultMatchWidth:"wide",parsePatterns:Qm,defaultParseWidth:"any"}),day:qt({matchPatterns:Jm,defaultMatchWidth:"wide",parsePatterns:Zm,defaultParseWidth:"any"}),dayPeriod:qt({matchPatterns:eh,defaultMatchWidth:"any",parsePatterns:th,defaultParseWidth:"any"})},Ua={code:"en-US",formatDistance:km,formatLong:_m,formatRelative:Tm,localize:zm,match:sh,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rh(t){const s=ie(t);return He(s,Ha(s))+1}function Ga(t){const s=ie(t),r=+kt(s)-+jm(s);return Math.round(r/Sr)+1}function Xa(t,s){var m,p,f,h;const r=ie(t),n=r.getFullYear(),a=Zt(),o=(s==null?void 0:s.firstWeekContainsDate)??((p=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=Re(t,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=Ue(i,s),d=Re(t,0);d.setFullYear(n,0,o),d.setHours(0,0,0,0);const c=Ue(d,s);return r.getTime()>=l.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function nh(t,s){var l,d,c,m;const r=Zt(),n=(s==null?void 0:s.firstWeekContainsDate)??((d=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.firstWeekContainsDate)??1,a=Xa(t,s),o=Re(t,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),Ue(o,s)}function Ka(t,s){const r=ie(t),n=+Ue(r,s)-+nh(r,s);return Math.round(n/Sr)+1}function le(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const ut={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return le(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):le(r+1,2)},d(t,s){return le(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return le(t.getHours()%12||12,s.length)},H(t,s){return le(t.getHours(),s.length)},m(t,s){return le(t.getMinutes(),s.length)},s(t,s){return le(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return le(a,s.length)}},_t={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mn={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ut.y(t,s)},Y:function(t,s,r,n){const a=Xa(t,n),o=a>0?a:1-a;if(s==="YY"){const i=o%100;return le(i,2)}return s==="Yo"?r.ordinalNumber(o,{unit:"year"}):le(o,s.length)},R:function(t,s){const r=qa(t);return le(r,s.length)},u:function(t,s){const r=t.getFullYear();return le(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return le(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return le(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return ut.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return le(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=Ka(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):le(a,s.length)},I:function(t,s,r){const n=Ga(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):le(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ut.d(t,s)},D:function(t,s,r){const n=rh(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):le(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return le(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return le(o,s.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return le(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=_t.noon:n===0?a=_t.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=_t.evening:n>=12?a=_t.afternoon:n>=4?a=_t.morning:a=_t.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ut.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ut.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):le(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):le(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ut.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ut.s(t,s)},S:function(t,s){return ut.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return xn(n);case"XXXX":case"XX":return Nt(n);case"XXXXX":case"XXX":default:return Nt(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return xn(n);case"xxxx":case"xx":return Nt(n);case"xxxxx":case"xxx":default:return Nt(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+hn(n,":");case"OOOO":default:return"GMT"+Nt(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+hn(n,":");case"zzzz":default:return"GMT"+Nt(n,":")}},t:function(t,s,r){const n=Math.trunc(t.getTime()/1e3);return le(n,s.length)},T:function(t,s,r){const n=t.getTime();return le(n,s.length)}};function hn(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),o=n%60;return o===0?r+String(a):r+String(a)+s+le(o,2)}function xn(t,s){return t%60===0?(t>0?"-":"+")+le(Math.abs(t)/60,2):Nt(t,s)}function Nt(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=le(Math.trunc(n/60),2),o=le(n%60,2);return r+a+s+o}const fn=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Qa=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},ah=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return fn(t,s);let o;switch(n){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;case"PPPP":default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",fn(n,s)).replace("{{time}}",Qa(a,s))},oh={p:Qa,P:ah},ih=/^D+$/,lh=/^Y+$/,ch=["D","DD","YY","YYYY"];function dh(t){return ih.test(t)}function uh(t){return lh.test(t)}function mh(t,s,r){const n=hh(t,s,r);if(console.warn(n),ch.includes(t))throw new RangeError(n)}function hh(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ph=/^'([^]*?)'?$/,gh=/''/g,vh=/[a-zA-Z]/;function nt(t,s,r){var m,p,f,h,g,x,v,y;const n=Zt(),a=(r==null?void 0:r.locale)??n.locale??Ua,o=(r==null?void 0:r.firstWeekContainsDate)??((p=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((x=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(v=n.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,l=ie(t);if(!wm(l))throw new RangeError("Invalid time value");let d=s.match(fh).map(j=>{const D=j[0];if(D==="p"||D==="P"){const N=oh[D];return N(j,a.formatLong)}return j}).join("").match(xh).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const D=j[0];if(D==="'")return{isToken:!1,value:jh(j)};if(mn[D])return{isToken:!0,value:j};if(D.match(vh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(d=a.localize.preprocessor(l,d));const c={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return d.map(j=>{if(!j.isToken)return j.value;const D=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&uh(D)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&dh(D))&&mh(D,s,String(t));const N=mn[D[0]];return N(l,D,a.localize,c)}).join("")}function jh(t){const s=t.match(ph);return s?s[1].replace(gh,"'"):t}function bh(t){const s=ie(t),r=s.getFullYear(),n=s.getMonth(),a=Re(t,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function yh(t){return Math.trunc(+ie(t)/1e3)}function Nh(t){const s=ie(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(0,0,0,0),s}function wh(t,s){return Cm(Nh(t),Pe(t),s)+1}function or(t,s){const r=ie(t),n=ie(s);return r.getTime()>n.getTime()}function Ja(t,s){const r=ie(t),n=ie(s);return+r<+n}function Ar(t,s){const r=ie(t),n=ie(s);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Ch(t,s){const r=ie(t),n=ie(s);return r.getFullYear()===n.getFullYear()}function Fs(t,s){return Se(t,-s)}function Ls(t,s){const r=ie(t),n=r.getFullYear(),a=r.getDate(),o=Re(t,0);o.setFullYear(n,s,15),o.setHours(0,0,0,0);const i=bh(o);return r.setMonth(s,Math.min(a,i)),r}function pn(t,s){const r=ie(t);return isNaN(+r)?Re(t,NaN):(r.setFullYear(s),r)}var J=function(){return J=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},J.apply(this,arguments)};function Sh(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Za(t,s,r){for(var n=0,a=s.length,o;n<a;n++)(o||!(n in s))&&(o||(o=Array.prototype.slice.call(s,0,n)),o[n]=s[n]);return t.concat(o||Array.prototype.slice.call(s))}function es(t){return t.mode==="multiple"}function ts(t){return t.mode==="range"}function Ds(t){return t.mode==="single"}var kh={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ph(t,s){return nt(t,"LLLL y",s)}function Dh(t,s){return nt(t,"d",s)}function Ah(t,s){return nt(t,"LLLL",s)}function _h(t){return"".concat(t)}function Mh(t,s){return nt(t,"cccccc",s)}function Th(t,s){return nt(t,"yyyy",s)}var Eh=Object.freeze({__proto__:null,formatCaption:Ph,formatDay:Dh,formatMonthCaption:Ah,formatWeekNumber:_h,formatWeekdayName:Mh,formatYearCaption:Th}),Ih=function(t,s,r){return nt(t,"do MMMM (EEEE)",r)},Rh=function(){return"Month: "},Oh=function(){return"Go to next month"},Fh=function(){return"Go to previous month"},Lh=function(t,s){return nt(t,"cccc",s)},$h=function(t){return"Week n. ".concat(t)},zh=function(){return"Year: "},Wh=Object.freeze({__proto__:null,labelDay:Ih,labelMonthDropdown:Rh,labelNext:Oh,labelPrevious:Fh,labelWeekNumber:$h,labelWeekday:Lh,labelYearDropdown:zh});function Bh(){var t="buttons",s=kh,r=Ua,n={},a={},o=1,i={},l=new Date;return{captionLayout:t,classNames:s,formatters:Eh,labels:Wh,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function Vh(t){var s=t.fromYear,r=t.toYear,n=t.fromMonth,a=t.toMonth,o=t.fromDate,i=t.toDate;return n?o=Pe(n):s&&(o=new Date(s,0,1)),a?i=Pr(a):r&&(i=new Date(r,11,31)),{fromDate:o?Rt(o):void 0,toDate:i?Rt(i):void 0}}var eo=u.createContext(void 0);function qh(t){var s,r=t.initialProps,n=Bh(),a=Vh(r),o=a.fromDate,i=a.toDate,l=(s=r.captionLayout)!==null&&s!==void 0?s:n.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var d;(Ds(r)||es(r)||ts(r))&&(d=r.onSelect);var c=J(J(J({},n),r),{captionLayout:l,classNames:J(J({},n.classNames),r.classNames),components:J({},r.components),formatters:J(J({},n.formatters),r.formatters),fromDate:o,labels:J(J({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:J(J({},n.modifiers),r.modifiers),modifiersClassNames:J(J({},n.modifiersClassNames),r.modifiersClassNames),onSelect:d,styles:J(J({},n.styles),r.styles),toDate:i});return e.jsx(eo.Provider,{value:c,children:t.children})}function fe(){var t=u.useContext(eo);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function to(t){var s=fe(),r=s.locale,n=s.classNames,a=s.styles,o=s.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:r})})}function Hh(t){return e.jsx("svg",J({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function so(t){var s,r,n=t.onChange,a=t.value,o=t.children,i=t.caption,l=t.className,d=t.style,c=fe(),m=(r=(s=c.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:Hh;return e.jsxs("div",{className:l,style:d,children:[e.jsx("span",{className:c.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:a,onChange:n,children:o}),e.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,e.jsx(m,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function Yh(t){var s,r=fe(),n=r.fromDate,a=r.toDate,o=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,d=r.classNames,c=r.components,m=r.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var p=[];if(Ch(n,a))for(var f=Pe(n),h=n.getMonth();h<=a.getMonth();h++)p.push(Ls(f,h));else for(var f=Pe(new Date),h=0;h<=11;h++)p.push(Ls(f,h));var g=function(v){var y=Number(v.target.value),j=Ls(Pe(t.displayMonth),y);t.onChange(j)},x=(s=c==null?void 0:c.Dropdown)!==null&&s!==void 0?s:so;return e.jsx(x,{name:"months","aria-label":m(),className:d.dropdown_month,style:o.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:p.map(function(v){return e.jsx("option",{value:v.getMonth(),children:l(v,{locale:i})},v.getMonth())})})}function Uh(t){var s,r=t.displayMonth,n=fe(),a=n.fromDate,o=n.toDate,i=n.locale,l=n.styles,d=n.classNames,c=n.components,m=n.formatters.formatYearCaption,p=n.labels.labelYearDropdown,f=[];if(!a)return e.jsx(e.Fragment,{});if(!o)return e.jsx(e.Fragment,{});for(var h=a.getFullYear(),g=o.getFullYear(),x=h;x<=g;x++)f.push(pn(Ha(new Date),x));var v=function(j){var D=pn(Pe(r),Number(j.target.value));t.onChange(D)},y=(s=c==null?void 0:c.Dropdown)!==null&&s!==void 0?s:so;return e.jsx(y,{name:"years","aria-label":p(),className:d.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:m(r,{locale:i}),children:f.map(function(j){return e.jsx("option",{value:j.getFullYear(),children:m(j,{locale:i})},j.getFullYear())})})}function Gh(t,s){var r=u.useState(t),n=r[0],a=r[1],o=s===void 0?n:s;return[o,a]}function Xh(t){var s=t.month,r=t.defaultMonth,n=t.today,a=s||r||n||new Date,o=t.toDate,i=t.fromDate,l=t.numberOfMonths,d=l===void 0?1:l;if(o&&Qt(o,a)<0){var c=-1*(d-1);a=Ve(o,c)}return i&&Qt(a,i)<0&&(a=i),Pe(a)}function Kh(){var t=fe(),s=Xh(t),r=Gh(s,t.month),n=r[0],a=r[1],o=function(i){var l;if(!t.disableNavigation){var d=Pe(i);a(d),(l=t.onMonthChange)===null||l===void 0||l.call(t,d)}};return[n,o]}function Qh(t,s){for(var r=s.reverseMonths,n=s.numberOfMonths,a=Pe(t),o=Pe(Ve(a,n)),i=Qt(o,a),l=[],d=0;d<i;d++){var c=Ve(a,d);l.push(c)}return r&&(l=l.reverse()),l}function Jh(t,s){if(!s.disableNavigation){var r=s.toDate,n=s.pagedNavigation,a=s.numberOfMonths,o=a===void 0?1:a,i=n?o:1,l=Pe(t);if(!r)return Ve(l,i);var d=Qt(r,t);if(!(d<o))return Ve(l,i)}}function Zh(t,s){if(!s.disableNavigation){var r=s.fromDate,n=s.pagedNavigation,a=s.numberOfMonths,o=a===void 0?1:a,i=n?o:1,l=Pe(t);if(!r)return Ve(l,-i);var d=Qt(l,r);if(!(d<=0))return Ve(l,-i)}}var ro=u.createContext(void 0);function ex(t){var s=fe(),r=Kh(),n=r[0],a=r[1],o=Qh(n,s),i=Jh(n,s),l=Zh(n,s),d=function(p){return o.some(function(f){return Ar(p,f)})},c=function(p,f){d(p)||(f&&Ja(p,f)?a(Ve(p,1+s.numberOfMonths*-1)):a(p))},m={currentMonth:n,displayMonths:o,goToMonth:a,goToDate:c,previousMonth:l,nextMonth:i,isDateDisplayed:d};return e.jsx(ro.Provider,{value:m,children:t.children})}function ss(){var t=u.useContext(ro);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function gn(t){var s,r=fe(),n=r.classNames,a=r.styles,o=r.components,i=ss().goToMonth,l=function(m){i(Ve(m,t.displayIndex?-t.displayIndex:0))},d=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:to,c=e.jsx(d,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:c}),e.jsx(Yh,{onChange:l,displayMonth:t.displayMonth}),e.jsx(Uh,{onChange:l,displayMonth:t.displayMonth})]})}function tx(t){return e.jsx("svg",J({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function sx(t){return e.jsx("svg",J({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var fs=u.forwardRef(function(t,s){var r=fe(),n=r.classNames,a=r.styles,o=[n.button_reset,n.button];t.className&&o.push(t.className);var i=o.join(" "),l=J(J({},a.button_reset),a.button);return t.style&&Object.assign(l,t.style),e.jsx("button",J({},t,{ref:s,type:"button",className:i,style:l}))});function rx(t){var s,r,n=fe(),a=n.dir,o=n.locale,i=n.classNames,l=n.styles,d=n.labels,c=d.labelPrevious,m=d.labelNext,p=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var f=c(t.previousMonth,{locale:o}),h=[i.nav_button,i.nav_button_previous].join(" "),g=m(t.nextMonth,{locale:o}),x=[i.nav_button,i.nav_button_next].join(" "),v=(s=p==null?void 0:p.IconRight)!==null&&s!==void 0?s:sx,y=(r=p==null?void 0:p.IconLeft)!==null&&r!==void 0?r:tx;return e.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&e.jsx(fs,{name:"previous-month","aria-label":f,className:h,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(v,{className:i.nav_icon,style:l.nav_icon}):e.jsx(y,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&e.jsx(fs,{name:"next-month","aria-label":g,className:x,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(y,{className:i.nav_icon,style:l.nav_icon}):e.jsx(v,{className:i.nav_icon,style:l.nav_icon})})]})}function vn(t){var s=fe().numberOfMonths,r=ss(),n=r.previousMonth,a=r.nextMonth,o=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(g){return Ar(t.displayMonth,g)}),d=l===0,c=l===i.length-1,m=s>1&&(d||!c),p=s>1&&(c||!d),f=function(){n&&o(n)},h=function(){a&&o(a)};return e.jsx(rx,{displayMonth:t.displayMonth,hideNext:m,hidePrevious:p,nextMonth:a,previousMonth:n,onPreviousClick:f,onNextClick:h})}function nx(t){var s,r=fe(),n=r.classNames,a=r.disableNavigation,o=r.styles,i=r.captionLayout,l=r.components,d=(s=l==null?void 0:l.CaptionLabel)!==null&&s!==void 0?s:to,c;return a?c=e.jsx(d,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?c=e.jsx(gn,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?c=e.jsxs(e.Fragment,{children:[e.jsx(gn,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(vn,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):c=e.jsxs(e.Fragment,{children:[e.jsx(d,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(vn,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:o.caption,children:c})}function ax(t){var s=fe(),r=s.footer,n=s.styles,a=s.classNames.tfoot;return r?e.jsx("tfoot",{className:a,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function ox(t,s,r){for(var n=r?kt(new Date):Ue(new Date,{locale:t,weekStartsOn:s}),a=[],o=0;o<7;o++){var i=Se(n,o);a.push(i)}return a}function ix(){var t=fe(),s=t.classNames,r=t.styles,n=t.showWeekNumber,a=t.locale,o=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,d=t.labels.labelWeekday,c=ox(a,o,i);return e.jsxs("tr",{style:r.head_row,className:s.head_row,children:[n&&e.jsx("td",{style:r.head_cell,className:s.head_cell}),c.map(function(m,p){return e.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":d(m,{locale:a}),children:l(m,{locale:a})},p)})]})}function lx(){var t,s=fe(),r=s.classNames,n=s.styles,a=s.components,o=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:ix;return e.jsx("thead",{style:n.head,className:r.head,children:e.jsx(o,{})})}function cx(t){var s=fe(),r=s.locale,n=s.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:r})})}var _r=u.createContext(void 0);function dx(t){if(!es(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(_r.Provider,{value:s,children:t.children})}return e.jsx(ux,{initialProps:t.initialProps,children:t.children})}function ux(t){var s=t.initialProps,r=t.children,n=s.selected,a=s.min,o=s.max,i=function(c,m,p){var f,h;(f=s.onDayClick)===null||f===void 0||f.call(s,c,m,p);var g=!!(m.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var x=!!(!m.selected&&o&&(n==null?void 0:n.length)===o);if(!x){var v=n?Za([],n):[];if(m.selected){var y=v.findIndex(function(j){return ke(c,j)});v.splice(y,1)}else v.push(c);(h=s.onSelect)===null||h===void 0||h.call(s,v,c,m,p)}}},l={disabled:[]};n&&l.disabled.push(function(c){var m=o&&n.length>o-1,p=n.some(function(f){return ke(f,c)});return!!(m&&!p)});var d={selected:n,onDayClick:i,modifiers:l};return e.jsx(_r.Provider,{value:d,children:r})}function Mr(){var t=u.useContext(_r);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function mx(t,s){var r=s||{},n=r.from,a=r.to;return n&&a?ke(a,t)&&ke(n,t)?void 0:ke(a,t)?{from:a,to:void 0}:ke(n,t)?void 0:or(n,t)?{from:t,to:a}:{from:n,to:t}:a?or(t,a)?{from:a,to:t}:{from:t,to:a}:n?Ja(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Tr=u.createContext(void 0);function hx(t){if(!ts(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Tr.Provider,{value:s,children:t.children})}return e.jsx(xx,{initialProps:t.initialProps,children:t.children})}function xx(t){var s=t.initialProps,r=t.children,n=s.selected,a=n||{},o=a.from,i=a.to,l=s.min,d=s.max,c=function(h,g,x){var v,y;(v=s.onDayClick)===null||v===void 0||v.call(s,h,g,x);var j=mx(h,n);(y=s.onSelect)===null||y===void 0||y.call(s,j,h,g,x)},m={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(m.range_start=[o],i?(m.range_end=[i],ke(o,i)||(m.range_middle=[{after:o,before:i}])):m.range_end=[o]):i&&(m.range_start=[i],m.range_end=[i]),l&&(o&&!i&&m.disabled.push({after:Fs(o,l-1),before:Se(o,l-1)}),o&&i&&m.disabled.push({after:o,before:Se(o,l-1)}),!o&&i&&m.disabled.push({after:Fs(i,l-1),before:Se(i,l-1)})),d){if(o&&!i&&(m.disabled.push({before:Se(o,-d+1)}),m.disabled.push({after:Se(o,d-1)})),o&&i){var p=He(i,o)+1,f=d-p;m.disabled.push({before:Fs(o,f)}),m.disabled.push({after:Se(i,f)})}!o&&i&&(m.disabled.push({before:Se(i,-d+1)}),m.disabled.push({after:Se(i,d-1)}))}return e.jsx(Tr.Provider,{value:{selected:n,onDayClick:c,modifiers:m},children:r})}function Er(){var t=u.useContext(Tr);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function us(t){return Array.isArray(t)?Za([],t):t!==void 0?[t]:[]}function fx(t){var s={};return Object.entries(t).forEach(function(r){var n=r[0],a=r[1];s[n]=us(a)}),s}var qe;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(qe||(qe={}));var px=qe.Selected,Qe=qe.Disabled,gx=qe.Hidden,vx=qe.Today,$s=qe.RangeEnd,zs=qe.RangeMiddle,Ws=qe.RangeStart,jx=qe.Outside;function bx(t,s,r){var n,a=(n={},n[px]=us(t.selected),n[Qe]=us(t.disabled),n[gx]=us(t.hidden),n[vx]=[t.today],n[$s]=[],n[zs]=[],n[Ws]=[],n[jx]=[],n);return t.fromDate&&a[Qe].push({before:t.fromDate}),t.toDate&&a[Qe].push({after:t.toDate}),es(t)?a[Qe]=a[Qe].concat(s.modifiers[Qe]):ts(t)&&(a[Qe]=a[Qe].concat(r.modifiers[Qe]),a[Ws]=r.modifiers[Ws],a[zs]=r.modifiers[zs],a[$s]=r.modifiers[$s]),a}var no=u.createContext(void 0);function yx(t){var s=fe(),r=Mr(),n=Er(),a=bx(s,r,n),o=fx(s.modifiers),i=J(J({},a),o);return e.jsx(no.Provider,{value:i,children:t.children})}function ao(){var t=u.useContext(no);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Nx(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function wx(t){return!!(t&&typeof t=="object"&&"from"in t)}function Cx(t){return!!(t&&typeof t=="object"&&"after"in t)}function Sx(t){return!!(t&&typeof t=="object"&&"before"in t)}function kx(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Px(t,s){var r,n=s.from,a=s.to;if(n&&a){var o=He(a,n)<0;o&&(r=[a,n],n=r[0],a=r[1]);var i=He(t,n)>=0&&He(a,t)>=0;return i}return a?ke(a,t):n?ke(n,t):!1}function Dx(t){return kr(t)}function Ax(t){return Array.isArray(t)&&t.every(kr)}function _x(t,s){return s.some(function(r){if(typeof r=="boolean")return r;if(Dx(r))return ke(t,r);if(Ax(r))return r.includes(t);if(wx(r))return Px(t,r);if(kx(r))return r.dayOfWeek.includes(t.getDay());if(Nx(r)){var n=He(r.before,t),a=He(r.after,t),o=n>0,i=a<0,l=or(r.before,r.after);return l?i&&o:o||i}return Cx(r)?He(t,r.after)>0:Sx(r)?He(r.before,t)>0:typeof r=="function"?r(t):!1})}function Ir(t,s,r){var n=Object.keys(s).reduce(function(o,i){var l=s[i];return _x(t,l)&&o.push(i),o},[]),a={};return n.forEach(function(o){return a[o]=!0}),r&&!Ar(t,r)&&(a.outside=!0),a}function Mx(t,s){for(var r=Pe(t[0]),n=Pr(t[t.length-1]),a,o,i=r;i<=n;){var l=Ir(i,s),d=!l.disabled&&!l.hidden;if(!d){i=Se(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=Se(i,1)}return o||a}var Tx=365;function oo(t,s){var r=s.moveBy,n=s.direction,a=s.context,o=s.modifiers,i=s.retry,l=i===void 0?{count:0,lastFocused:t}:i,d=a.weekStartsOn,c=a.fromDate,m=a.toDate,p=a.locale,f={day:Se,week:ar,month:Ve,year:bm,startOfWeek:function(v){return a.ISOWeek?kt(v):Ue(v,{locale:p,weekStartsOn:d})},endOfWeek:function(v){return a.ISOWeek?Ya(v):Dr(v,{locale:p,weekStartsOn:d})}},h=f[r](t,n==="after"?1:-1);n==="before"&&c?h=ym([c,h]):n==="after"&&m&&(h=Nm([m,h]));var g=!0;if(o){var x=Ir(h,o);g=!x.disabled&&!x.hidden}return g?h:l.count>Tx?l.lastFocused:oo(h,{moveBy:r,direction:n,context:a,modifiers:o,retry:J(J({},l),{count:l.count+1})})}var io=u.createContext(void 0);function Ex(t){var s=ss(),r=ao(),n=u.useState(),a=n[0],o=n[1],i=u.useState(),l=i[0],d=i[1],c=Mx(s.displayMonths,r),m=a??(l&&s.isDateDisplayed(l))?l:c,p=function(){d(a),o(void 0)},f=function(v){o(v)},h=fe(),g=function(v,y){if(a){var j=oo(a,{moveBy:v,direction:y,context:h,modifiers:r});ke(a,j)||(s.goToDate(j,a),f(j))}},x={focusedDay:a,focusTarget:m,blur:p,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return e.jsx(io.Provider,{value:x,children:t.children})}function Rr(){var t=u.useContext(io);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Ix(t,s){var r=ao(),n=Ir(t,r,s);return n}var Or=u.createContext(void 0);function Rx(t){if(!Ds(t.initialProps)){var s={selected:void 0};return e.jsx(Or.Provider,{value:s,children:t.children})}return e.jsx(Ox,{initialProps:t.initialProps,children:t.children})}function Ox(t){var s=t.initialProps,r=t.children,n=function(o,i,l){var d,c,m;if((d=s.onDayClick)===null||d===void 0||d.call(s,o,i,l),i.selected&&!s.required){(c=s.onSelect)===null||c===void 0||c.call(s,void 0,o,i,l);return}(m=s.onSelect)===null||m===void 0||m.call(s,o,o,i,l)},a={selected:s.selected,onDayClick:n};return e.jsx(Or.Provider,{value:a,children:r})}function lo(){var t=u.useContext(Or);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Fx(t,s){var r=fe(),n=lo(),a=Mr(),o=Er(),i=Rr(),l=i.focusDayAfter,d=i.focusDayBefore,c=i.focusWeekAfter,m=i.focusWeekBefore,p=i.blur,f=i.focus,h=i.focusMonthBefore,g=i.focusMonthAfter,x=i.focusYearBefore,v=i.focusYearAfter,y=i.focusStartOfWeek,j=i.focusEndOfWeek,D=function(R){var I,oe,je,G;Ds(r)?(I=n.onDayClick)===null||I===void 0||I.call(n,t,s,R):es(r)?(oe=a.onDayClick)===null||oe===void 0||oe.call(a,t,s,R):ts(r)?(je=o.onDayClick)===null||je===void 0||je.call(o,t,s,R):(G=r.onDayClick)===null||G===void 0||G.call(r,t,s,R)},N=function(R){var I;f(t),(I=r.onDayFocus)===null||I===void 0||I.call(r,t,s,R)},M=function(R){var I;p(),(I=r.onDayBlur)===null||I===void 0||I.call(r,t,s,R)},w=function(R){var I;(I=r.onDayMouseEnter)===null||I===void 0||I.call(r,t,s,R)},A=function(R){var I;(I=r.onDayMouseLeave)===null||I===void 0||I.call(r,t,s,R)},C=function(R){var I;(I=r.onDayPointerEnter)===null||I===void 0||I.call(r,t,s,R)},F=function(R){var I;(I=r.onDayPointerLeave)===null||I===void 0||I.call(r,t,s,R)},b=function(R){var I;(I=r.onDayTouchCancel)===null||I===void 0||I.call(r,t,s,R)},L=function(R){var I;(I=r.onDayTouchEnd)===null||I===void 0||I.call(r,t,s,R)},P=function(R){var I;(I=r.onDayTouchMove)===null||I===void 0||I.call(r,t,s,R)},O=function(R){var I;(I=r.onDayTouchStart)===null||I===void 0||I.call(r,t,s,R)},k=function(R){var I;(I=r.onDayKeyUp)===null||I===void 0||I.call(r,t,s,R)},Y=function(R){var I;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?l():d();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?d():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),c();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),m();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?x():h();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?v():g();break;case"Home":R.preventDefault(),R.stopPropagation(),y();break;case"End":R.preventDefault(),R.stopPropagation(),j();break}(I=r.onDayKeyDown)===null||I===void 0||I.call(r,t,s,R)},S={onClick:D,onFocus:N,onBlur:M,onKeyDown:Y,onKeyUp:k,onMouseEnter:w,onMouseLeave:A,onPointerEnter:C,onPointerLeave:F,onTouchCancel:b,onTouchEnd:L,onTouchMove:P,onTouchStart:O};return S}function Lx(){var t=fe(),s=lo(),r=Mr(),n=Er(),a=Ds(t)?s.selected:es(t)?r.selected:ts(t)?n.selected:void 0;return a}function $x(t){return Object.values(qe).includes(t)}function zx(t,s){var r=[t.classNames.day];return Object.keys(s).forEach(function(n){var a=t.modifiersClassNames[n];if(a)r.push(a);else if($x(n)){var o=t.classNames["day_".concat(n)];o&&r.push(o)}}),r}function Wx(t,s){var r=J({},t.styles.day);return Object.keys(s).forEach(function(n){var a;r=J(J({},r),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function Bx(t,s,r){var n,a,o,i=fe(),l=Rr(),d=Ix(t,s),c=Fx(t,d),m=Lx(),p=!!(i.onDayClick||i.mode!=="default");u.useEffect(function(){var w;d.outside||l.focusedDay&&p&&ke(l.focusedDay,t)&&((w=r.current)===null||w===void 0||w.focus())},[l.focusedDay,t,r,p,d.outside]);var f=zx(i,d).join(" "),h=Wx(i,d),g=!!(d.outside&&!i.showOutsideDays||d.hidden),x=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:cx,v=e.jsx(x,{date:t,displayMonth:s,activeModifiers:d}),y={style:h,className:f,children:v,role:"gridcell"},j=l.focusTarget&&ke(l.focusTarget,t)&&!d.outside,D=l.focusedDay&&ke(l.focusedDay,t),N=J(J(J({},y),(n={disabled:d.disabled,role:"gridcell"},n["aria-selected"]=d.selected,n.tabIndex=D||j?0:-1,n)),c),M={isButton:p,isHidden:g,activeModifiers:d,selectedDays:m,buttonProps:N,divProps:y};return M}function Vx(t){var s=u.useRef(null),r=Bx(t.date,t.displayMonth,s);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(fs,J({name:"day",ref:s},r.buttonProps)):e.jsx("div",J({},r.divProps))}function qx(t){var s=t.number,r=t.dates,n=fe(),a=n.onWeekNumberClick,o=n.styles,i=n.classNames,l=n.locale,d=n.labels.labelWeekNumber,c=n.formatters.formatWeekNumber,m=c(Number(s),{locale:l});if(!a)return e.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:m});var p=d(Number(s),{locale:l}),f=function(h){a(s,r,h)};return e.jsx(fs,{name:"week-number","aria-label":p,className:i.weeknumber,style:o.weeknumber,onClick:f,children:m})}function Hx(t){var s,r,n=fe(),a=n.styles,o=n.classNames,i=n.showWeekNumber,l=n.components,d=(s=l==null?void 0:l.Day)!==null&&s!==void 0?s:Vx,c=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:qx,m;return i&&(m=e.jsx("td",{className:o.cell,style:a.cell,children:e.jsx(c,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:o.row,style:a.row,children:[m,t.dates.map(function(p){return e.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:e.jsx(d,{displayMonth:t.displayMonth,date:p})},yh(p))})]})}function jn(t,s,r){for(var n=r!=null&&r.ISOWeek?Ya(s):Dr(s,r),a=r!=null&&r.ISOWeek?kt(t):Ue(t,r),o=He(n,a),i=[],l=0;l<=o;l++)i.push(Se(a,l));var d=i.reduce(function(c,m){var p=r!=null&&r.ISOWeek?Ga(m):Ka(m,r),f=c.find(function(h){return h.weekNumber===p});return f?(f.dates.push(m),c):(c.push({weekNumber:p,dates:[m]}),c)},[]);return d}function Yx(t,s){var r=jn(Pe(t),Pr(t),s);if(s!=null&&s.useFixedWeeks){var n=wh(t,s);if(n<6){var a=r[r.length-1],o=a.dates[a.dates.length-1],i=ar(o,6-n),l=jn(ar(o,1),i,s);r.push.apply(r,l)}}return r}function Ux(t){var s,r,n,a=fe(),o=a.locale,i=a.classNames,l=a.styles,d=a.hideHead,c=a.fixedWeeks,m=a.components,p=a.weekStartsOn,f=a.firstWeekContainsDate,h=a.ISOWeek,g=Yx(t.displayMonth,{useFixedWeeks:!!c,ISOWeek:h,locale:o,weekStartsOn:p,firstWeekContainsDate:f}),x=(s=m==null?void 0:m.Head)!==null&&s!==void 0?s:lx,v=(r=m==null?void 0:m.Row)!==null&&r!==void 0?r:Hx,y=(n=m==null?void 0:m.Footer)!==null&&n!==void 0?n:ax;return e.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!d&&e.jsx(x,{}),e.jsx("tbody",{className:i.tbody,style:l.tbody,children:g.map(function(j){return e.jsx(v,{displayMonth:t.displayMonth,dates:j.dates,weekNumber:j.weekNumber},j.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}function Gx(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Xx=Gx()?u.useLayoutEffect:u.useEffect,Bs=!1,Kx=0;function bn(){return"react-day-picker-".concat(++Kx)}function Qx(t){var s,r=t??(Bs?bn():null),n=u.useState(r),a=n[0],o=n[1];return Xx(function(){a===null&&o(bn())},[]),u.useEffect(function(){Bs===!1&&(Bs=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function Jx(t){var s,r,n=fe(),a=n.dir,o=n.classNames,i=n.styles,l=n.components,d=ss().displayMonths,c=Qx(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),m=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,p=[o.month],f=i.month,h=t.displayIndex===0,g=t.displayIndex===d.length-1,x=!h&&!g;a==="rtl"&&(s=[h,g],g=s[0],h=s[1]),h&&(p.push(o.caption_start),f=J(J({},f),i.caption_start)),g&&(p.push(o.caption_end),f=J(J({},f),i.caption_end)),x&&(p.push(o.caption_between),f=J(J({},f),i.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:nx;return e.jsxs("div",{className:p.join(" "),style:f,children:[e.jsx(v,{id:c,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Ux,{id:m,"aria-labelledby":c,displayMonth:t.displayMonth})]},t.displayIndex)}function Zx(t){var s=fe(),r=s.classNames,n=s.styles;return e.jsx("div",{className:r.months,style:n.months,children:t.children})}function ef(t){var s,r,n=t.initialProps,a=fe(),o=Rr(),i=ss(),l=u.useState(!1),d=l[0],c=l[1];u.useEffect(function(){a.initialFocus&&o.focusTarget&&(d||(o.focus(o.focusTarget),c(!0)))},[a.initialFocus,d,o.focus,o.focusTarget,o]);var m=[a.classNames.root,a.className];a.numberOfMonths>1&&m.push(a.classNames.multiple_months),a.showWeekNumber&&m.push(a.classNames.with_weeknumber);var p=J(J({},a.styles.root),a.style),f=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,x){var v;return J(J({},g),(v={},v[x]=n[x],v))},{}),h=(r=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:Zx;return e.jsx("div",J({className:m.join(" "),style:p,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:e.jsx(h,{children:i.displayMonths.map(function(g,x){return e.jsx(Jx,{displayIndex:x,displayMonth:g},x)})})}))}function tf(t){var s=t.children,r=Sh(t,["children"]);return e.jsx(qh,{initialProps:r,children:e.jsx(ex,{children:e.jsx(Rx,{initialProps:r,children:e.jsx(dx,{initialProps:r,children:e.jsx(hx,{initialProps:r,children:e.jsx(yx,{children:e.jsx(Ex,{children:s})})})})})})})}function sf(t){return e.jsx(tf,J({},t,{children:e.jsx(ef,{initialProps:t})}))}function yn({className:t,classNames:s,showOutsideDays:r=!0,...n}){return e.jsx(sf,{showOutsideDays:r,className:W("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:W(Ht({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:W("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:W(Ht({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({className:a,...o})=>e.jsx(Ql,{className:W("size-4",a),...o}),IconRight:({className:a,...o})=>e.jsx(Zl,{className:W("size-4",a),...o})},...n})}function ft(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function Nn(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function rf(...t){return s=>{let r=!1;const n=t.map(a=>{const o=Nn(a,s);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():Nn(t[a],null)}}}}function vt(...t){return u.useCallback(rf(...t),t)}function co(t,s=[]){let r=[];function n(o,i){const l=u.createContext(i),d=r.length;r=[...r,i];const c=p=>{var y;const{scope:f,children:h,...g}=p,x=((y=f==null?void 0:f[t])==null?void 0:y[d])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:h})};c.displayName=o+"Provider";function m(p,f){var x;const h=((x=f==null?void 0:f[t])==null?void 0:x[d])||l,g=u.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[c,m]}const a=()=>{const o=r.map(i=>u.createContext(i));return function(l){const d=(l==null?void 0:l[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,nf(a,...s)]}function nf(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:d,scopeName:c})=>{const p=d(o)[`__scope${c}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}var af=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],at=af.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function of(t,s){t&&mr.flushSync(()=>t.dispatchEvent(s))}function pt(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function lf(t,s=globalThis==null?void 0:globalThis.document){const r=pt(t);u.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var cf="DismissableLayer",ir="dismissableLayer.update",df="dismissableLayer.pointerDownOutside",uf="dismissableLayer.focusOutside",wn,uo=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mo=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...d}=t,c=u.useContext(uo),[m,p]=u.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=u.useState({}),g=vt(s,A=>p(A)),x=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),j=m?x.indexOf(m):-1,D=c.layersWithOutsidePointerEventsDisabled.size>0,N=j>=y,M=xf(A=>{const C=A.target,F=[...c.branches].some(b=>b.contains(C));!N||F||(a==null||a(A),i==null||i(A),A.defaultPrevented||l==null||l())},f),w=ff(A=>{const C=A.target;[...c.branches].some(b=>b.contains(C))||(o==null||o(A),i==null||i(A),A.defaultPrevented||l==null||l())},f);return lf(A=>{j===c.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),u.useEffect(()=>{if(m)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wn=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(m)),c.layers.add(m),Cn(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=wn)}},[m,f,r,c]),u.useEffect(()=>()=>{m&&(c.layers.delete(m),c.layersWithOutsidePointerEventsDisabled.delete(m),Cn())},[m,c]),u.useEffect(()=>{const A=()=>h({});return document.addEventListener(ir,A),()=>document.removeEventListener(ir,A)},[]),e.jsx(at.div,{...d,ref:g,style:{pointerEvents:D?N?"auto":"none":void 0,...t.style},onFocusCapture:ft(t.onFocusCapture,w.onFocusCapture),onBlurCapture:ft(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:ft(t.onPointerDownCapture,M.onPointerDownCapture)})});mo.displayName=cf;var mf="DismissableLayerBranch",hf=u.forwardRef((t,s)=>{const r=u.useContext(uo),n=u.useRef(null),a=vt(s,n);return u.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),e.jsx(at.div,{...t,ref:a})});hf.displayName=mf;function xf(t,s=globalThis==null?void 0:globalThis.document){const r=pt(t),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let d=function(){ho(df,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=d,s.addEventListener("click",a.current,{once:!0})):d()}else s.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{s.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",o),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function ff(t,s=globalThis==null?void 0:globalThis.document){const r=pt(t),n=u.useRef(!1);return u.useEffect(()=>{const a=o=>{o.target&&!n.current&&ho(uf,r,{originalEvent:o},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cn(){const t=new CustomEvent(ir);document.dispatchEvent(t)}function ho(t,s,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?of(a,o):a.dispatchEvent(o)}var Vs=0;function pf(){u.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Sn()),document.body.insertAdjacentElement("beforeend",t[1]??Sn()),Vs++,()=>{Vs===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Vs--}},[])}function Sn(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var qs="focusScope.autoFocusOnMount",Hs="focusScope.autoFocusOnUnmount",kn={bubbles:!1,cancelable:!0},gf="FocusScope",xo=u.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=t,[l,d]=u.useState(null),c=pt(a),m=pt(o),p=u.useRef(null),f=vt(s,x=>d(x)),h=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let x=function(D){if(h.paused||!l)return;const N=D.target;l.contains(N)?p.current=N:ht(p.current,{select:!0})},v=function(D){if(h.paused||!l)return;const N=D.relatedTarget;N!==null&&(l.contains(N)||ht(p.current,{select:!0}))},y=function(D){if(document.activeElement===document.body)for(const M of D)M.removedNodes.length>0&&ht(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const j=new MutationObserver(y);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),j.disconnect()}}},[n,l,h.paused]),u.useEffect(()=>{if(l){Dn.add(h);const x=document.activeElement;if(!l.contains(x)){const y=new CustomEvent(qs,kn);l.addEventListener(qs,c),l.dispatchEvent(y),y.defaultPrevented||(vf(wf(fo(l)),{select:!0}),document.activeElement===x&&ht(l))}return()=>{l.removeEventListener(qs,c),setTimeout(()=>{const y=new CustomEvent(Hs,kn);l.addEventListener(Hs,m),l.dispatchEvent(y),y.defaultPrevented||ht(x??document.body,{select:!0}),l.removeEventListener(Hs,m),Dn.remove(h)},0)}}},[l,c,m,h]);const g=u.useCallback(x=>{if(!r&&!n||h.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,y=document.activeElement;if(v&&y){const j=x.currentTarget,[D,N]=jf(j);D&&N?!x.shiftKey&&y===N?(x.preventDefault(),r&&ht(D,{select:!0})):x.shiftKey&&y===D&&(x.preventDefault(),r&&ht(N,{select:!0})):y===j&&x.preventDefault()}},[r,n,h.paused]);return e.jsx(at.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});xo.displayName=gf;function vf(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(ht(n,{select:s}),document.activeElement!==r)return}function jf(t){const s=fo(t),r=Pn(s,t),n=Pn(s.reverse(),t);return[r,n]}function fo(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Pn(t,s){for(const r of t)if(!bf(r,{upTo:s}))return r}function bf(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yf(t){return t instanceof HTMLInputElement&&"select"in t}function ht(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&yf(t)&&s&&t.select()}}var Dn=Nf();function Nf(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=An(t,s),t.unshift(s)},remove(s){var r;t=An(t,s),(r=t[0])==null||r.resume()}}}function An(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function wf(t){return t.filter(s=>s.tagName!=="A")}var Pt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},Cf=hr.useId||(()=>{}),Sf=0;function kf(t){const[s,r]=u.useState(Cf());return Pt(()=>{r(n=>n??String(Sf++))},[t]),t||(s?`radix-${s}`:"")}var Pf="Arrow",po=u.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...o}=t;return e.jsx(at.svg,{...o,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});po.displayName=Pf;var Df=po;function Af(t){const[s,r]=u.useState(void 0);return Pt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const d=o.borderBoxSize,c=Array.isArray(d)?d[0]:d;i=c.inlineSize,l=c.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var Fr="Popper",[go,vo]=co(Fr),[_f,jo]=go(Fr),bo=t=>{const{__scopePopper:s,children:r}=t,[n,a]=u.useState(null);return e.jsx(_f,{scope:s,anchor:n,onAnchorChange:a,children:r})};bo.displayName=Fr;var yo="PopperAnchor",No=u.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,o=jo(yo,r),i=u.useRef(null),l=vt(s,i);return u.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:e.jsx(at.div,{...a,ref:l})});No.displayName=yo;var Lr="PopperContent",[Mf,Tf]=go(Lr),wo=u.forwardRef((t,s)=>{var Oe,Xe,z,q,Z,K;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:c=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,...x}=t,v=jo(Lr,r),[y,j]=u.useState(null),D=vt(s,ee=>j(ee)),[N,M]=u.useState(null),w=Af(N),A=(w==null?void 0:w.width)??0,C=(w==null?void 0:w.height)??0,F=n+(o!=="center"?"-"+o:""),b=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(c)?c:[c],P=L.length>0,O={padding:b,boundary:L.filter(If),altBoundary:P},{refs:k,floatingStyles:Y,placement:S,isPositioned:R,middlewareData:I}=Ln({strategy:"fixed",placement:F,whileElementsMounted:(...ee)=>Yn(...ee,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[$n({mainAxis:a+C,alignmentAxis:i}),d&&zn({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Hn():void 0,...O}),d&&Wn({...O}),Bn({...O,apply:({elements:ee,rects:he,availableWidth:_,availableHeight:H})=>{const{width:ae,height:Q}=he.reference,ve=ee.floating.style;ve.setProperty("--radix-popper-available-width",`${_}px`),ve.setProperty("--radix-popper-available-height",`${H}px`),ve.setProperty("--radix-popper-anchor-width",`${ae}px`),ve.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),N&&Vn({element:N,padding:l}),Rf({arrowWidth:A,arrowHeight:C}),f&&qn({strategy:"referenceHidden",...O})]}),[oe,je]=ko(S),G=pt(g);Pt(()=>{R&&(G==null||G())},[R,G]);const ge=(Oe=I.arrow)==null?void 0:Oe.x,Ce=(Xe=I.arrow)==null?void 0:Xe.y,it=((z=I.arrow)==null?void 0:z.centerOffset)!==0,[lt,Ge]=u.useState();return Pt(()=>{y&&Ge(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:R?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:lt,"--radix-popper-transform-origin":[(q=I.transformOrigin)==null?void 0:q.x,(Z=I.transformOrigin)==null?void 0:Z.y].join(" "),...((K=I.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Mf,{scope:r,placedSide:oe,onArrowChange:M,arrowX:ge,arrowY:Ce,shouldHideArrow:it,children:e.jsx(at.div,{"data-side":oe,"data-align":je,...x,ref:D,style:{...x.style,animation:R?void 0:"none"}})})})});wo.displayName=Lr;var Co="PopperArrow",Ef={top:"bottom",right:"left",bottom:"top",left:"right"},So=u.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,o=Tf(Co,n),i=Ef[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(Df,{...a,ref:r,style:{...a.style,display:"block"}})})});So.displayName=Co;function If(t){return t!==null}var Rf=t=>({name:"transformOrigin",options:t,fn(s){var v,y,j;const{placement:r,rects:n,middlewareData:a}=s,i=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=i?0:t.arrowWidth,d=i?0:t.arrowHeight,[c,m]=ko(r),p={start:"0%",center:"50%",end:"100%"}[m],f=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,h=(((j=a.arrow)==null?void 0:j.y)??0)+d/2;let g="",x="";return c==="bottom"?(g=i?p:`${f}px`,x=`${-d}px`):c==="top"?(g=i?p:`${f}px`,x=`${n.floating.height+d}px`):c==="right"?(g=`${-d}px`,x=i?p:`${h}px`):c==="left"&&(g=`${n.floating.width+d}px`,x=i?p:`${h}px`),{data:{x:g,y:x}}}});function ko(t){const[s,r="center"]=t.split("-");return[s,r]}var Of=bo,Po=No,Ff=wo,Lf=So,$f="Portal",Do=u.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,o]=u.useState(!1);Pt(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Xn.createPortal(e.jsx(at.div,{...n,ref:s}),i):null});Do.displayName=$f;function zf(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var $r=t=>{const{present:s,children:r}=t,n=Wf(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),o=vt(n.ref,Bf(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:o}):null};$r.displayName="Presence";function Wf(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),o=u.useRef("none"),i=t?"mounted":"unmounted",[l,d]=zf(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const c=is(n.current);o.current=l==="mounted"?c:"none"},[l]),Pt(()=>{const c=n.current,m=a.current;if(m!==t){const f=o.current,h=is(c);t?d("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(m&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),Pt(()=>{if(s){let c;const m=s.ownerDocument.defaultView??window,p=h=>{const x=is(n.current).includes(h.animationName);if(h.target===s&&x&&(d("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",c=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},f=h=>{h.target===s&&(o.current=is(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(c),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function is(t){return(t==null?void 0:t.animationName)||"none"}function Bf(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Vf({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=qf({defaultProp:s,onChange:r}),o=t!==void 0,i=o?t:n,l=pt(r),d=u.useCallback(c=>{if(o){const p=typeof c=="function"?c(t):c;p!==t&&l(p)}else a(c)},[o,t,a,l]);return[i,d]}function qf({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),o=pt(s);return u.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}var zr="Popover",[Ao]=co(zr,[vo]),rs=vo(),[Hf,jt]=Ao(zr),_o=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!1}=t,l=rs(s),d=u.useRef(null),[c,m]=u.useState(!1),[p=!1,f]=Vf({prop:n,defaultProp:a,onChange:o});return e.jsx(Of,{...l,children:e.jsx(Hf,{scope:s,contentId:kf(),triggerRef:d,open:p,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:u.useCallback(()=>m(!0),[]),onCustomAnchorRemove:u.useCallback(()=>m(!1),[]),modal:i,children:r})})};_o.displayName=zr;var Mo="PopoverAnchor",Yf=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=jt(Mo,r),o=rs(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return u.useEffect(()=>(i(),()=>l()),[i,l]),e.jsx(Po,{...o,...n,ref:s})});Yf.displayName=Mo;var To="PopoverTrigger",Eo=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=jt(To,r),o=rs(r),i=vt(s,a.triggerRef),l=e.jsx(at.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Lo(a.open),...n,ref:i,onClick:ft(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:e.jsx(Po,{asChild:!0,...o,children:l})});Eo.displayName=To;var Wr="PopoverPortal",[Uf,Gf]=Ao(Wr,{forceMount:void 0}),Io=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,o=jt(Wr,s);return e.jsx(Uf,{scope:s,forceMount:r,children:e.jsx($r,{present:r||o.open,children:e.jsx(Do,{asChild:!0,container:a,children:n})})})};Io.displayName=Wr;var Ot="PopoverContent",Ro=u.forwardRef((t,s)=>{const r=Gf(Ot,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,o=jt(Ot,t.__scopePopover);return e.jsx($r,{present:n||o.open,children:o.modal?e.jsx(Xf,{...a,ref:s}):e.jsx(Kf,{...a,ref:s})})});Ro.displayName=Ot;var Xf=u.forwardRef((t,s)=>{const r=jt(Ot,t.__scopePopover),n=u.useRef(null),a=vt(s,n),o=u.useRef(!1);return u.useEffect(()=>{const i=n.current;if(i)return Hi(i)},[]),e.jsx(Yi,{as:Le,allowPinchZoom:!0,children:e.jsx(Oo,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ft(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ft(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,c=l.button===2||d;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ft(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Kf=u.forwardRef((t,s)=>{const r=jt(Ot,t.__scopePopover),n=u.useRef(!1),a=u.useRef(!1);return e.jsx(Oo,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var d,c;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((c=r.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Oo=u.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:m,...p}=t,f=jt(Ot,r),h=rs(r);return pf(),e.jsx(xo,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(mo,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:e.jsx(Ff,{"data-state":Lo(f.open),role:"dialog",id:f.contentId,...h,...p,ref:s,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Fo="PopoverClose",Qf=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=jt(Fo,r);return e.jsx(at.button,{type:"button",...n,ref:s,onClick:ft(t.onClick,()=>a.onOpenChange(!1))})});Qf.displayName=Fo;var Jf="PopoverArrow",Zf=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=rs(r);return e.jsx(Lf,{...a,...n,ref:s})});Zf.displayName=Jf;function Lo(t){return t?"open":"closed"}var ep=_o,tp=Eo,sp=Io,rp=Ro;function _n({...t}){return e.jsx(ep,{"data-slot":"popover",...t})}function Mn({...t}){return e.jsx(tp,{"data-slot":"popover-trigger",...t})}function Tn({className:t,align:s="center",sideOffset:r=4,...n}){return e.jsx(sp,{children:e.jsx(rp,{"data-slot":"popover-content",align:s,sideOffset:r,className:W("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}function np({currentUser:t,users:s,onCreateProject:r,onClose:n}){const[a,o]=u.useState({name:"",description:"",priority:"medium",startDate:new Date,endDate:new Date(new Date().setMonth(new Date().getMonth()+1)),supervisorId:"",fabricatorIds:[],fabricatorAllocation:"",materialsAllocation:"",supervisorAllocation:"",companyAllocation:"",totalProjectPrice:"",supervisorAssignsFabricators:!1,documentationUrl:""}),[i,l]=u.useState({}),[d,c]=u.useState(!1),[m,p]=u.useState(!1),f=s.filter(N=>N.role==="supervisor"),h=s.filter(N=>N.role==="fabricator");u.useEffect(()=>{const N=parseFloat(a.fabricatorAllocation)||0,M=parseFloat(a.materialsAllocation)||0,w=parseFloat(a.supervisorAllocation)||0,A=parseFloat(a.companyAllocation)||0,C=N+M+w+A;o(F=>({...F,totalProjectPrice:C.toFixed(2)}))},[a.fabricatorAllocation,a.materialsAllocation,a.supervisorAllocation,a.companyAllocation]);const g=()=>{const N={};return a.name.trim()||(N.name="Project name is required"),a.description.trim()||(N.description="Project description is required"),a.supervisorId||(N.supervisorId="Supervisor selection is required"),!a.supervisorAssignsFabricators&&a.fabricatorIds.length===0&&(N.fabricatorIds="At least one fabricator must be assigned or supervisor must assign manually"),a.endDate<=a.startDate&&(N.endDate="End date must be after start date"),((parseFloat(a.fabricatorAllocation)||0)<0||(parseFloat(a.materialsAllocation)||0)<0||(parseFloat(a.supervisorAllocation)||0)<0||(parseFloat(a.companyAllocation)||0)<0)&&(N.totalProjectPrice="Allocations must be zero or positive numbers"),l(N),Object.keys(N).length===0},x=(N,M)=>{o(w=>({...w,[N]:M})),i[N]&&l(w=>({...w,[N]:""}))},v=N=>{a.fabricatorIds.includes(N)||x("fabricatorIds",[...a.fabricatorIds,N])},y=N=>{x("fabricatorIds",a.fabricatorIds.filter(M=>M!==N))},j=async N=>{if(N.preventDefault(),!g())return;const M=parseFloat(a.totalProjectPrice),A=a.supervisorAssignsFabricators?"0_Created":"1_Assigned_to_FAB",C={name:a.name,description:a.description,clientName:"",status:A,priority:a.priority,startDate:a.startDate.toISOString().split("T")[0],endDate:a.endDate.toISOString().split("T")[0],progress:0,supervisorId:a.supervisorId,fabricatorIds:a.supervisorAssignsFabricators?[]:a.fabricatorIds,budget:M,spent:0,revenue:0,documentationUrl:a.documentationUrl||void 0,createdBy:t.id,createdAt:new Date().toISOString(),fabricatorBudgets:[]};await r(C),n();try{window.location.hash="projects"}catch{}},D=N=>{var M;return((M=s.find(w=>w.id===N))==null?void 0:M.name)||"Unknown"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(B,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Create New Project"]}),e.jsx(T,{variant:"ghost",onClick:n,children:e.jsx(rt,{className:"h-4 w-4"})})]})}),e.jsx(V,{className:"space-y-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Project Name *"}),e.jsx(U,{id:"name",value:a.name,onChange:N=>x("name",N.target.value),placeholder:"Enter project name",className:i.name?"border-destructive":""}),i.name&&e.jsx("p",{className:"text-sm text-destructive",children:i.name})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description *"}),e.jsx(Ye,{id:"description",value:a.description,onChange:N=>x("description",N.target.value),placeholder:"Enter project description",className:i.description?"border-destructive":""}),i.description&&e.jsx("p",{className:"text-sm text-destructive",children:i.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"priority",children:"Priority"}),e.jsxs(ce,{value:a.priority,onValueChange:N=>x("priority",N),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select priority"})}),e.jsxs(me,{children:[e.jsx($,{value:"low",children:"Low"}),e.jsx($,{value:"medium",children:"Medium"}),e.jsx($,{value:"high",children:"High"}),e.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Timeline"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Start Date"}),e.jsxs(_n,{open:d,onOpenChange:c,children:[e.jsx(Mn,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"w-full justify-start text-left",children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),nt(a.startDate,"PPP")]})}),e.jsx(Tn,{className:"w-auto p-0",children:e.jsx(yn,{mode:"single",selected:a.startDate,onSelect:N=>{N&&(x("startDate",N),c(!1))},initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"End Date"}),e.jsxs(_n,{open:m,onOpenChange:p,children:[e.jsx(Mn,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"w-full justify-start text-left",children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),nt(a.endDate,"PPP")]})}),e.jsx(Tn,{className:"w-auto p-0",children:e.jsx(yn,{mode:"single",selected:a.endDate,onSelect:N=>{N&&(x("endDate",N),p(!1))},initialFocus:!0})})]}),i.endDate&&e.jsx("p",{className:"text-sm text-destructive",children:i.endDate})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Team Assignment"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"supervisor",children:"Supervisor *"}),e.jsxs(ce,{value:a.supervisorId,onValueChange:N=>x("supervisorId",N),children:[e.jsx(ue,{className:i.supervisorId?"border-destructive":"",children:e.jsx(de,{placeholder:"Select supervisor"})}),e.jsx(me,{children:f.map(N=>e.jsxs($,{value:N.id,children:[N.name," - ",N.department]},N.id))})]}),i.supervisorId&&e.jsx("p",{className:"text-sm text-destructive",children:i.supervisorId})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"supervisorAssignsFabricators",type:"checkbox",checked:a.supervisorAssignsFabricators,onChange:N=>x("supervisorAssignsFabricators",N.target.checked),className:"cursor-pointer"}),e.jsx(E,{htmlFor:"supervisorAssignsFabricators",className:"cursor-pointer",children:"Supervisor will assign fabricators manually"})]}),a.supervisorAssignsFabricators&&e.jsx(Ae,{children:e.jsx(_e,{children:"You can assign fabricators later from the project card using the Assign action."})}),!a.supervisorAssignsFabricators&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Fabricators *"}),e.jsxs(ce,{onValueChange:v,children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Add fabricators"})}),e.jsx(me,{children:h.filter(N=>!a.fabricatorIds.includes(N.id)).map(N=>e.jsxs($,{value:N.id,children:[N.name," - ",N.department]},N.id))})]}),a.fabricatorIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.fabricatorIds.map(N=>e.jsxs(re,{variant:"secondary",className:"flex items-center gap-1",children:[D(N),e.jsx(rt,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(N)})]},N))}),i.fabricatorIds&&e.jsx("p",{className:"text-sm text-destructive",children:i.fabricatorIds})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Financial Allocation"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Project Price"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Budget"})]}),e.jsxs("p",{className:"text-2xl",children:["",(parseFloat(a.totalProjectPrice)||0).toLocaleString()]})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),e.jsx("p",{className:"text-2xl",children:"0"})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Revenue"})]}),e.jsx("p",{className:"text-2xl",children:"0"})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"fabricatorAllocation",children:"Fabricator Allocation ()"}),e.jsx(U,{id:"fabricatorAllocation",type:"number",min:"0",step:"0.01",value:a.fabricatorAllocation,onChange:N=>x("fabricatorAllocation",N.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Labor costs allocated to fabricators."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"materialsAllocation",children:"Materials Allocation ()"}),e.jsx(U,{id:"materialsAllocation",type:"number",min:"0",step:"0.01",value:a.materialsAllocation,onChange:N=>x("materialsAllocation",N.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected material expenses."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"supervisorAllocation",children:"Supervisor Allocation ()"}),e.jsx(U,{id:"supervisorAllocation",type:"number",min:"0",step:"0.01",value:a.supervisorAllocation,onChange:N=>x("supervisorAllocation",N.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supervisor fees or overhead."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"companyAllocation",children:"Company Allocation ()"}),e.jsx(U,{id:"companyAllocation",type:"number",min:"0",step:"0.01",value:a.companyAllocation,onChange:N=>x("companyAllocation",N.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Company margin and other costs."})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(E,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total Project Price ()"}),e.jsx("span",{className:"text-muted-foreground",children:"Auto-calculated"})]}),e.jsx(U,{readOnly:!0,value:a.totalProjectPrice,placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{children:"Documentation (Optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"documentationUrl",children:"Google Drive Documentation URL"}),e.jsx(U,{id:"documentationUrl",type:"url",value:a.documentationUrl,onChange:N=>x("documentationUrl",N.target.value),placeholder:"https://drive.google.com/drive/folders/..."})]})]}),Object.keys(i).length>0&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:"Please fix the errors above before submitting."})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{type:"button",variant:"outline",onClick:n,className:"flex-1",children:"Cancel"}),e.jsxs(T,{type:"submit",className:"flex-1",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})]})})]})})}function tt(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function Br(t,s=[]){let r=[];function n(o,i){const l=u.createContext(i),d=r.length;r=[...r,i];const c=p=>{var y;const{scope:f,children:h,...g}=p,x=((y=f==null?void 0:f[t])==null?void 0:y[d])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:h})};c.displayName=o+"Provider";function m(p,f){var x;const h=((x=f==null?void 0:f[t])==null?void 0:x[d])||l,g=u.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[c,m]}const a=()=>{const o=r.map(i=>u.createContext(i));return function(l){const d=(l==null?void 0:l[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,ap(a,...s)]}function ap(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:d,scopeName:c})=>{const p=d(o)[`__scope${c}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}function En(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function op(...t){return s=>{let r=!1;const n=t.map(a=>{const o=En(a,s);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():En(t[a],null)}}}}function ps(...t){return u.useCallback(op(...t),t)}function ip(t){const s=t+"CollectionProvider",[r,n]=Br(s),[a,o]=r(s,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:g,children:x}=h,v=mt.useRef(null),y=mt.useRef(new Map).current;return e.jsx(a,{scope:g,itemMap:y,collectionRef:v,children:x})};i.displayName=s;const l=t+"CollectionSlot",d=mt.forwardRef((h,g)=>{const{scope:x,children:v}=h,y=o(l,x),j=ps(g,y.collectionRef);return e.jsx(Le,{ref:j,children:v})});d.displayName=l;const c=t+"CollectionItemSlot",m="data-radix-collection-item",p=mt.forwardRef((h,g)=>{const{scope:x,children:v,...y}=h,j=mt.useRef(null),D=ps(g,j),N=o(c,x);return mt.useEffect(()=>(N.itemMap.set(j,{ref:j,...y}),()=>void N.itemMap.delete(j))),e.jsx(Le,{[m]:"",ref:D,children:v})});p.displayName=c;function f(h){const g=o(t+"CollectionConsumer",h);return mt.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((N,M)=>y.indexOf(N.ref.current)-y.indexOf(M.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:d,ItemSlot:p},f,n]}var lr=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},lp=hr.useId||(()=>{}),cp=0;function $o(t){const[s,r]=u.useState(lp());return lr(()=>{r(n=>n??String(cp++))},[t]),t||(s?`radix-${s}`:"")}var dp=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$t=dp.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Le:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Vr(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function zo({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=up({defaultProp:s,onChange:r}),o=t!==void 0,i=o?t:n,l=Vr(r),d=u.useCallback(c=>{if(o){const p=typeof c=="function"?c(t):c;p!==t&&l(p)}else a(c)},[o,t,a,l]);return[i,d]}function up({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),o=Vr(s);return u.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}var mp=u.createContext(void 0);function Wo(t){const s=u.useContext(mp);return t||s||"ltr"}var Ys="rovingFocusGroup.onEntryFocus",hp={bubbles:!1,cancelable:!0},As="RovingFocusGroup",[cr,Bo,xp]=ip(As),[fp,Vo]=Br(As,[xp]),[pp,gp]=fp(As),qo=u.forwardRef((t,s)=>e.jsx(cr.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(cr.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(vp,{...t,ref:s})})}));qo.displayName=As;var vp=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:c,preventScrollOnEntryFocus:m=!1,...p}=t,f=u.useRef(null),h=ps(s,f),g=Wo(o),[x=null,v]=zo({prop:i,defaultProp:l,onChange:d}),[y,j]=u.useState(!1),D=Vr(c),N=Bo(r),M=u.useRef(!1),[w,A]=u.useState(0);return u.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Ys,D),()=>C.removeEventListener(Ys,D)},[D]),e.jsx(pp,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:x,onItemFocus:u.useCallback(C=>v(C),[v]),onItemShiftTab:u.useCallback(()=>j(!0),[]),onFocusableItemAdd:u.useCallback(()=>A(C=>C+1),[]),onFocusableItemRemove:u.useCallback(()=>A(C=>C-1),[]),children:e.jsx($t.div,{tabIndex:y||w===0?-1:0,"data-orientation":n,...p,ref:h,style:{outline:"none",...t.style},onMouseDown:tt(t.onMouseDown,()=>{M.current=!0}),onFocus:tt(t.onFocus,C=>{const F=!M.current;if(C.target===C.currentTarget&&F&&!y){const b=new CustomEvent(Ys,hp);if(C.currentTarget.dispatchEvent(b),!b.defaultPrevented){const L=N().filter(S=>S.focusable),P=L.find(S=>S.active),O=L.find(S=>S.id===x),Y=[P,O,...L].filter(Boolean).map(S=>S.ref.current);Uo(Y,m)}}M.current=!1}),onBlur:tt(t.onBlur,()=>j(!1))})})}),Ho="RovingFocusGroupItem",Yo=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,...i}=t,l=$o(),d=o||l,c=gp(Ho,r),m=c.currentTabStopId===d,p=Bo(r),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return u.useEffect(()=>{if(n)return f(),()=>h()},[n,f,h]),e.jsx(cr.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx($t.span,{tabIndex:m?0:-1,"data-orientation":c.orientation,...i,ref:s,onMouseDown:tt(t.onMouseDown,g=>{n?c.onItemFocus(d):g.preventDefault()}),onFocus:tt(t.onFocus,()=>c.onItemFocus(d)),onKeyDown:tt(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=yp(g,c.orientation,c.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=p().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const j=y.indexOf(g.currentTarget);y=c.loop?Np(y,j+1):y.slice(j+1)}setTimeout(()=>Uo(y))}})})})});Yo.displayName=Ho;var jp={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bp(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function yp(t,s,r){const n=bp(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return jp[n]}function Uo(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function Np(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var wp=qo,Cp=Yo;function Sp(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var Go=t=>{const{present:s,children:r}=t,n=kp(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),o=ps(n.ref,Pp(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:o}):null};Go.displayName="Presence";function kp(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),o=u.useRef("none"),i=t?"mounted":"unmounted",[l,d]=Sp(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const c=ls(n.current);o.current=l==="mounted"?c:"none"},[l]),lr(()=>{const c=n.current,m=a.current;if(m!==t){const f=o.current,h=ls(c);t?d("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(m&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),lr(()=>{if(s){let c;const m=s.ownerDocument.defaultView??window,p=h=>{const x=ls(n.current).includes(h.animationName);if(h.target===s&&x&&(d("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",c=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},f=h=>{h.target===s&&(o.current=ls(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(c),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function ls(t){return(t==null?void 0:t.animationName)||"none"}function Pp(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var qr="Tabs",[Dp]=Br(qr,[Vo]),Xo=Vo(),[Ap,Hr]=Dp(qr),Ko=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:d="automatic",...c}=t,m=Wo(l),[p,f]=zo({prop:n,onChange:a,defaultProp:o});return e.jsx(Ap,{scope:r,baseId:$o(),value:p,onValueChange:f,orientation:i,dir:m,activationMode:d,children:e.jsx($t.div,{dir:m,"data-orientation":i,...c,ref:s})})});Ko.displayName=qr;var Qo="TabsList",Jo=u.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,o=Hr(Qo,r),i=Xo(r);return e.jsx(wp,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx($t.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:s})})});Jo.displayName=Qo;var Zo="TabsTrigger",ei=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=t,i=Hr(Zo,r),l=Xo(r),d=ri(i.baseId,n),c=ni(i.baseId,n),m=n===i.value;return e.jsx(Cp,{asChild:!0,...l,focusable:!a,active:m,children:e.jsx($t.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":c,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:s,onMouseDown:tt(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?i.onValueChange(n):p.preventDefault()}),onKeyDown:tt(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&i.onValueChange(n)}),onFocus:tt(t.onFocus,()=>{const p=i.activationMode!=="manual";!m&&!a&&p&&i.onValueChange(n)})})})});ei.displayName=Zo;var ti="TabsContent",si=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=t,l=Hr(ti,r),d=ri(l.baseId,n),c=ni(l.baseId,n),m=n===l.value,p=u.useRef(m);return u.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Go,{present:a||m,children:({present:f})=>e.jsx($t.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:c,tabIndex:0,...i,ref:s,style:{...t.style,animationDuration:p.current?"0s":void 0},children:f&&o})})});si.displayName=ti;function ri(t,s){return`${t}-trigger-${s}`}function ni(t,s){return`${t}-content-${s}`}var _p=Ko,Mp=Jo,Tp=ei,Ep=si;function _s({className:t,...s}){return e.jsx(_p,{"data-slot":"tabs",className:W("flex flex-col gap-2",t),...s})}function Ms({className:t,...s}){return e.jsx(Mp,{"data-slot":"tabs-list",className:W("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function Ne({className:t,...s}){return e.jsx(Tp,{"data-slot":"tabs-trigger",className:W("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function we({className:t,...s}){return e.jsx(Ep,{"data-slot":"tabs-content",className:W("flex-1 outline-none",t),...s})}function Ip({projectId:t,currentUserId:s,onFilesUploaded:r,maxFileSize:n=10*1024*1024,acceptedFileTypes:a=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".jpg",".jpeg",".png",".gif",".bmp",".svg",".zip",".rar",".7z",".mp4",".avi",".mov",".wmv",".txt",".csv"]}){const[o,i]=u.useState([]),[l,d]=u.useState(!1),[c,m]=u.useState(""),p=u.useRef(null),f=j=>j.startsWith("image/")?e.jsx(yc,{className:"h-4 w-4"}):j.startsWith("video/")?e.jsx(od,{className:"h-4 w-4"}):j.includes("zip")||j.includes("rar")||j.includes("7z")?e.jsx(Tt,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"}),h=j=>{if(j===0)return"0 Bytes";const D=1024,N=["Bytes","KB","MB","GB"],M=Math.floor(Math.log(j)/Math.log(D));return parseFloat((j/Math.pow(D,M)).toFixed(2))+" "+N[M]},g=j=>{var N;if(j.size>n)return`File "${j.name}" is too large. Maximum size is ${h(n)}.`;const D="."+((N=j.name.split(".").pop())==null?void 0:N.toLowerCase());return a.includes(D)?null:`File type "${D}" is not supported.`},x=j=>{const D=Array.from(j.target.files||[]);m("");for(const A of D){const C=g(A);if(C){m(C);return}}const N=o.map(A=>A.name),M=D.filter(A=>!N.includes(A.name)),w=D.filter(A=>N.includes(A.name));if(w.length>0){m(`Files with the same names already selected: ${w.map(A=>A.name).join(", ")}`);return}i(A=>[...A,...M])},v=j=>{i(D=>D.filter((N,M)=>M!==j)),m("")},y=async()=>{if(o.length===0){m("Please select files to upload.");return}d(!0),m("");try{await new Promise(D=>setTimeout(D,2e3));const j=o.map(D=>({id:`att-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:D.name,size:D.size,type:D.type,uploadedBy:s,uploadedAt:new Date().toISOString(),url:`mock://uploads/${t}/${D.name}`}));r(j),i([]),p.current&&(p.current.value="")}catch{m("Failed to upload files. Please try again.")}finally{d(!1)}};return e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(an,{className:"h-5 w-5"}),"Upload Project Files"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"file-upload",children:"Select Files"}),e.jsx(U,{ref:p,id:"file-upload",type:"file",multiple:!0,accept:a.join(","),onChange:x,className:"cursor-pointer"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supported formats: ",a.slice(0,5).join(", "),a.length>5&&` and ${a.length-5} more`]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Maximum file size: ",h(n)]})]}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{children:["Selected Files (",o.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:o.map((j,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f(j.type),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm truncate",children:j.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h(j.size)})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>v(D),className:"shrink-0",children:e.jsx(rt,{className:"h-4 w-4"})})]},D))})]}),c&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:c})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{onClick:y,disabled:o.length===0||l,className:"flex-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(an,{className:"h-4 w-4 mr-2"}),"Upload Files"]})}),o.length>0&&e.jsx(T,{variant:"outline",onClick:()=>{i([]),p.current&&(p.current.value=""),m("")},disabled:l,children:"Clear All"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," This is a demo implementation. In a real application, files would be uploaded to a secure cloud storage service."]})})]})]})}function Rp({project:t,users:s,currentUser:r,onUpdateProject:n,onClose:a}){const[o,i]=u.useState({}),[l,d]=u.useState(""),[c,m]=u.useState(!1);if(u.useEffect(()=>{const j={};t.fabricatorIds.forEach(D=>{var M,w;const N=(M=t.fabricatorBudgets)==null?void 0:M.find(A=>A.fabricatorId===D);j[D]=((w=N==null?void 0:N.allocatedRevenue)==null?void 0:w.toString())||"0"}),i(j)},[t]),!(r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id))return e.jsxs(Ae,{children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx(_e,{children:"You don't have permission to manage fabricator revenue for this project."})]});const f=j=>{var D;return((D=s.find(N=>N.id===j))==null?void 0:D.name)||"Unknown Fabricator"},h=(j,D)=>{(D===""||/^\d*\.?\d*$/.test(D))&&(i(N=>({...N,[j]:D})),d(""),m(!1))},g=()=>Object.values(o).reduce((j,D)=>j+(parseFloat(D)||0),0),x=()=>{const j=g();if(j>t.revenue){d(`Total allocated revenue (${j.toLocaleString()}) exceeds project revenue (${t.revenue.toLocaleString()})`);return}const D=t.fabricatorIds.map(M=>{var C;const w=(C=t.fabricatorBudgets)==null?void 0:C.find(F=>F.fabricatorId===M),A=parseFloat(o[M])||0;return{fabricatorId:M,allocatedAmount:(w==null?void 0:w.allocatedAmount)||0,spentAmount:(w==null?void 0:w.spentAmount)||0,allocatedRevenue:A,description:(w==null?void 0:w.description)||`Revenue allocation for ${f(M)}`}}),N={...t,fabricatorBudgets:D};n(N),m(!0),d(""),setTimeout(()=>m(!1),3e3)},v=g(),y=t.revenue-v;return e.jsxs(B,{children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-accent"}),"Fabricator Revenue Assignment"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign revenue amounts to each fabricator working on this project"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Project Revenue"}),e.jsxs("p",{className:"text-xl",children:["",t.revenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Allocated Revenue"}),e.jsxs("p",{className:"text-xl text-accent",children:["",v.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Remaining Revenue"}),e.jsxs("p",{className:`text-xl ${y<0?"text-destructive":"text-green-600"}`,children:["",y.toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ze,{className:"h-5 w-5"}),e.jsxs("h3",{className:"text-lg",children:["Fabricators (",t.fabricatorIds.length,")"]})]}),t.fabricatorIds.map((j,D)=>{const N=s.find(A=>A.id===j),M=parseFloat(o[j]||"0"),w=t.revenue>0?(M/t.revenue*100).toFixed(1):"0";return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:D+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(N==null?void 0:N.name)||"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N==null?void 0:N.secureId})]})]}),e.jsxs(re,{variant:"outline",children:[w,"% of total"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:`revenue-${j}`,children:"Assigned Revenue Amount ()"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx(U,{id:`revenue-${j}`,type:"text",value:o[j]||"",onChange:A=>h(j,A.target.value),placeholder:"0.00",className:"text-lg"})]}),M>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["This fabricator will receive ",M.toLocaleString()," (",w,"% of project revenue)"]})]})]},j)})]}),l&&e.jsxs(Ae,{variant:"destructive",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx(_e,{children:l})]}),c&&e.jsxs(Ae,{className:"border-green-600 text-green-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx(_e,{children:"Revenue allocations saved successfully!"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(T,{onClick:x,className:"flex-1",children:[e.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Revenue Allocations"]}),a&&e.jsxs(T,{variant:"outline",onClick:a,children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Close"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{const j=(t.revenue/t.fabricatorIds.length).toFixed(2),D={};t.fabricatorIds.forEach(N=>{D[N]=j}),i(D)},children:"Split Equally"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{const j={};t.fabricatorIds.forEach(D=>{j[D]="0"}),i(j)},children:"Clear All"})]})]})]})}function Op({project:t,users:s,currentUser:r,onUpdateProject:n,onClose:a}){const[o,i]=u.useState(!1),[l,d]=u.useState(t),[c,m]=u.useState(""),[p,f]=u.useState(!1),[h,g]=u.useState(!1),x=s.find(P=>P.role==="client"&&P.clientProjectId===t.id),v=!!x;u.useEffect(()=>{let P=!0;return(async()=>{try{const Y=((await ye.getProjects()).data||[]).find(R=>R.id===t.id||R.id===t.id),S=!!(Y&&(Y.client_id||Y.clientId||Y.client_name||Y.clientName));P&&g(S)}catch{}})(),()=>{P=!1}},[t.id]);const y=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id,j=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id,D=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id||r.role==="fabricator"&&t.fabricatorIds.includes(r.id),N=P=>{const O=s.find(k=>k.id===P);return(O==null?void 0:O.name)||"Unknown Supervisor"},M=P=>{if(P===0)return"0 Bytes";const O=1024,k=["Bytes","KB","MB","GB"],Y=Math.floor(Math.log(P)/Math.log(O));return parseFloat((P/Math.pow(O,Y)).toFixed(2))+" "+k[Y]},w=P=>{switch(P){case"0_Created":return"outline";case"1_Assigned_to_FAB":return"secondary";case"2_Ready_for_Supervisor_Review":return"destructive";case"3_Ready_for_Admin_Review":return"destructive";case"4_Ready_for_Client_Signoff":return"default";default:return"outline"}},A=()=>{n(l),i(!1)},C=()=>{d(t),i(!1)},F=P=>{const O={...l,attachments:[...l.attachments||[],...P]};d(O),n(O)},b=P=>{d(O=>({...O,documentationUrl:P}))},L=()=>{if(c&&!l.fabricatorIds.includes(c)){const P=[...l.fabricatorIds,c],O={...l,fabricatorIds:P};d(O),n(O),m(""),f(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(B,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:o&&y?e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{value:l.name,onChange:P=>d(O=>({...O,name:P.target.value})),className:"text-2xl font-semibold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:l.status,onChange:P=>d(O=>({...O,status:P.target.value})),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"0_Created",children:"0_Created"}),e.jsx("option",{value:"1_Assigned_to_FAB",children:"1_Assigned_to_FAB"}),e.jsx("option",{value:"2_Ready_for_Supervisor_Review",children:"2_Ready_for_Supervisor_Review"}),e.jsx("option",{value:"3_Ready_for_Admin_Review",children:"3_Ready_for_Admin_Review"}),e.jsx("option",{value:"4_Ready_for_Client_Signoff",children:"4_Ready_for_Client_Signoff"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"pending-assignment",children:"Pending Assignment"})]}),e.jsxs("select",{value:l.priority,onChange:P=>d(O=>({...O,priority:P.target.value})),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"text-2xl",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(re,{variant:w(t.status),children:t.status}),e.jsxs(re,{variant:"outline",children:[t.priority," priority"]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[y&&!o&&e.jsxs(T,{variant:"outline",onClick:()=>i(!0),children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Edit"]}),y&&(v||h)&&e.jsx(T,{variant:"outline",disabled:!0,children:"Client Assigned"}),o&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",onClick:A,children:[e.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsx(T,{variant:"ghost",onClick:C,children:"Cancel"})]}),e.jsx(T,{variant:"ghost",onClick:a,children:e.jsx(rt,{className:"h-4 w-4"})})]})]})}),e.jsx(V,{children:e.jsxs(_s,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Ms,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"team",children:"Team"}),e.jsx(Ne,{value:"revenue",children:"Revenue"}),e.jsx(Ne,{value:"files",children:"Files"}),e.jsx(Ne,{value:"documentation",children:"Documentation"})]}),e.jsxs(we,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"description",children:"Description"}),o?e.jsx(U,{id:"description",value:l.description,onChange:P=>d(O=>({...O,description:P.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Progress"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[t.progress,"% Complete"]}),o&&e.jsx(U,{type:"number",min:"0",max:"100",value:l.progress,onChange:P=>d(O=>({...O,progress:parseInt(P.target.value)||0})),className:"w-20 h-6"})]}),e.jsx(Kt,{value:t.progress})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Start Date"]}),o&&y?e.jsx(U,{type:"date",value:l.startDate,onChange:P=>d(O=>({...O,startDate:P.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.startDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"End Date"]}),o&&y?e.jsx(U,{type:"date",value:l.endDate,onChange:P=>d(O=>({...O,endDate:P.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4"}),"Client"]}),x?e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:x.name}),e.jsx("p",{className:"text-xs",children:x.email})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No client assigned"})]})]})]}),e.jsx(aa,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg",children:"Financial Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[(r.role==="admin"||r.role==="supervisor")&&e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Budget"})]}),o&&r.role==="admin"?e.jsx(U,{type:"number",value:l.budget,onChange:P=>d(O=>({...O,budget:parseFloat(P.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.budget.toLocaleString()]})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),o&&r.role==="admin"?e.jsx(U,{type:"number",value:l.spent,onChange:P=>d(O=>({...O,spent:parseFloat(P.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.spent.toLocaleString()]})]})})]}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:r.role==="fabricator"?"Project Value":"Revenue"})]}),o&&r.role==="admin"?e.jsx(U,{type:"number",value:l.revenue,onChange:P=>d(O=>({...O,revenue:parseFloat(P.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.revenue.toLocaleString()]})]})})]})]})]}),e.jsx(we,{value:"team",className:"space-y-6",children:e.jsxs(B,{children:[e.jsxs(te,{className:"flex justify-between items-center",children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Project Team"]}),j&&!p&&e.jsx(T,{onClick:()=>f(!0),variant:"outline",size:"sm",children:"Add Fabricator"})]}),j&&p&&e.jsxs("div",{className:"p-4",children:[e.jsx(E,{htmlFor:"fabricator-select",children:"Select Fabricator"}),e.jsxs("select",{id:"fabricator-select",value:c,onChange:P=>m(P.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"",children:"--Choose a Fabricator--"}),s.filter(P=>P.role==="fabricator"&&!l.fabricatorIds.includes(P.id)).map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(T,{onClick:L,disabled:!c,children:"Add"}),e.jsx(T,{variant:"ghost",onClick:()=>{f(!1),m("")},children:"Cancel"})]})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b",children:[e.jsx(E,{className:"flex items-center gap-2 text-base mb-2",children:"Supervisor"}),o&&r.role==="admin"?e.jsx("div",{className:"space-y-2",children:e.jsx("select",{value:l.supervisorId,onChange:P=>d(O=>({...O,supervisorId:P.target.value})),className:"w-full border rounded p-2",children:s.filter(P=>P.role==="supervisor").map(P=>e.jsxs("option",{value:P.id,children:[P.name," - ",P.school]},P.id))})}):e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:"S"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N(t.supervisorId)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Project Supervisor"})]})]})]}),e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2 text-base mb-3",children:["Fabricators (",t.fabricatorIds.length,")"]}),e.jsx("div",{className:"space-y-3",children:t.fabricatorIds.map((P,O)=>{var R;const k=s.find(I=>I.id===P),Y=(R=t.fabricatorBudgets)==null?void 0:R.find(I=>I.fabricatorId===P),S=Y&&Y.allocatedRevenue>0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-accent-foreground flex items-center justify-center",children:O+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(k==null?void 0:k.name)||"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k==null?void 0:k.secureId})]})]}),S&&(r.role==="admin"||r.role==="supervisor")&&e.jsxs(re,{variant:"outline",className:"gap-1",children:[e.jsx(xe,{className:"h-3 w-3"}),"",Y.allocatedRevenue.toLocaleString()," revenue"]})]},P)})})]})]})]})}),e.jsx(we,{value:"revenue",className:"space-y-6",children:e.jsx(Rp,{project:t,users:s,currentUser:r,onUpdateProject:n})}),e.jsxs(we,{value:"files",className:"space-y-6",children:[D&&e.jsx(Ip,{projectId:t.id,currentUserId:r.id,onFilesUploaded:F}),t.attachments&&t.attachments.length>0?e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Project Files (",t.attachments.length,")"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:t.attachments.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:P.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[M(P.size),"  Uploaded"," ",new Date(P.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"ghost",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},P.id))})})]}):!y&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No files uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"No files have been uploaded to this project yet."})]})})})]}),e.jsxs(we,{value:"documentation",className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5"}),"Google Drive Documentation"]})}),e.jsx(V,{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"docs-url",children:"Documentation URL"}),e.jsx(U,{id:"docs-url",value:l.documentationUrl||"",onChange:P=>b(P.target.value),placeholder:"https://drive.google.com/drive/folders/..."})]}):e.jsx(e.Fragment,{children:t.documentationUrl?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cs,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Project Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Google Drive folder with complete project documentation"})]})]}),e.jsx(T,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:t.documentationUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(hc,{className:"h-4 w-4 mr-2"}),"Open"]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No documentation link"}),e.jsx("p",{className:"text-muted-foreground",children:"No Google Drive documentation has been added to this project."})]})})})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Documentation Guidelines"})}),e.jsxs(V,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"The Google Drive folder should contain:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[e.jsx("li",{children:" Project specifications and requirements"}),e.jsx("li",{children:" Technical drawings and blueprints"}),e.jsx("li",{children:" Material lists and supplier information"}),e.jsx("li",{children:" Quality control checklists"}),e.jsx("li",{children:" Progress reports and photos"}),e.jsx("li",{children:" Client communication records"})]})]})]})]})]})})]})})}class Fp{constructor(){ns(this,"notifications",[])}async sendProjectAssignment(s,r,n,a){const o={id:`email-${Date.now()}`,to:n.email,from:a.email,subject:`New Project Assignment: ${r.name}`,content:`
        <h2>New Project Assignment</h2>
        <p>Hello ${n.name},</p>
        
        <p>You have been assigned to a new project by ${a.name}:</p>
        
        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
          <h3>${r.name}</h3>
          <p><strong>Description:</strong> ${r.description}</p>
          <p><strong>Client:</strong> ${r.clientName}</p>
          <p><strong>Start Date:</strong> ${new Date(r.startDate).toLocaleDateString()}</p>
          <p><strong>End Date:</strong> ${new Date(r.endDate).toLocaleDateString()}</p>
          <p><strong>Priority:</strong> ${r.priority}</p>
        </div>
        
        ${s.message?`
          <p><strong>Message from supervisor:</strong></p>
          <blockquote style="border-left: 4px solid #0066cc; padding-left: 15px; margin: 15px 0; font-style: italic;">
            ${s.message}
          </blockquote>
        `:""}
        
        <p>Please log into the Ehub Project Management system to accept or decline this assignment.</p>
        
        <p>Best regards,<br/>
        ${a.name}<br/>
        Ehub Project Management Team</p>
      `,type:"assignment",sentAt:new Date().toISOString(),projectId:r.id};return this.notifications.push(o),console.log(` Email sent to ${n.email}: ${o.subject}`),!0}async sendTaskAssignment(s,r,n,a){const o={id:`email-${Date.now()}`,to:n.email,from:a.email,subject:`New Task Assignment: ${s.title}`,content:`
        <h2>New Task Assignment</h2>
        <p>Hello ${n.name},</p>
        
        <p>You have been assigned a new task by ${a.name}:</p>
        
        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
          <h3>${s.title}</h3>
          <p><strong>Description:</strong> ${s.description}</p>
          <p><strong>Project:</strong> ${r.name}</p>
          <p><strong>Due Date:</strong> ${new Date(s.dueDate).toLocaleDateString()}</p>
          <p><strong>Priority:</strong> ${s.priority}</p>
          <p><strong>Estimated Hours:</strong> ${s.estimatedHours}</p>
          ${s.materials?`<p><strong>Materials:</strong> ${s.materials.join(", ")}</p>`:""}
        </div>
        
        <p>Please log into the Ehub Project Management system to view task details and update progress.</p>
        
        <p>Best regards,<br/>
        ${a.name}<br/>
        Ehub Project Management Team</p>
      `,type:"task_assignment",sentAt:new Date().toISOString(),projectId:r.id,taskId:s.id};return this.notifications.push(o),console.log(` Email sent to ${n.email}: ${o.subject}`),!0}async sendProjectUpdate(s,r,n,a){const o=r.filter(i=>i.id===s.supervisorId||s.fabricatorIds.includes(i.id)||i.role==="admin");for(const i of o){const l={id:`email-${Date.now()}-${i.id}`,to:i.email,from:"noreply@ehub.com",subject:`Project Update: ${s.name}`,content:`
          <h2>Project Update</h2>
          <p>Hello ${i.name},</p>
          
          <p>There has been an update to project "${s.name}" by ${a.name}:</p>
          
          <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <h3>${s.name}</h3>
            <p><strong>Status:</strong> ${s.status}</p>
            <p><strong>Progress:</strong> ${s.progress}%</p>
            <p><strong>Client:</strong> ${s.clientName}</p>
            <p><strong>Updated by:</strong> ${a.name}</p>
          </div>
          
          <p>Log into the Ehub Project Management system to view full project details.</p>
          
          <p>Best regards,<br/>
          Ehub Project Management Team</p>
        `,type:"project_update",sentAt:new Date().toISOString(),projectId:s.id};this.notifications.push(l),console.log(` Email sent to ${i.email}: ${l.subject}`)}return!0}getNotificationsForUser(s){return this.notifications.filter(r=>r.to===s).sort((r,n)=>new Date(n.sentAt).getTime()-new Date(r.sentAt).getTime())}getAllNotifications(){return this.notifications.sort((s,r)=>new Date(r.sentAt).getTime()-new Date(s.sentAt).getTime())}clearNotifications(){this.notifications=[]}}const gs=new Fp;function Lp({open:t,onClose:s,project:r,onClientCreated:n}){const[a,o]=u.useState({name:"",email:"",phone:"",password:""}),[i,l]=u.useState({}),[d,c]=u.useState(!1),[m,p]=u.useState(null),[f,h]=u.useState(!1),[g,x]=u.useState(null),v=!!(r.clientName&&r.clientName.trim().length>0),y=()=>{const w={};return a.name.trim()||(w.name="Client name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(w.email="Please enter a valid email address"):w.email="Email is required",a.password.trim()?a.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",a.phone&&!/^(\+639|09)\d{9}$/.test(a.phone)&&(w.phone="Please enter a valid Philippine phone number"),l(w),Object.keys(w).length===0},j=(w,A)=>{o(C=>({...C,[w]:A})),i[w]&&l(C=>({...C,[w]:""}))},D=async w=>{if(w.preventDefault(),v){l({submit:"A client is already assigned to this project."});return}if(y()){c(!0);try{const A=await ye.createClient({...a,projectId:r.id,projectName:r.name});if(A.data)p(A.data),n(A.data);else throw new Error(A.error||"Failed to create client account")}catch(A){l({submit:A instanceof Error?A.message:"Failed to create client account"})}finally{c(!1)}}},N=(w,A)=>{navigator.clipboard.writeText(w),x(A),setTimeout(()=>x(null),2e3)},M=()=>{o({name:"",email:"",phone:"",password:""}),l({}),p(null),h(!1),s()};return m?e.jsx(Fe,{open:t,onOpenChange:M,children:e.jsxs(Me,{className:"max-w-md",children:[e.jsxs(Te,{children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Es,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Ee,{className:"text-center",children:"Client Account Created!"}),e.jsxs(Ie,{className:"text-center",children:["Client account has been successfully created for ",r.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ae,{children:e.jsxs(_e,{children:["An email with login credentials has been sent to ",e.jsx("strong",{children:m.email})]})}),e.jsxs("div",{className:"space-y-3 p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm",children:"Client Login Credentials:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client ID"}),e.jsx("p",{className:"font-mono text-sm",children:m.secureId})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>N(m.secureId,"secureId"),children:g==="secureId"?e.jsx(Es,{className:"h-4 w-4 text-green-600"}):e.jsx(Zs,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:m.email})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>N(m.email,"email"),children:g==="email"?e.jsx(Es,{className:"h-4 w-4 text-green-600"}):e.jsx(Zs,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Password"}),e.jsx("p",{className:"font-mono text-sm",children:""})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"As set"})]})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Access Level:"})," Client can view project documentation and progress reports only."]})}),e.jsx(T,{onClick:M,className:"w-full",children:"Done"})]})]})}):e.jsx(Fe,{open:t,onOpenChange:M,children:e.jsxs(Me,{className:"max-w-md",children:[e.jsxs(Te,{children:[e.jsxs(Ee,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Create Client Account"]}),e.jsxs(Ie,{children:["Create a client account for ",e.jsx("strong",{children:r.name})," to allow them to track progress and view documentation."]})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[v&&e.jsx(Ae,{children:e.jsxs(_e,{children:["A client is already assigned to this project (",r.clientName,"). You cannot create another client."]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Client Name *"}),e.jsx(U,{id:"name",placeholder:"Enter client's full name",value:a.name,onChange:w=>j("name",w.target.value),className:i.name?"border-destructive":"",disabled:v}),i.name&&e.jsx("p",{className:"text-sm text-destructive",children:i.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"email",children:"Email Address *"}),e.jsx(U,{id:"email",type:"email",placeholder:"client@example.com",value:a.email,onChange:w=>j("email",w.target.value),className:i.email?"border-destructive":"",disabled:v}),i.email&&e.jsx("p",{className:"text-sm text-destructive",children:i.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"phone",children:"Phone Number (Optional)"}),e.jsx(U,{id:"phone",type:"tel",placeholder:"+639123456789 or 09123456789",value:a.phone,onChange:w=>j("phone",w.target.value),className:i.phone?"border-destructive":"",disabled:v}),i.phone&&e.jsx("p",{className:"text-sm text-destructive",children:i.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{id:"password",type:f?"text":"password",placeholder:"Create a secure password",value:a.password,onChange:w=>j("password",w.target.value),className:i.password?"border-destructive":"",disabled:v}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h(!f),disabled:v,children:f?e.jsx(Gt,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"})})]}),i.password&&e.jsx("p",{className:"text-sm text-destructive",children:i.password})]}),i.submit&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:i.submit})}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"The client will receive an email with their login credentials and can access project documentation and progress reports."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:M,className:"flex-1",children:"Cancel"}),e.jsx(T,{type:"submit",className:"flex-1",disabled:d||v,children:v?e.jsx(e.Fragment,{children:"Client Assigned"}):d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Create Client"]})})]})]})]})})}function Us({projects:t,users:s,currentUser:r,onCreateProject:n,onAssignFabricator:a,onUpdateProject:o,onAcceptAssignment:i,onDeclineAssignment:l,onCreateUser:d}){const[c,m]=u.useState(!1),[p,f]=u.useState(!1),[h,g]=u.useState(""),[x,v]=u.useState(""),[y,j]=u.useState(""),[D,N]=u.useState(null),[M,w]=u.useState(!1),[A,C]=u.useState(!1),[F,b]=u.useState(null),[L,P]=u.useState(new Set),[O,k]=u.useState(null),[Y,S]=u.useState(""),I=(()=>{let _;return r.role==="admin"?_=t:r.role==="supervisor"?_=t.filter(H=>H.supervisorId===r.id):r.role==="fabricator"?_=t.filter(H=>{var ae;return H.fabricatorIds.includes(r.id)||((ae=H.pendingAssignments)==null?void 0:ae.some(Q=>Q.fabricatorId===r.id&&Q.status==="pending"))}):_=t.filter(H=>H.fabricatorIds.includes(r.id)),_.filter(H=>H.status!=="completed")})(),oe=_=>L.has(_.id)||_.clientName&&_.clientName.trim().length>0?!0:s.some(H=>H.role==="client"&&H.clientProjectId===_.id),je=_=>{const H=t.find(ae=>ae.id===_);return H?s.filter(ae=>{var Q;return ae.role==="fabricator"&&!H.fabricatorIds.includes(ae.id)&&!((Q=H.pendingAssignments)!=null&&Q.some(ve=>ve.fabricatorId===ae.id&&ve.status==="pending"))}):[]},G=()=>{a&&h&&x&&(a(h,x,y||void 0),f(!1),g(""),v(""),j(""))},ge=r.role==="admin"||r.role==="supervisor",Ce=_=>{switch(_){case"0_Created":return"outline";case"1_Assigned_to_FAB":return"secondary";case"2_Ready_for_Supervisor_Review":return"destructive";case"3_Ready_for_Admin_Review":return"destructive";case"4_Ready_for_Client_Signoff":return"default";default:return"outline"}},it=_=>{switch(_){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},lt=_=>{const H=s.find(ae=>ae.id===_);return(H==null?void 0:H.name)||"Unknown Supervisor"},Ge=_=>_.map(H=>{var ae;return((ae=s.find(Q=>Q.id===H))==null?void 0:ae.name)||"Unknown"}).join(", "),Oe=_=>{if(_===0)return"0 Bytes";const H=1024,ae=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(_)/Math.log(H));return parseFloat((_/Math.pow(H,Q)).toFixed(2))+" "+ae[Q]},Xe=(_,H)=>{var ae;return(ae=_.fabricatorBudgets)==null?void 0:ae.find(Q=>Q.fabricatorId===H)},z=async _=>{let H;return n&&(H=await n(_)),H},q=_=>{N(_),w(!0)},Z=_=>{o&&(o(_),gs.sendProjectUpdate(_,s,"progress_update",r))},K=()=>t.filter(_=>_.status==="completed"||_.status==="4_Ready_for_Client_Signoff"||_.progress>=100),ee=()=>{if(!o)return;K().forEach(H=>{const ae={...H,status:"completed"};o(ae)})},he=(_,H)=>{if(!o)return;const ae={..._,status:H};o(ae),gs.sendProjectUpdate(ae,s,"status_change",r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl",children:"Projects"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and track your projects"})]}),e.jsxs("div",{className:"flex gap-2",children:[(r.role==="admin"||r.role==="supervisor")&&e.jsxs(T,{variant:"outline",onClick:ee,disabled:K().length===0,title:K().length===0?"No projects ready to archive":"",children:["Archive Completed (",K().length,")"]}),ge&&e.jsxs(T,{onClick:()=>m(!0),className:"bg-accent hover:bg-accent/90",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:I.map(_=>{var H,ae;return e.jsxs(B,{className:"hover:shadow-lg transition-all duration-200 border-0 shadow-md overflow-hidden group",children:[e.jsx("div",{className:"h-2 bg-gradient-to-r from-primary to-accent"}),e.jsx(te,{className:"bg-gradient-to-br from-primary/5 to-transparent",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(se,{className:"text-lg",children:_.name}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(re,{variant:Ce(_.status),className:"text-xs",children:_.status}),e.jsx(re,{variant:it(_.priority),className:"text-xs",children:_.priority})]})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:_.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[_.progress,"%"]})]}),e.jsx(Kt,{value:_.progress})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Client: ",_.clientName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-3 w-3"}),e.jsxs("span",{children:[new Date(_.startDate).toLocaleDateString()," - "," ",new Date(_.endDate).toLocaleDateString()]})]}),r.role==="fabricator"&&e.jsx("div",{className:"space-y-1",children:(()=>{const Q=Xe(_,r.id);return Q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["My Budget: ",Q.allocatedAmount.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Spent: ",Q.spentAmount.toLocaleString()]})]}),e.jsx("div",{className:"text-xs text-muted-foreground ml-5",children:Q.description})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Project Value: ",_.revenue.toLocaleString()]})]})})()}),r.role==="supervisor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Budget: ",_.budget.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Spent: ",_.spent.toLocaleString()]})]})]}),r.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Revenue: ",_.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Budget: ",_.budget.toLocaleString()," | Spent: ",_.spent.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Supervisor: ",lt(_.supervisorId)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Team: ",Ge(_.fabricatorIds)]})]}),_.documentationUrl&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-3 w-3"}),e.jsx("a",{href:_.documentationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:"Google Drive Documentation"})]}),_.attachments&&_.attachments.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oc,{className:"h-3 w-3"}),e.jsxs("span",{children:["Attachments (",_.attachments.length,")"]})]}),e.jsxs("div",{className:"ml-5 space-y-1",children:[_.attachments.slice(0,2).map(Q=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(be,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:Q.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",Oe(Q.size),")"]})]},Q.id)),_.attachments.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground ml-4",children:["+",_.attachments.length-2," more files"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:["Created by: ",((H=s.find(Q=>Q.id===_.createdBy))==null?void 0:H.name)||"Unknown"]})]})]}),r.role==="fabricator"&&((ae=_.pendingAssignments)==null?void 0:ae.some(Q=>Q.fabricatorId===r.id&&Q.status==="pending"))&&!_.fabricatorIds.includes(r.id)&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-300 dark:border-orange-700 rounded-lg p-4 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"New Project Assignment"})]}),_.pendingAssignments.filter(Q=>Q.fabricatorId===r.id&&Q.status==="pending").map(Q=>{const ve=s.find(zt=>zt.id===Q.assignedBy),Yr=O===`accept-${Q.id}`,Ur=O===Q.id&&!(O!=null&&O.includes("accept-"));return e.jsxs("div",{className:"space-y-3",children:[Q.message&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-md p-3 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Dc,{className:"h-4 w-4 mt-0.5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-100 mb-1",children:"Message from Supervisor:"}),e.jsx("p",{className:"text-orange-800 dark:text-orange-200",children:Q.message})]})]})}),e.jsxs("div",{className:"text-xs text-orange-700 dark:text-orange-300 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsxs("span",{children:["Assigned by: ",e.jsx("strong",{children:(ve==null?void 0:ve.name)||"Unknown Supervisor"})]})]}),!Yr&&!Ur&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{k(`accept-${Q.id}`),S("")},children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Accept Assignment"]}),e.jsxs(T,{size:"sm",variant:"outline",className:"flex-1 border-red-300 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 hover:border-red-400",onClick:()=>{k(Q.id),S("")},children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Decline Assignment"]})]}),Yr&&e.jsxs("div",{className:"space-y-3 bg-green-50 dark:bg-green-900/10 rounded-md p-3 border border-green-200 dark:border-green-800",children:[e.jsx(E,{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Accept Assignment"}),e.jsx(Ye,{value:Y,onChange:zt=>S(zt.target.value),placeholder:"Add an optional message to the supervisor...",className:"text-sm",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{k(null),S("")},children:"Cancel"}),e.jsxs(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{i&&(i(Q.id,Y.trim()||void 0),k(null),S(""))},children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Confirm Accept"]})]})]}),Ur&&e.jsxs("div",{className:"space-y-3 bg-red-50 dark:bg-red-900/10 rounded-md p-3 border border-red-200 dark:border-red-800",children:[e.jsx(E,{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Decline Assignment"}),e.jsx(Ye,{value:Y,onChange:zt=>S(zt.target.value),placeholder:"Add an optional reason for declining...",className:"text-sm",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{k(null),S("")},children:"Cancel"}),e.jsxs(T,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>{l&&(l(Q.id,Y.trim()||void 0),k(null),S(""))},children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Confirm Decline"]})]})]})]},Q.id)})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(T,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>q(_),children:"View Details"}),(r.role==="admin"||r.role==="supervisor")&&(oe(_)?e.jsxs(T,{variant:"outline",size:"sm",disabled:!0,title:"Client already assigned to this project",children:[e.jsx(ze,{className:"h-3 w-3 mr-1"}),"Client Assigned"]}):e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{b(_),C(!0)},children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Create Client"]})),(r.role==="admin"||r.role==="supervisor"&&_.supervisorId===r.id||r.role==="fabricator"&&_.createdBy===r.id)&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>q(_),children:"Edit"}),r.role==="supervisor"&&_.supervisorId===r.id&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{g(_.id),f(!0)},children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Assign"]}),r.role==="admin"&&_.status==="0_Created"&&e.jsx(T,{variant:"default",size:"sm",onClick:()=>he(_,"1_Assigned_to_FAB"),children:"Assign Project"}),r.role==="fabricator"&&_.status==="1_Assigned_to_FAB"&&e.jsx(T,{variant:"default",size:"sm",onClick:()=>he(_,"2_Ready_for_Supervisor_Review"),disabled:!(_.documentationUrl||_.attachments&&_.attachments.length>0),title:_.documentationUrl||_.attachments&&_.attachments.length>0?"":"Add documentation or files first",children:"Submit Work for Review"}),r.role==="supervisor"&&_.status==="2_Ready_for_Supervisor_Review"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"default",size:"sm",onClick:()=>he(_,"3_Ready_for_Admin_Review"),children:"Approve Work"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>he(_,"1_Assigned_to_FAB"),children:"Reject Work"})]}),r.role==="admin"&&_.status==="3_Ready_for_Admin_Review"&&e.jsx(T,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>he(_,"4_Ready_for_Client_Signoff"),children:"Approve Final"})]})]})]},_.id)})}),I.length===0&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"No projects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r.role==="admin"||r.role==="supervisor"?"Create your first project to get started.":"Wait for project assignments from your supervisor."}),ge&&e.jsxs(T,{onClick:()=>m(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})})}),c&&e.jsx(np,{currentUser:r,users:s,onCreateProject:async _=>{await z(_)},onClientCreated:d||(()=>{}),onClose:()=>m(!1)}),p&&e.jsx(Fe,{open:p,onOpenChange:f,children:e.jsxs(Me,{children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Assign Fabricator to Project"}),e.jsx(Ie,{children:"Select a fabricator to assign to this project and send them a message."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"fabricatorId",children:"Select Fabricator"}),e.jsxs(ce,{value:x,onValueChange:v,children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Choose a fabricator"})}),e.jsx(me,{children:je(h).map(_=>e.jsxs($,{value:_.id,children:[_.name," (",_.secureId,")"]},_.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"assignMessage",children:"Message (optional)"}),e.jsx(Ye,{id:"assignMessage",value:y,onChange:_=>j(_.target.value),placeholder:"Add a message for the fabricator about this project assignment...",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(T,{onClick:G,disabled:!x,children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Send Assignment"]})]})]})]})}),M&&D&&e.jsx(Op,{project:D,users:s,currentUser:r,onUpdateProject:Z,onClose:()=>w(!1)}),A&&F&&e.jsx(Lp,{open:A,onClose:()=>{C(!1),b(null)},project:F,onClientCreated:_=>{d==null||d(_),P(H=>new Set(H).add(F.id)),C(!1),b(null)}})]})}function $p({className:t,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:W("w-full caption-bottom text-sm",t),...s})})}function zp({className:t,...s}){return e.jsx("thead",{"data-slot":"table-header",className:W("[&_tr]:border-b",t),...s})}function Wp({className:t,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:W("[&_tr:last-child]:border-0",t),...s})}function In({className:t,...s}){return e.jsx("tr",{"data-slot":"table-row",className:W("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function bt({className:t,...s}){return e.jsx("th",{"data-slot":"table-head",className:W("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function yt({className:t,...s}){return e.jsx("td",{"data-slot":"table-cell",className:W("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Bp(t){const s={admin:"ADMID",supervisor:"SUPID",fabricator:"FABID"},r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let a=0;a<8;a++)n+=r.charAt(Math.floor(Math.random()*r.length));return`${s[t]}-${n}`}function Vp(){const t=new Date().getFullYear().toString().slice(-2),s=Math.floor(Math.random()*9999).toString().padStart(4,"0");return`EMP${t}${s}`}function qp({onSignup:t,onClose:s}){const[r,n]=u.useState({name:"",email:"",password:"",phone:"",department:""}),[a,o]=u.useState({}),[i,l]=u.useState(!1),d=["Production","Quality Control","Operations","Manufacturing","Engineering","Safety","Maintenance"],c=()=>{const f={};return r.name.trim()||(f.name="Full name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(f.email="Please enter a valid email address"):f.email="Email is required",r.password.trim()?r.password.length<6&&(f.password="Password must be at least 6 characters"):f.password="Password is required",r.phone.trim()?/^(\+639|09)\d{9}$/.test(r.phone)||(f.phone="Please enter a valid Philippine phone number"):f.phone="Phone number is required",r.department||(f.department="Department selection is required"),o(f),Object.keys(f).length===0},m=(f,h)=>{n(g=>({...g,[f]:h})),a[f]&&o(g=>({...g,[f]:""}))},p=async f=>{if(f.preventDefault(),!!c()){l(!0);try{const h={id:`user-${Date.now()}`,name:r.name,email:r.email.toLowerCase(),role:"supervisor",school:r.department,secureId:Bp("supervisor"),employeeNumber:Vp(),phone:r.phone,password:r.password};t(h)}catch(h){o({submit:h instanceof Error?h.message:"Failed to create supervisor account"})}finally{l(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(B,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(te,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-6 w-6"}),e.jsx(se,{children:"Create Supervisor Account"})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(rt,{className:"h-4 w-4"})})]}),e.jsx(Yt,{children:"Add a new supervisor to the system"})]}),e.jsx(V,{className:"space-y-4",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Full Name"}),e.jsx(U,{id:"name",type:"text",placeholder:"Enter supervisor's full name",value:r.name,onChange:f=>m("name",f.target.value),className:a.name?"border-destructive":""}),a.name&&e.jsx("p",{className:"text-sm text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"email",children:"Email Address"}),e.jsx(U,{id:"email",type:"email",placeholder:"Enter supervisor's email",value:r.email,onChange:f=>m("email",f.target.value),className:a.email?"border-destructive":""}),a.email&&e.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"password",children:"Password"}),e.jsx(U,{id:"password",type:"password",placeholder:"Enter password",value:r.password,onChange:f=>m("password",f.target.value),className:a.password?"border-destructive":""}),a.password&&e.jsx("p",{className:"text-sm text-destructive",children:a.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"phone",children:"Phone Number"}),e.jsx(U,{id:"phone",type:"tel",placeholder:"+639123456789 or 09123456789",value:r.phone,onChange:f=>m("phone",f.target.value),className:a.phone?"border-destructive":""}),a.phone&&e.jsx("p",{className:"text-sm text-destructive",children:a.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"department",children:"Department"}),e.jsxs(ce,{value:r.department,onValueChange:f=>m("department",f),children:[e.jsx(ue,{className:a.department?"border-destructive":"",children:e.jsx(de,{placeholder:"Select department"})}),e.jsx(me,{children:d.map(f=>e.jsx($,{value:f,children:f},f))})]}),a.department&&e.jsx("p",{className:"text-sm text-destructive",children:a.department})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Account Information"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"}),e.jsx(re,{variant:"default",children:"Supervisor"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Secure ID:"}),e.jsx("span",{className:"font-mono text-xs",children:"Auto-generated"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created by:"}),e.jsx("span",{className:"text-xs",children:"Administrator"})]})]})]}),a.submit&&e.jsx(Ae,{variant:"destructive",children:e.jsx(_e,{children:a.submit})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:i,children:"Cancel"}),e.jsx(T,{type:"submit",className:"flex-1",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Create Supervisor"]})})]})]})})]})})}function Hp({users:t,setUsers:s,currentUser:r}){const[n,a]=u.useState(!1),[o,i]=u.useState(!1),[l,d]=u.useState(null),[c,m]=u.useState(!1),p=j=>{s([...t,j]),a(!1)},f=j=>{d({...j}),m(!0)},h=()=>{l&&(s(t.map(j=>j.id===l.id?l:j)),m(!1),d(null))},g=j=>{window.confirm("Are you sure you want to deactivate this user?")&&s(t.filter(D=>D.id!==j))},x=()=>{m(!1),d(null)},v=j=>{switch(j){case"admin":return"destructive";case"supervisor":return"default";case"fabricator":return"secondary";default:return"outline"}},y=r.role==="admin";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{children:"User Management"}),y&&e.jsxs(T,{onClick:()=>a(!0),children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Add Supervisor"]})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(se,{children:"System Users"}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>i(!o),children:[o?e.jsx(Gt,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"}),o?"Hide":"Show"," Secure IDs"]})]})}),e.jsx(V,{children:e.jsxs($p,{children:[e.jsx(zp,{children:e.jsxs(In,{children:[e.jsx(bt,{children:"Name"}),e.jsx(bt,{children:"Role"}),e.jsx(bt,{children:"School/Institution"}),e.jsx(bt,{children:"Contact"}),o&&e.jsx(bt,{children:"Secure ID"}),e.jsx(bt,{children:"Employee #"}),r.role==="admin"&&e.jsx(bt,{children:"Actions"})]})}),e.jsx(Wp,{children:t.map(j=>e.jsxs(In,{children:[e.jsx(yt,{children:e.jsxs("div",{children:[e.jsx("div",{children:j.name}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(er,{className:"h-3 w-3"}),j.email]})]})}),e.jsx(yt,{children:e.jsx(re,{variant:v(j.role),children:j.role.toUpperCase()})}),e.jsx(yt,{children:j.school}),e.jsx(yt,{children:e.jsxs("div",{className:"space-y-1",children:[j.phone&&e.jsxs("div",{className:"text-sm flex items-center gap-1",children:[e.jsx(Lc,{className:"h-3 w-3"}),j.phone]}),j.gcashNumber&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["GCash: ",j.gcashNumber]})]})}),o&&e.jsx(yt,{children:e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:j.secureId})}),e.jsx(yt,{children:e.jsx("code",{className:"text-xs",children:j.employeeNumber})}),r.role==="admin"&&e.jsx(yt,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>f(j),children:"Edit"}),j.id!==r.id&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>g(j.id),children:"Deactivate"})]})})]},j.id))})]})})]}),!y&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ct,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"Limited Access"}),e.jsx("p",{className:"text-muted-foreground",children:"Only administrators can manage users and create supervisor accounts."})]})})}),n&&e.jsx(qp,{onSignup:p,onClose:()=>a(!1)}),c&&l&&e.jsx(Fe,{open:c,onOpenChange:m,children:e.jsxs(Me,{children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Edit User"}),e.jsx(Ie,{children:"Update user information and settings."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"name",children:"Name"}),e.jsx(U,{id:"name",value:l.name||"",onChange:j=>d({...l,name:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"email",children:"Email"}),e.jsx(U,{id:"email",value:l.email||"",onChange:j=>d({...l,email:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"phone",children:"Phone"}),e.jsx(U,{id:"phone",value:l.phone||"",onChange:j=>d({...l,phone:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"gcashNumber",children:"GCash Number"}),e.jsx(U,{id:"gcashNumber",value:l.gcashNumber||"",onChange:j=>d({...l,gcashNumber:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"school",children:"School/Institution"}),e.jsx(U,{id:"school",value:l.school||"",onChange:j=>d({...l,school:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"role",children:"Role"}),e.jsxs(ce,{value:l.role,onValueChange:j=>d({...l,role:j}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"admin",children:"Admin"}),e.jsx($,{value:"supervisor",children:"Supervisor"}),e.jsx($,{value:"fabricator",children:"Fabricator"}),e.jsx($,{value:"client",children:"Client"})]})]})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"secureId",children:"Secure ID"}),e.jsx(U,{id:"secureId",value:l.secureId||"",onChange:j=>d({...l,secureId:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"employeeNumber",children:"Employee #"}),e.jsx(U,{id:"employeeNumber",value:l.employeeNumber||"",onChange:j=>d({...l,employeeNumber:j.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(T,{variant:"outline",onClick:x,children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(T,{onClick:h,children:[e.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})]})}function Yp({projects:t,companyRevenue:s,currentUser:r}){const a=r.role==="admin"?t:r.role==="supervisor"?t.filter(f=>f.supervisorId===r.id):t.filter(f=>f.fabricatorIds.includes(r.id)),o=r.role==="admin",i=r.role==="admin"||r.role==="supervisor",l=a.reduce((f,h)=>f+h.revenue,0),d=a.reduce((f,h)=>f+h.budget,0),c=a.reduce((f,h)=>f+h.spent,0),m=l-c,p=s[0];if(r.role==="fabricator"){const f=a.reduce((h,g)=>{var v;const x=(v=g.fabricatorBudgets)==null?void 0:v.find(y=>y.fabricatorId===r.id);return h+((x==null?void 0:x.allocatedRevenue)||0)},0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{children:"My Revenue & Projects"}),e.jsxs(B,{className:"bg-accent/10 border-accent",children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-accent"}),"Total Allocated Revenue"]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-3xl text-accent",children:["",f.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["From ",a.length," active project",a.length!==1?"s":""]})]})]}),e.jsx("div",{className:"grid gap-4",children:a.map(h=>{var y;const g=(y=h.fabricatorBudgets)==null?void 0:y.find(j=>j.fabricatorId===r.id),x=(g==null?void 0:g.allocatedRevenue)||0,v=h.revenue>0?(x/h.revenue*100).toFixed(1):"0";return e.jsxs(B,{children:[e.jsx(te,{className:"pb-3",children:e.jsxs(se,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:h.name}),x>0&&e.jsxs("span",{className:"text-accent text-base",children:["",x.toLocaleString()]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Client"})]}),e.jsx("p",{children:h.clientName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Project Value"})]}),e.jsxs("p",{className:"text-lg",children:["",h.revenue.toLocaleString()]})]})]}),x>0&&e.jsx("div",{className:"mt-4 p-3 bg-accent/10 rounded-lg border border-accent/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Allocated Revenue"}),e.jsxs("p",{className:"text-xl text-accent",children:["",x.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Share"}),e.jsxs("p",{className:"text-xl",children:[v,"%"]})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project Progress"}),e.jsxs("span",{children:[h.progress,"%"]})]})})]})]},h.id)})})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{children:"Revenue & Financial Overview"}),i&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Project Revenue"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl",children:["",l.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",a.length," projects"]})]})]}),e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Project Budget"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl",children:["",d.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total allocated budget"})]})]}),e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Project Spent"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl",children:["",c.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(c/d*100),"% of budget"]})]})]}),e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Project Profit"}),m>=0?e.jsx(tr,{className:"h-4 w-4 text-green-500"}):e.jsx(Qc,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:`text-2xl ${m>=0?"text-green-500":"text-red-500"}`,children:["",m.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue - Expenses"})]})]})]}),o&&p&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"mb-4",children:"Company Revenue Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Total Company Revenue"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl",children:["",p.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Q",p.quarter," ",p.year]})]})]}),e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Total Expenses"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl",children:["",p.totalExpenses.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Operating costs"})]})]}),e.jsxs(B,{children:[e.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm",children:"Net Profit"}),e.jsx(tr,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl text-green-500",children:["",p.netProfit.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.projectsCompleted," projects completed"]})]})]})]})]})}),i&&e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Project Financial Details"})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-4",children:a.map(f=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{children:f.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.clientName})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsxs("p",{className:"text-sm",children:["Revenue: ",f.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Spent: ",f.spent.toLocaleString()," / ",f.budget.toLocaleString()]})]})]},f.id))})})]})]})}function Up({currentUser:t,projects:s,workLogs:r,materials:n,onAddWorkLog:a,onUpdateProject:o}){const[i,l]=u.useState(""),[d,c]=u.useState(!1),[m,p]=u.useState({date:new Date().toISOString().split("T")[0],description:"",progressPercentage:"",materialsUsed:[]}),f=s.filter(C=>C.fabricatorIds.includes(t.id)&&C.status!=="pending-assignment"),h=i?r.filter(C=>C.projectId===i&&C.fabricatorId===t.id):r.filter(C=>C.fabricatorId===t.id),g=i?n.filter(C=>C.projectId===i||!C.projectId):n,x=(C,F)=>{p(b=>({...b,[C]:F}))},v=C=>{p(F=>({...F,materialsUsed:F.materialsUsed.includes(C)?F.materialsUsed.filter(b=>b!==C):[...F.materialsUsed,C]}))},y=C=>{if(C.preventDefault(),!i){alert("Please select a project first");return}const F={projectId:i,fabricatorId:t.id,date:m.date,hoursWorked:0,description:m.description,progressPercentage:parseInt(m.progressPercentage),materials:m.materialsUsed.length>0?m.materialsUsed:void 0};a(F),p({date:new Date().toISOString().split("T")[0],description:"",progressPercentage:"",materialsUsed:[]}),c(!1)},j=C=>{const F=s.find(b=>b.id===C);return(F==null?void 0:F.progress)||0},D=()=>s.find(C=>C.id===i),N=()=>{const C=D();if(!C)return!1;const F=Array.isArray(C.attachments)&&C.attachments.length>0,b=!!C.documentationUrl&&C.documentationUrl.trim().length>0;return F||b},M=()=>{var Y;const C=D();if(!C)return!1;const b=["1_Assigned_to_FAB","in-progress","planning"].includes(C.status),P=["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"].includes(C.status),O=N(),k=C.progress>=100;return console.log("Submit button check:",{projectId:C.id,status:C.status,statusMatch:b&&!P,progress:C.progress,hasProgress:k,hasDocs:O,attachments:((Y=C.attachments)==null?void 0:Y.length)||0,docUrl:C.documentationUrl,canSubmit:b&&!P&&O&&k}),b&&!P&&O&&k},w=()=>{const C=D();if(!C||!o)return;const F={...C,status:"2_Ready_for_Supervisor_Review"};o(F)},A=C=>{const F=s.find(b=>b.id===C);return(F==null?void 0:F.name)||"Unknown Project"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Work Log & Progress Reports"]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your daily work progress and material usage"})]}),e.jsxs(T,{onClick:()=>c(!0),disabled:!i,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Work Log"]})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5"}),"Select Project"]})}),e.jsx(V,{children:e.jsxs(ce,{value:i,onValueChange:l,children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Choose a project to log work for"})}),e.jsx(me,{children:f.map(C=>e.jsx($,{value:C.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:C.name}),e.jsxs(re,{variant:"outline",className:"ml-2",children:[C.progress,"% Complete"]})]})},C.id))})]})})]}),i&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Project Progress"})]}),e.jsxs("p",{className:"text-2xl",children:[j(i),"%"]})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Work Entries"})]}),e.jsx("p",{className:"text-2xl",children:h.length})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Documentation"})]}),e.jsx("p",{className:"text-2xl",children:N()?"Ready":"Missing"})]})})]}),d&&i&&e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Add Work Log Entry"})}),e.jsx(V,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"date",children:"Date"}),e.jsx(U,{id:"date",type:"date",value:m.date,onChange:C=>x("date",C.target.value),required:!0})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"progress",children:"Progress Contribution (%)"}),e.jsx(U,{id:"progress",type:"number",min:"0",max:"100",placeholder:"5",value:m.progressPercentage,onChange:C=>x("progressPercentage",C.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How much of the project does this work session complete?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Work Description"}),e.jsx(Ye,{id:"description",placeholder:"Describe the work performed, challenges faced, and achievements...",value:m.description,onChange:C=>x("description",C.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Materials Used (Optional)"}),e.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:g.map(C=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`material-${C.id}`,checked:m.materialsUsed.includes(C.name),onChange:()=>v(C.name),className:"rounded"}),e.jsx(E,{htmlFor:`material-${C.id}`,className:"text-sm cursor-pointer",children:C.name})]},C.id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(T,{type:"submit",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Work Log"]})]})]})})]}),i&&e.jsx(B,{children:e.jsx(V,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("div",{children:"Upload files in the Project Details  Files or add a documentation link."}),(()=>{var F;const C=D();return C?(N(),C.progress<100,C.status,e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Progress: ",e.jsxs("strong",{children:[C.progress,"%"]})," ",C.progress<100&&"(Must be 100% to submit)"]}),e.jsxs("div",{children:["Status: ",e.jsx("strong",{children:C.status})," ",!["1_Assigned_to_FAB","in-progress","planning"].includes(C.status)&&!["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"].includes(C.status)&&"(Status must allow submission)"]}),e.jsxs("div",{children:["Documentation: ",e.jsx("strong",{children:N()?"Ready":"Missing"}),!N()&&e.jsxs("span",{className:"ml-1",children:["(",((F=C.attachments)==null?void 0:F.length)||0," files, ",C.documentationUrl?"has link":"no link",")"]})]})]})):null})()]}),e.jsx(T,{onClick:w,disabled:!M(),className:M()?"bg-green-600 hover:bg-green-700":"",title:(()=>{const C=D();if(!C)return"Select a project first";const F=["1_Assigned_to_FAB","in-progress","planning"],b=["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"];return!F.includes(C.status)||b.includes(C.status)?`Status must allow submission (currently: ${C.status})`:N()?C.progress<100?`Progress must be 100% (currently: ${C.progress}%)`:"Click to submit for supervisor review":"Add documentation (files or link) before submitting"})(),children:"Submit for Supervisor Review"})]})})}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Work Log History",i&&e.jsx(re,{variant:"outline",children:A(i)})]})}),e.jsx(V,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No work logs found"}),e.jsx("p",{className:"text-muted-foreground",children:i?"Start logging your work progress for this project.":"Select a project to view your work logs."})]}):e.jsx("div",{className:"space-y-4",children:h.sort((C,F)=>new Date(F.date).getTime()-new Date(C.date).getTime()).map(C=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(C.date).toLocaleDateString()}),e.jsxs(re,{variant:"outline",children:["+",C.progressPercentage,"% progress"]})]}),!i&&e.jsx(re,{variant:"outline",children:A(C.projectId)})]}),e.jsx("p",{className:"text-sm mb-3",children:C.description}),C.materials&&C.materials.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Materials Used:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:C.materials.map((F,b)=>e.jsx(re,{variant:"outline",className:"text-xs",children:F},b))})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Logged on ",new Date(C.createdAt).toLocaleString()]})]},C.id))})})]})]})}function Gp({currentUser:t,projects:s,materials:r,onAddMaterial:n,onUpdateMaterial:a,onDeleteMaterial:o}){const[i,l]=u.useState(!1),[d,c]=u.useState(""),[m,p]=u.useState("all"),[f,h]=u.useState(""),[g,x]=u.useState({name:"",description:"",quantity:"",unit:"",cost:"",supplier:"",status:"ordered",projectId:"",category:""}),v=s.filter(b=>b.fabricatorIds.includes(t.id)&&b.status!=="pending-assignment"),y=r.filter(b=>{var L,P;return(b.addedBy===t.id||!b.projectId)&&(d===""||d==="all"||b.projectId===d||d==="general"&&!b.projectId)&&(m==="all"||b.status===m)&&(f===""||b.name.toLowerCase().includes(f.toLowerCase())||((L=b.description)==null?void 0:L.toLowerCase().includes(f.toLowerCase()))||((P=b.category)==null?void 0:P.toLowerCase().includes(f.toLowerCase())))}),j=["Raw Materials","Structural Materials","Consumables","Tools & Equipment","Safety","Electrical","Finishing Materials","Hardware","Other"],D=["pieces","kg","lbs","meters","feet","inches","liters","gallons","sets","rolls","sheets","tubes","boxes","bags","cans"],N=(b,L)=>{x(P=>({...P,[b]:L}))},M=b=>{b.preventDefault();const L={name:g.name,description:g.description||void 0,quantity:parseFloat(g.quantity),unit:g.unit,cost:parseFloat(g.cost),supplier:g.supplier||void 0,status:g.status,projectId:g.projectId&&g.projectId!=="none"?g.projectId:void 0,addedBy:t.id,category:g.category||void 0};n(L),x({name:"",description:"",quantity:"",unit:"",cost:"",supplier:"",status:"ordered",projectId:"none",category:""}),l(!1)},w=b=>{switch(b){case"ordered":return e.jsx(ed,{className:"h-4 w-4"});case"delivered":return e.jsx(ze,{className:"h-4 w-4 text-green-600"});case"in-use":return e.jsx(xt,{className:"h-4 w-4 text-orange-600"});case"depleted":return e.jsx(ms,{className:"h-4 w-4 text-red-600"});default:return e.jsx(wt,{className:"h-4 w-4"})}},A=b=>{switch(b){case"ordered":return"secondary";case"delivered":return"default";case"in-use":return"secondary";case"depleted":return"destructive";default:return"outline"}},C=b=>{if(!b)return"General Inventory";const L=s.find(P=>P.id===b);return(L==null?void 0:L.name)||"Unknown Project"},F=()=>y.reduce((b,L)=>b+L.cost*L.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5"}),"Materials Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage materials and inventory for your projects"})]}),e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Material"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Total Items"})]}),e.jsx("p",{className:"text-2xl",children:y.length})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Total Value"})]}),e.jsxs("p",{className:"text-2xl",children:["",F().toLocaleString()]})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"In Use"})]}),e.jsx("p",{className:"text-2xl",children:r.filter(b=>b.status==="in-use"&&b.addedBy===t.id).length})]})}),e.jsx(B,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm",children:"Depleted"})]}),e.jsx("p",{className:"text-2xl",children:r.filter(b=>b.status==="depleted"&&b.addedBy===t.id).length})]})})]}),e.jsx(B,{children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Search Materials"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bc,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(U,{placeholder:"Search by name, description...",value:f,onChange:b=>h(b.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Project Filter"}),e.jsxs(ce,{value:d,onValueChange:c,children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"All Projects"})}),e.jsxs(me,{children:[e.jsx($,{value:"all",children:"All Projects"}),e.jsx($,{value:"general",children:"General Inventory"}),v.map(b=>e.jsx($,{value:b.id,children:b.name},b.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Status Filter"}),e.jsxs(ce,{value:m,onValueChange:b=>p(b),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"all",children:"All Status"}),e.jsx($,{value:"ordered",children:"Ordered"}),e.jsx($,{value:"delivered",children:"Delivered"}),e.jsx($,{value:"in-use",children:"In Use"}),e.jsx($,{value:"depleted",children:"Depleted"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(T,{variant:"outline",onClick:()=>{c("all"),p("all"),h("")},children:"Clear Filters"})})]})})}),i&&e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{children:"Add New Material"})}),e.jsx(V,{children:e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Material Name *"}),e.jsx(U,{id:"name",value:g.name,onChange:b=>N("name",b.target.value),placeholder:"Enter material name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"category",children:"Category"}),e.jsxs(ce,{value:g.category,onValueChange:b=>N("category",b),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select category"})}),e.jsx(me,{children:j.map(b=>e.jsx($,{value:b,children:b},b))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description"}),e.jsx(Ye,{id:"description",value:g.description,onChange:b=>N("description",b.target.value),placeholder:"Optional material description",rows:2})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"quantity",children:"Quantity *"}),e.jsx(U,{id:"quantity",type:"number",min:"0",step:"0.01",value:g.quantity,onChange:b=>N("quantity",b.target.value),placeholder:"0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"unit",children:"Unit *"}),e.jsxs(ce,{value:g.unit,onValueChange:b=>N("unit",b),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select unit"})}),e.jsx(me,{children:D.map(b=>e.jsx($,{value:b,children:b},b))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"cost",children:"Cost per Unit () *"}),e.jsx(U,{id:"cost",type:"number",min:"0",step:"0.01",value:g.cost,onChange:b=>N("cost",b.target.value),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"supplier",children:"Supplier"}),e.jsx(U,{id:"supplier",value:g.supplier,onChange:b=>N("supplier",b.target.value),placeholder:"Enter supplier name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"status",children:"Status *"}),e.jsxs(ce,{value:g.status,onValueChange:b=>N("status",b),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"ordered",children:"Ordered"}),e.jsx($,{value:"delivered",children:"Delivered"}),e.jsx($,{value:"in-use",children:"In Use"}),e.jsx($,{value:"depleted",children:"Depleted"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"projectId",children:"Assign to Project"}),e.jsxs(ce,{value:g.projectId,onValueChange:b=>N("projectId",b),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"General inventory (no project)"})}),e.jsxs(me,{children:[e.jsx($,{value:"none",children:"General Inventory"}),v.map(b=>e.jsx($,{value:b.id,children:b.name},b.id))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(T,{type:"submit",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Material"]})]})]})})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5"}),"Materials Inventory",e.jsxs(re,{variant:"outline",children:[y.length," items"]})]})}),e.jsx(V,{children:y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No materials found"}),e.jsx("p",{className:"text-muted-foreground",children:"Start adding materials to track your inventory."})]}):e.jsx("div",{className:"space-y-4",children:y.map(b=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w(b.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:b.name}),b.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{variant:A(b.status),children:b.status}),b.category&&e.jsx(re,{variant:"outline",children:b.category})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Quantity"}),e.jsxs("p",{children:[b.quantity," ",b.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Unit Cost"}),e.jsx("p",{children:e.jsxs("span",{className:"text-lg",children:["",b.cost.toLocaleString()]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Value"}),e.jsxs("p",{children:["",(b.cost*b.quantity).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Project"}),e.jsx("p",{children:C(b.projectId)})]})]}),b.supplier&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supplier: ",b.supplier]})}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Added on ",new Date(b.addedAt).toLocaleDateString()]})]},b.id))})})]})]})}function Xp(t,s=[]){let r=[];function n(o,i){const l=u.createContext(i),d=r.length;r=[...r,i];const c=p=>{var y;const{scope:f,children:h,...g}=p,x=((y=f==null?void 0:f[t])==null?void 0:y[d])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:h})};c.displayName=o+"Provider";function m(p,f){var x;const h=((x=f==null?void 0:f[t])==null?void 0:x[d])||l,g=u.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[c,m]}const a=()=>{const o=r.map(i=>u.createContext(i));return function(l){const d=(l==null?void 0:l[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,Kp(a,...s)]}function Kp(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:d,scopeName:c})=>{const p=d(o)[`__scope${c}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}function Rn(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Qp(...t){return s=>{let r=!1;const n=t.map(a=>{const o=Rn(a,s);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():Rn(t[a],null)}}}}function ai(...t){return u.useCallback(Qp(...t),t)}function Jp(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}var oi="AlertDialog",[Zp]=Xp(oi,[Gn]),ot=Gn(),ii=t=>{const{__scopeAlertDialog:s,...r}=t,n=ot(s);return e.jsx(ur,{...n,...r,modal:!0})};ii.displayName=oi;var eg="AlertDialogTrigger",tg=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ot(r);return e.jsx(Gi,{...a,...n,ref:s})});tg.displayName=eg;var sg="AlertDialogPortal",li=t=>{const{__scopeAlertDialog:s,...r}=t,n=ot(s);return e.jsx(dr,{...n,...r})};li.displayName=sg;var rg="AlertDialogOverlay",ci=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ot(r);return e.jsx(vs,{...a,...n,ref:s})});ci.displayName=rg;var Et="AlertDialogContent",[ng,ag]=Zp(Et),di=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,o=ot(r),i=u.useRef(null),l=ai(s,i),d=u.useRef(null);return e.jsx(Ui,{contentName:Et,titleName:ui,docsSlug:"alert-dialog",children:e.jsx(ng,{scope:r,cancelRef:d,children:e.jsxs(js,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:Jp(a.onOpenAutoFocus,c=>{var m;c.preventDefault(),(m=d.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(Un,{children:n}),e.jsx(ig,{contentRef:i})]})})})});di.displayName=Et;var ui="AlertDialogTitle",mi=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ot(r);return e.jsx(ys,{...a,...n,ref:s})});mi.displayName=ui;var hi="AlertDialogDescription",xi=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ot(r);return e.jsx(Ns,{...a,...n,ref:s})});xi.displayName=hi;var og="AlertDialogAction",fi=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ot(r);return e.jsx(bs,{...a,...n,ref:s})});fi.displayName=og;var pi="AlertDialogCancel",gi=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=ag(pi,r),o=ot(r),i=ai(s,a);return e.jsx(bs,{...o,...n,ref:i})});gi.displayName=pi;var ig=({contentRef:t})=>{const s=`\`${Et}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Et}\` by passing a \`${hi}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Et}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},lg=ii,cg=li,dg=ci,ug=di,mg=fi,hg=gi,xg=mi,fg=xi;function vi({...t}){return e.jsx(lg,{"data-slot":"alert-dialog",...t})}function pg({...t}){return e.jsx(cg,{"data-slot":"alert-dialog-portal",...t})}function gg({className:t,...s}){return e.jsx(dg,{"data-slot":"alert-dialog-overlay",className:W("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ji({className:t,...s}){return e.jsxs(pg,{children:[e.jsx(gg,{}),e.jsx(ug,{"data-slot":"alert-dialog-content",className:W("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function bi({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:W("flex flex-col gap-2 text-center sm:text-left",t),...s})}function yi({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:W("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Ni({className:t,...s}){return e.jsx(xg,{"data-slot":"alert-dialog-title",className:W("text-lg font-semibold",t),...s})}function wi({className:t,...s}){return e.jsx(fg,{"data-slot":"alert-dialog-description",className:W("text-muted-foreground text-sm",t),...s})}function Ci({className:t,...s}){return e.jsx(mg,{className:W(Ht(),t),...s})}function Si({className:t,...s}){return e.jsx(hg,{className:W(Ht({variant:"outline"}),t),...s})}function vg({tasks:t,projects:s,users:r,currentUser:n,onCreateTask:a,onUpdateTask:o,onDeleteTask:i}){const[l,d]=u.useState(!1),[c,m]=u.useState(!1),[p,f]=u.useState(!1),[h,g]=u.useState(null),[x,v]=u.useState({title:"",description:"",status:"pending",priority:"medium",projectId:"",assignedTo:"unassigned",dueDate:""}),y=()=>{v({title:"",description:"",status:"pending",priority:"medium",projectId:"",assignedTo:"unassigned",dueDate:""})},j=()=>{!x.title||!x.projectId||(a({title:x.title,description:x.description,status:x.status,priority:x.priority,projectId:x.projectId,assignedTo:x.assignedTo==="unassigned"?void 0:x.assignedTo,dueDate:x.dueDate||void 0,createdBy:n.id}),y(),d(!1))},D=k=>{g(k),v({title:k.title,description:k.description||"",status:k.status,priority:k.priority,projectId:k.projectId,assignedTo:k.assignedTo||"unassigned",dueDate:k.dueDate||""}),m(!0)},N=()=>{!h||!x.title||!x.projectId||(o(h.id,{title:x.title,description:x.description,status:x.status,priority:x.priority,projectId:x.projectId,assignedTo:x.assignedTo==="unassigned"?void 0:x.assignedTo,dueDate:x.dueDate||void 0}),y(),g(null),m(!1))},M=k=>{g(k),f(!0)},w=()=>{h&&(i(h.id),g(null),f(!1))},A=k=>{o(k.id,{status:"completed",updatedAt:new Date().toISOString()})},C=k=>{switch(k){case"completed":return"default";case"in-progress":return"secondary";case"pending":return"outline";case"blocked":return"destructive";default:return"outline"}},F=k=>{switch(k){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},L=(()=>{if(n.role==="admin")return t;if(n.role==="supervisor"){const k=s.filter(Y=>Y.supervisorId===n.id);return t.filter(Y=>k.some(S=>S.id===Y.projectId))}return t.filter(k=>k.assignedTo===n.id||k.createdBy===n.id)})(),P=n.role==="admin"||n.role==="supervisor",O=k=>n.role==="admin"||k.createdBy===n.id||n.role==="supervisor"&&s.some(Y=>Y.id===k.projectId&&Y.supervisorId===n.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Task Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, manage, and track project tasks"})]}),P&&e.jsxs(T,{onClick:()=>d(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),e.jsx("div",{className:"grid gap-4",children:L.map(k=>{var Y,S,R;return e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsx(te,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(se,{className:"text-lg",children:k.title}),k.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(re,{variant:C(k.status),children:k.status}),e.jsx(re,{variant:F(k.priority),children:k.priority})]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",((Y=s.find(I=>I.id===k.projectId))==null?void 0:Y.name)||"Unknown"]})]}),k.assignedTo&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Assigned to: ",((S=r.find(I=>I.id===k.assignedTo))==null?void 0:S.name)||"Unknown"]})]}),k.dueDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Due: ",new Date(k.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created by: ",((R=r.find(I=>I.id===k.createdBy))==null?void 0:R.name)||"Unknown"]}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(k.createdAt).toLocaleDateString()})]})]}),O(k)&&e.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>D(k),children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>M(k),className:"text-destructive hover:text-destructive",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Delete"]}),k.status!=="completed"&&e.jsxs(T,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>A(k),children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Mark as Done"]})]})]})]},k.id)})}),L.length===0&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:P?"Create your first task to get started.":"No tasks have been assigned to you yet."}),P&&e.jsxs(T,{onClick:()=>d(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})})}),e.jsx(Fe,{open:l,onOpenChange:d,children:e.jsxs(Me,{children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Create New Task"}),e.jsx(Ie,{children:"Create a new task and assign it to a team member."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:"Task Title"}),e.jsx(U,{id:"title",value:x.title,onChange:k=>v({...x,title:k.target.value}),placeholder:"Enter task title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description"}),e.jsx(Ye,{id:"description",value:x.description,onChange:k=>v({...x,description:k.target.value}),placeholder:"Enter task description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"status",children:"Status"}),e.jsxs(ce,{value:x.status,onValueChange:k=>v({...x,status:k}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"pending",children:"Pending"}),e.jsx($,{value:"in-progress",children:"In Progress"}),e.jsx($,{value:"completed",children:"Completed"}),e.jsx($,{value:"blocked",children:"Blocked"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"priority",children:"Priority"}),e.jsxs(ce,{value:x.priority,onValueChange:k=>v({...x,priority:k}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"low",children:"Low"}),e.jsx($,{value:"medium",children:"Medium"}),e.jsx($,{value:"high",children:"High"}),e.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"project",children:"Project"}),e.jsxs(ce,{value:x.projectId,onValueChange:k=>v({...x,projectId:k}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a project"})}),e.jsx(me,{children:s.filter(k=>n.role==="admin"||k.supervisorId===n.id).map(k=>e.jsx($,{value:k.id,children:k.name},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"assignedTo",children:"Assign To"}),e.jsxs(ce,{value:x.assignedTo||"unassigned",onValueChange:k=>v({...x,assignedTo:k==="unassigned"?"":k}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a team member"})}),e.jsxs(me,{children:[e.jsx($,{value:"unassigned",children:"Unassigned"}),r.filter(k=>k.role==="fabricator"||k.role==="supervisor").map(k=>e.jsxs($,{value:k.id,children:[k.name," (",k.secureId,")"]},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"dueDate",children:"Due Date"}),e.jsx(U,{id:"dueDate",type:"date",value:x.dueDate,onChange:k=>v({...x,dueDate:k.target.value})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(T,{onClick:j,disabled:!x.title||!x.projectId,children:"Create Task"})]})]})]})}),e.jsx(Fe,{open:c,onOpenChange:m,children:e.jsxs(Me,{children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Edit Task"}),e.jsx(Ie,{children:"Update task details and assignments."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-title",children:"Task Title"}),e.jsx(U,{id:"edit-title",value:x.title,onChange:k=>v({...x,title:k.target.value}),placeholder:"Enter task title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-description",children:"Description"}),e.jsx(Ye,{id:"edit-description",value:x.description,onChange:k=>v({...x,description:k.target.value}),placeholder:"Enter task description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-status",children:"Status"}),e.jsxs(ce,{value:x.status,onValueChange:k=>v({...x,status:k}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"pending",children:"Pending"}),e.jsx($,{value:"in-progress",children:"In Progress"}),e.jsx($,{value:"completed",children:"Completed"}),e.jsx($,{value:"blocked",children:"Blocked"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-priority",children:"Priority"}),e.jsxs(ce,{value:x.priority,onValueChange:k=>v({...x,priority:k}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"low",children:"Low"}),e.jsx($,{value:"medium",children:"Medium"}),e.jsx($,{value:"high",children:"High"}),e.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-project",children:"Project"}),e.jsxs(ce,{value:x.projectId,onValueChange:k=>v({...x,projectId:k}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a project"})}),e.jsx(me,{children:s.filter(k=>n.role==="admin"||k.supervisorId===n.id).map(k=>e.jsx($,{value:k.id,children:k.name},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-assignedTo",children:"Assign To"}),e.jsxs(ce,{value:x.assignedTo||"unassigned",onValueChange:k=>v({...x,assignedTo:k==="unassigned"?"":k}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a team member"})}),e.jsxs(me,{children:[e.jsx($,{value:"unassigned",children:"Unassigned"}),r.filter(k=>k.role==="fabricator"||k.role==="supervisor").map(k=>e.jsxs($,{value:k.id,children:[k.name," (",k.secureId,")"]},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-dueDate",children:"Due Date"}),e.jsx(U,{id:"edit-dueDate",type:"date",value:x.dueDate,onChange:k=>v({...x,dueDate:k.target.value})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(T,{onClick:N,disabled:!x.title||!x.projectId,children:"Update Task"})]})]})]})}),e.jsx(vi,{open:p,onOpenChange:f,children:e.jsxs(ji,{children:[e.jsxs(bi,{children:[e.jsxs(Ni,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5 text-destructive"}),"Delete Task"]}),e.jsxs(wi,{children:['Are you sure you want to delete "',h==null?void 0:h.title,'"? This action cannot be undone.']})]}),e.jsxs(yi,{children:[e.jsx(Si,{children:"Cancel"}),e.jsx(Ci,{onClick:w,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Task"})]})]})})]})}function jg({projects:t,users:s,tasks:r,currentUser:n}){const[a,o]=u.useState([{id:"report-1",title:"Monthly Project Progress",description:"Comprehensive overview of all project progress for the current month",type:"project",status:"published",createdBy:"admin-001",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z",data:{},filters:{month:"current",status:"all"}},{id:"report-2",title:"Team Performance Analysis",description:"Analysis of team member performance and task completion rates",type:"user",status:"published",createdBy:"admin-001",createdAt:"2024-01-10T14:30:00Z",updatedAt:"2024-01-10T14:30:00Z",data:{},filters:{period:"last30days",includeAll:!0}}]),[i,l]=u.useState(!1),[d,c]=u.useState(!1),[m,p]=u.useState(!1),[f,h]=u.useState(!1),[g,x]=u.useState(null),[v,y]=u.useState({title:"",description:"",type:"project",status:"draft",projectId:"",filters:{}}),j=()=>{y({title:"",description:"",type:"project",status:"draft",projectId:"",filters:{}})},D=()=>{if(!v.title)return;const S={id:`report-${Date.now()}`,title:v.title,description:v.description,type:v.type,status:v.status,projectId:v.projectId||void 0,createdBy:n.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),data:F(v.type,v.projectId),filters:v.filters};o(R=>[...R,S]),j(),l(!1)},N=S=>{x(S),y({title:S.title,description:S.description,type:S.type,status:S.status,projectId:S.projectId||"",filters:S.filters}),c(!0)},M=()=>{!g||!v.title||(o(S=>S.map(R=>R.id===g.id?{...R,title:v.title,description:v.description,type:v.type,status:v.status,projectId:v.projectId||void 0,updatedAt:new Date().toISOString(),data:F(v.type,v.projectId),filters:v.filters}:R)),j(),x(null),c(!1))},w=S=>{x(S),p(!0)},A=()=>{g&&(o(S=>S.filter(R=>R.id!==g.id)),x(null),p(!1))},C=S=>{x(S),h(!0)},F=(S,R)=>{switch(S){case"project":if(R){const G=t.find(Ce=>Ce.id===R),ge=r.filter(Ce=>Ce.projectId===R);return{project:G,tasks:ge,totalTasks:ge.length,completedTasks:ge.filter(Ce=>Ce.status==="completed").length,completionRate:ge.length>0?ge.filter(Ce=>Ce.status==="completed").length/ge.length*100:0}}return{projects:t.length,completedProjects:t.filter(G=>G.status==="completed").length,inProgressProjects:t.filter(G=>G.status==="in-progress").length};case"task":return{totalTasks:r.length,completedTasks:r.filter(G=>G.status==="completed").length,pendingTasks:r.filter(G=>G.status==="pending").length,inProgressTasks:r.filter(G=>G.status==="in-progress").length,blockedTasks:r.filter(G=>G.status==="blocked").length};case"user":return{totalUsers:s.length,admins:s.filter(G=>G.role==="admin").length,supervisors:s.filter(G=>G.role==="supervisor").length,fabricators:s.filter(G=>G.role==="fabricator").length};case"financial":const I=t.reduce((G,ge)=>G+ge.revenue,0),oe=t.reduce((G,ge)=>G+ge.budget,0),je=t.reduce((G,ge)=>G+ge.spent,0);return{totalRevenue:I,totalBudget:oe,totalSpent:je,profit:I-je,budgetUtilization:oe>0?je/oe*100:0};default:return{}}},b=S=>{switch(S){case"published":return"default";case"draft":return"secondary";case"archived":return"outline";default:return"outline"}},L=S=>{switch(S){case"project":return"default";case"task":return"secondary";case"user":return"outline";case"financial":return"destructive";case"custom":return"outline";default:return"outline"}},P=n.role==="admin"||n.role==="supervisor",O=S=>n.role==="admin"||S.createdBy===n.id,Y=n.role==="admin"?a:n.role==="supervisor"?a.filter(S=>S.createdBy===n.id||S.status==="published"||S.projectId&&t.some(R=>R.id===S.projectId&&R.supervisorId===n.id)):a.filter(S=>S.status==="published");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Reports & Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate and manage comprehensive project reports"})]}),P&&e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Report"]})]}),e.jsxs(_s,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(Ms,{children:[e.jsx(Ne,{value:"all",children:"All Reports"}),e.jsx(Ne,{value:"project",children:"Project Reports"}),e.jsx(Ne,{value:"task",children:"Task Reports"}),e.jsx(Ne,{value:"financial",children:"Financial Reports"})]}),e.jsx(we,{value:"all",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Y.map(S=>{var R,I;return e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsx(te,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(se,{className:"text-lg",children:S.title}),S.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(re,{variant:b(S.status),children:S.status}),e.jsx(re,{variant:L(S.type),children:S.type})]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[S.projectId&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",((R=t.find(oe=>oe.id===S.projectId))==null?void 0:R.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Created by: ",((I=s.find(oe=>oe.id===S.createdBy))==null?void 0:I.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Created: ",new Date(S.createdAt).toLocaleDateString()]}),S.updatedAt!==S.createdAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Updated: ",new Date(S.updatedAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>C(S),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{},children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Export"]}),O(S)&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>N(S),children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(S),className:"text-destructive hover:text-destructive",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]},S.id)})})}),e.jsx(we,{value:"project",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Y.filter(S=>S.type==="project").map(S=>e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(te,{children:[e.jsx(se,{children:S.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Projects"}),e.jsx("p",{className:"text-2xl",children:S.data.projects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl text-green-600",children:S.data.completedProjects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl text-blue-600",children:S.data.inProgressProjects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completion Rate"}),e.jsxs("p",{className:"text-2xl",children:[S.data.completionRate||0,"%"]})]})]})})]},S.id))})}),e.jsx(we,{value:"task",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Y.filter(S=>S.type==="task").map(S=>e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(te,{children:[e.jsx(se,{children:S.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl",children:S.data.totalTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl text-green-600",children:S.data.completedTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl text-blue-600",children:S.data.inProgressTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl text-yellow-600",children:S.data.pendingTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Blocked"}),e.jsx("p",{className:"text-2xl text-red-600",children:S.data.blockedTasks||0})]})]})})]},S.id))})}),e.jsx(we,{value:"financial",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Y.filter(S=>S.type==="financial").map(S=>e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(te,{children:[e.jsx(se,{children:S.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl text-green-600",children:["$",(S.data.totalRevenue||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Budget"}),e.jsxs("p",{className:"text-2xl",children:["$",(S.data.totalBudget||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl text-red-600",children:["$",(S.data.totalSpent||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Profit"}),e.jsxs("p",{className:`text-2xl ${(S.data.profit||0)>=0?"text-green-600":"text-red-600"}`,children:["$",(S.data.profit||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Budget Usage"}),e.jsxs("p",{className:"text-2xl",children:[(S.data.budgetUtilization||0).toFixed(1),"%"]})]})]})})]},S.id))})})]}),Y.length===0&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No reports found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:P?"Create your first report to get started with analytics.":"No reports have been published yet."}),P&&e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})})}),e.jsx(Fe,{open:i,onOpenChange:l,children:e.jsxs(Me,{className:"max-w-2xl",children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Create New Report"}),e.jsx(Ie,{children:"Generate a comprehensive report with customizable filters and data."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:"Report Title"}),e.jsx(U,{id:"title",value:v.title,onChange:S=>y({...v,title:S.target.value}),placeholder:"Enter report title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description"}),e.jsx(Ye,{id:"description",value:v.description,onChange:S=>y({...v,description:S.target.value}),placeholder:"Enter report description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"type",children:"Report Type"}),e.jsxs(ce,{value:v.type,onValueChange:S=>y({...v,type:S}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"project",children:"Project Report"}),e.jsx($,{value:"task",children:"Task Report"}),e.jsx($,{value:"user",children:"User Report"}),e.jsx($,{value:"financial",children:"Financial Report"}),e.jsx($,{value:"custom",children:"Custom Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"status",children:"Status"}),e.jsxs(ce,{value:v.status,onValueChange:S=>y({...v,status:S}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"draft",children:"Draft"}),e.jsx($,{value:"published",children:"Published"}),e.jsx($,{value:"archived",children:"Archived"})]})]})]})]}),v.type==="project"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"project",children:"Specific Project (Optional)"}),e.jsxs(ce,{value:v.projectId,onValueChange:S=>y({...v,projectId:S}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a project or leave blank for all projects"})}),e.jsxs(me,{children:[e.jsx($,{value:"",children:"All Projects"}),t.filter(S=>n.role==="admin"||S.supervisorId===n.id).map(S=>e.jsx($,{value:S.id,children:S.name},S.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(T,{onClick:D,disabled:!v.title,children:"Create Report"})]})]})]})}),e.jsx(Fe,{open:d,onOpenChange:c,children:e.jsxs(Me,{className:"max-w-2xl",children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Edit Report"}),e.jsx(Ie,{children:"Update report details and regenerate data."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-title",children:"Report Title"}),e.jsx(U,{id:"edit-title",value:v.title,onChange:S=>y({...v,title:S.target.value}),placeholder:"Enter report title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-description",children:"Description"}),e.jsx(Ye,{id:"edit-description",value:v.description,onChange:S=>y({...v,description:S.target.value}),placeholder:"Enter report description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-type",children:"Report Type"}),e.jsxs(ce,{value:v.type,onValueChange:S=>y({...v,type:S}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"project",children:"Project Report"}),e.jsx($,{value:"task",children:"Task Report"}),e.jsx($,{value:"user",children:"User Report"}),e.jsx($,{value:"financial",children:"Financial Report"}),e.jsx($,{value:"custom",children:"Custom Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-status",children:"Status"}),e.jsxs(ce,{value:v.status,onValueChange:S=>y({...v,status:S}),children:[e.jsx(ue,{children:e.jsx(de,{})}),e.jsxs(me,{children:[e.jsx($,{value:"draft",children:"Draft"}),e.jsx($,{value:"published",children:"Published"}),e.jsx($,{value:"archived",children:"Archived"})]})]})]})]}),v.type==="project"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"edit-project",children:"Specific Project (Optional)"}),e.jsxs(ce,{value:v.projectId,onValueChange:S=>y({...v,projectId:S}),children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select a project or leave blank for all projects"})}),e.jsxs(me,{children:[e.jsx($,{value:"",children:"All Projects"}),t.filter(S=>n.role==="admin"||S.supervisorId===n.id).map(S=>e.jsx($,{value:S.id,children:S.name},S.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(T,{onClick:M,disabled:!v.title,children:"Update Report"})]})]})]})}),e.jsx(Fe,{open:f,onOpenChange:h,children:e.jsxs(Me,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:g==null?void 0:g.title}),e.jsx(Ie,{children:g==null?void 0:g.description})]}),e.jsx("div",{className:"space-y-4",children:g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Report Type"}),e.jsx("p",{className:"text-sm",children:g.type})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Status"}),e.jsx("p",{className:"text-sm",children:g.status})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Created"}),e.jsx("p",{className:"text-sm",children:new Date(g.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Updated"}),e.jsx("p",{className:"text-sm",children:new Date(g.updatedAt).toLocaleString()})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"mb-4",children:"Report Data"}),e.jsx("pre",{className:"text-sm bg-muted p-4 rounded overflow-auto",children:JSON.stringify(g.data,null,2)})]})]})})]})}),e.jsx(vi,{open:m,onOpenChange:p,children:e.jsxs(ji,{children:[e.jsxs(bi,{children:[e.jsxs(Ni,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5 text-destructive"}),"Delete Report"]}),e.jsxs(wi,{children:['Are you sure you want to delete "',g==null?void 0:g.title,'"? This action cannot be undone.']})]}),e.jsxs(yi,{children:[e.jsx(Si,{children:"Cancel"}),e.jsx(Ci,{onClick:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Report"})]})]})})]})}function bg({projects:t,users:s,materials:r,workLogs:n,currentUser:a}){var A,C,F;const[o,i]=u.useState(""),[l,d]=u.useState("all"),[c,m]=u.useState(null),[p,f]=u.useState(!1),h=t.filter(b=>b.status==="completed"),g=Array.from(new Set(h.map(b=>{var L;return((L=s.find(P=>P.role==="client"&&P.clientProjectId===b.id))==null?void 0:L.school)||b.clientName}))).sort(),x=h.filter(b=>{var k;const L=b.name.toLowerCase().includes(o.toLowerCase())||b.description.toLowerCase().includes(o.toLowerCase())||b.clientName.toLowerCase().includes(o.toLowerCase()),P=((k=s.find(Y=>Y.role==="client"&&Y.clientProjectId===b.id))==null?void 0:k.school)||b.clientName;return L&&(l==="all"||P===l)}),v=b=>{m(b),f(!0)},y=b=>r.filter(L=>L.projectId===b),j=b=>n.filter(L=>L.projectId===b),D=b=>y(b).reduce((L,P)=>L+P.cost,0),N=b=>{var L;return((L=b.attachments)==null?void 0:L.filter(P=>b.fabricatorIds.some(O=>P.uploadedBy===O)))||[]},M=b=>{var L;return((L=b.attachments)==null?void 0:L.filter(P=>P.name.toLowerCase().includes("cost")||P.name.toLowerCase().includes("analysis")||P.name.toLowerCase().includes("budget")||P.type.includes("spreadsheet")))||[]},w=a.role==="admin";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-6 w-6"}),"Project Archives"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed projects with documentation and cost analysis"})]}),e.jsxs(re,{variant:"secondary",className:"text-sm",children:[x.length," Archived Projects"]})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsx(se,{className:"text-base",children:"Filter Archives"})}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"search",children:"Search Projects"}),e.jsx(U,{id:"search",placeholder:"Search by name, description, or client...",value:o,onChange:b=>i(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"school",children:"Filter by School/Client"}),e.jsxs(ce,{value:l,onValueChange:d,children:[e.jsx(ue,{children:e.jsx(de,{placeholder:"Select school/client"})}),e.jsxs(me,{children:[e.jsx($,{value:"all",children:"All Schools/Clients"}),g.map(b=>e.jsx($,{value:b,children:b},b))]})]})]})]})})]}),e.jsx("div",{className:"grid gap-6",children:x.map(b=>{var I;const L=s.find(oe=>oe.id===b.supervisorId),P=s.filter(oe=>b.fabricatorIds.includes(oe.id)),O=s.find(oe=>oe.role==="client"&&oe.clientProjectId===b.id),k=(O==null?void 0:O.school)||b.clientName,Y=N(b),S=M(b),R=D(b.id);return e.jsxs(B,{className:"hover:shadow-md transition-shadow",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(se,{className:"text-lg",children:b.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(re,{variant:"default",className:"bg-green-600",children:"Completed"}),e.jsx(re,{variant:"outline",children:b.priority})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:k})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Supervisor: ",L==null?void 0:L.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[new Date(b.startDate).toLocaleDateString()," - ",new Date(b.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[P.length," Fabricators"]})]})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Budget"}),e.jsxs("p",{className:"font-medium",children:["$",b.budget.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Spent"}),e.jsxs("p",{className:"font-medium",children:["$",b.spent.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Materials"}),e.jsxs("p",{className:"font-medium",children:["$",R.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsxs("p",{className:"font-medium text-green-600",children:["$",b.revenue.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm",children:[Y.length," Fabricator Documents"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[S.length," Cost Analysis Files"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4 text-purple-600"}),e.jsxs("span",{className:"text-sm",children:[((I=b.attachments)==null?void 0:I.length)||0," Total Documents"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>v(b),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"View Details"]}),b.documentationUrl&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>window.open(b.documentationUrl,"_blank"),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Documentation"]})]})]})})]},b.id)})}),x.length===0&&e.jsx(B,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No Archived Projects Found"}),e.jsx("p",{className:"text-muted-foreground",children:o||l!=="all"?"Try adjusting your search filters.":"No completed projects available in the archives yet."})]})})}),e.jsx(Fe,{open:p,onOpenChange:f,children:e.jsxs(Me,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:c==null?void 0:c.name}),e.jsx(Ie,{children:"Completed project details and documentation"})]}),c&&e.jsx("div",{className:"space-y-6",children:e.jsxs(_s,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Ms,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"documentation",children:"Documentation"}),e.jsx(Ne,{value:"costs",children:"Cost Analysis"}),e.jsx(Ne,{value:"team",children:"Team"})]}),e.jsxs(we,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Project Description"}),e.jsx("p",{className:"text-sm mt-1",children:c.description})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Client/School"}),e.jsx("p",{className:"text-sm mt-1",children:((A=s.find(b=>b.role==="client"&&b.clientProjectId===c.id))==null?void 0:A.school)||c.clientName})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Project Duration"}),e.jsxs("p",{className:"text-sm mt-1",children:[new Date(c.startDate).toLocaleDateString()," - ",new Date(c.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Completion Date"}),e.jsx("p",{className:"text-sm mt-1",children:new Date(c.endDate).toLocaleDateString()})]})]}),w&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Total Budget"}),e.jsxs("p",{className:"text-lg",children:["$",c.budget.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Amount Spent"}),e.jsxs("p",{className:"text-lg",children:["$",c.spent.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Material Costs"}),e.jsxs("p",{className:"text-lg",children:["$",D(c.id).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Total Revenue"}),e.jsxs("p",{className:"text-lg text-green-600",children:["$",c.revenue.toLocaleString()]})]})]})]}),e.jsx(we,{value:"documentation",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabricator Documentation"}),e.jsx("div",{className:"grid gap-2",children:N(c).map(b=>{var L;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:b.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded by ",(L=s.find(P=>P.id===b.uploadedBy))==null?void 0:L.name," on ",new Date(b.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},b.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"All Project Documents"}),e.jsx("div",{className:"grid gap-2",children:((C=c.attachments)==null?void 0:C.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:b.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(b.size/1024/1024).toFixed(2)," MB  ",new Date(b.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},b.id)))||e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents available."})})]})]})}),e.jsx(we,{value:"costs",className:"space-y-4",children:w?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Cost Analysis Documents"}),e.jsx("div",{className:"grid gap-2",children:M(c).map(b=>{var L;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:b.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created by ",(L=s.find(P=>P.id===b.uploadedBy))==null?void 0:L.name]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},b.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Budget Breakdown by Fabricator"}),e.jsx("div",{className:"space-y-3",children:(F=c.fabricatorBudgets)==null?void 0:F.map(b=>{const L=s.find(O=>O.id===b.fabricatorId),P=b.spentAmount/b.allocatedAmount*100;return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:L==null?void 0:L.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),e.jsxs(re,{variant:P>100?"destructive":"default",children:[P.toFixed(1),"% utilized"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Allocated:"}),e.jsxs("span",{className:"ml-2",children:["$",b.allocatedAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Spent:"}),e.jsxs("span",{className:"ml-2",children:["$",b.spentAmount.toLocaleString()]})]})]})]},b.fabricatorId)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Material Costs"}),e.jsx("div",{className:"grid gap-2",children:y(c.id).map(b=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:b.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.quantity," ",b.unit,"  ",b.supplier]})]}),e.jsxs("p",{className:"font-medium",children:["$",b.cost.toLocaleString()]})]},b.id))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"Financial Information Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Cost analysis and budget information is only available to administrators."})]})}),e.jsx(we,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Supervisor"}),e.jsx("div",{className:"p-4 border rounded-lg",children:(()=>{const b=s.find(L=>L.id===c.supervisorId);return b?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:b.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[b.school,"  ",b.secureId]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supervisor information not available"})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabricators"}),e.jsx("div",{className:"grid gap-3",children:c.fabricatorIds.map(b=>{const L=s.find(k=>k.id===b),P=j(c.id).filter(k=>k.fabricatorId===b),O=P.reduce((k,Y)=>k+Y.hoursWorked,0);return L?e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary/10 flex items-center justify-center",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:L.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[L.school,"  ",L.secureId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[O," hours"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.length," work logs"]})]})]})},b):null})})]})]})})]})})]})})]})}function On({currentUser:t,projects:s,users:r,workLogs:n,tasks:a}){var M;const[o,i]=u.useState(null),[l,d]=u.useState(!1),c=s.find(w=>w.id===t.clientProjectId);if(!c)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No Project Assigned"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned to your account yet."})]})});const m=r.find(w=>w.id===c.supervisorId),p=r.filter(w=>c.fabricatorIds.includes(w.id)),f=n.filter(w=>w.projectId===c.id),h=a.filter(w=>w.projectId===c.id),g=w=>{switch(w){case"completed":return"default";case"in-progress":return"secondary";case"review":return"outline";case"on-hold":return"destructive";case"planning":return"secondary";default:return"outline"}},x=w=>{switch(w){case"completed":return e.jsx(ze,{className:"h-4 w-4"});case"in-progress":return e.jsx(Ut,{className:"h-4 w-4"});default:return e.jsx(Ut,{className:"h-4 w-4"})}},v=()=>{i(c),d(!0)},y=[...f].sort((w,A)=>new Date(A.createdAt).getTime()-new Date(w.createdAt).getTime()),j=h.filter(w=>w.status==="completed").length,D=h.length,N=D>0?j/D*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Client Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your project progress and documentation"})]}),e.jsx(re,{variant:"secondary",className:"text-sm",children:t.school})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(se,{className:"text-xl",children:c.name}),e.jsx("p",{className:"text-muted-foreground mt-1",children:c.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(re,{variant:g(c.status),className:"flex items-center gap-1",children:[x(c.status),c.status]}),e.jsx(re,{variant:"outline",children:c.priority})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Project Progress"}),e.jsxs("span",{className:"text-sm",children:[c.progress,"%"]})]}),e.jsx(Kt,{value:c.progress,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{children:new Date(c.startDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Due Date"}),e.jsx("p",{children:new Date(c.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Supervisor"}),e.jsx("p",{children:m==null?void 0:m.name})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl",children:D}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-green-600",children:j}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl",children:[N.toFixed(0),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Task Progress"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:v,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"View Full Details"]}),c.documentationUrl&&e.jsxs(T,{variant:"outline",onClick:()=>window.open(c.documentationUrl,"_blank"),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Documentation"]})]})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"text-lg flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Recent Progress Reports"]})}),e.jsx(V,{children:y.length>0?e.jsxs("div",{className:"space-y-4",children:[y.slice(0,5).map(w=>{const A=r.find(C=>C.id===w.fabricatorId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:A==null?void 0:A.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(w.date).toLocaleDateString(),"  ",w.hoursWorked," hours"]})]}),e.jsxs(re,{variant:"secondary",className:"text-xs",children:["+",w.progressPercentage,"% progress"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description}),w.materials&&w.materials.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Materials Used:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:w.materials.join(", ")})]})]},w.id)}),y.length>5&&e.jsxs(T,{variant:"outline",size:"sm",onClick:v,children:["View All Reports (",y.length,")"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No progress reports available yet."})]})})]}),e.jsxs(B,{children:[e.jsx(te,{children:e.jsxs(se,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Project Documentation"]})}),e.jsx(V,{children:c.attachments&&c.attachments.length>0?e.jsx("div",{className:"space-y-3",children:c.attachments.map(w=>{const A=r.find(C=>C.id===w.uploadedBy);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:w.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(w.size/1024/1024).toFixed(2)," MB  Uploaded by ",A==null?void 0:A.name," on ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},w.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documentation available yet."})]})})]})]}),e.jsx(Fe,{open:l,onOpenChange:d,children:e.jsxs(Me,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:o==null?void 0:o.name}),e.jsx(Ie,{children:"Complete project details and progress tracking"})]}),o&&e.jsx("div",{className:"space-y-6",children:e.jsxs(_s,{defaultValue:"progress",className:"w-full",children:[e.jsxs(Ms,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"progress",children:"Progress"}),e.jsx(Ne,{value:"documentation",children:"Documentation"}),e.jsx(Ne,{value:"team",children:"Team"})]}),e.jsxs(we,{value:"progress",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Project Status"}),e.jsx("p",{className:"text-sm mt-1 flex items-center gap-2",children:e.jsxs(re,{variant:g(o.status),className:"flex items-center gap-1",children:[x(o.status),o.status]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(Kt,{value:o.progress,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[o.progress,"% complete"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"All Progress Reports"}),e.jsx("div",{className:"space-y-3",children:y.map(w=>{const A=r.find(C=>C.id===w.fabricatorId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:A==null?void 0:A.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(w.date).toLocaleDateString(),"  ",w.hoursWorked," hours worked"]})]}),e.jsxs(re,{variant:"secondary",children:["+",w.progressPercentage,"% progress"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:w.description}),w.materials&&w.materials.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:"Materials Used:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:w.materials.join(", ")})]})]},w.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Task Progress"}),e.jsx("div",{className:"space-y-2",children:h.map(w=>{const A=r.find(C=>C.id===w.assignedTo);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:w.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Assigned to: ",A==null?void 0:A.name]})]}),e.jsx(re,{variant:w.status==="completed"?"default":"secondary",children:w.status})]},w.id)})})]})]}),e.jsx(we,{value:"documentation",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Documents"}),e.jsx("div",{className:"grid gap-2",children:((M=o.attachments)==null?void 0:M.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:w.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(w.size/1024/1024).toFixed(2)," MB  Uploaded on ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(De,{className:"h-4 w-4"})})]},w.id)))||e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents available."})})]}),o.documentationUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"External Documentation"}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Google Drive Documentation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete project documentation and files"})]}),e.jsxs(T,{variant:"outline",onClick:()=>window.open(o.documentationUrl,"_blank"),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Open"]})]})})]})]})}),e.jsx(we,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Supervisor"}),e.jsx("div",{className:"p-4 border rounded-lg",children:m?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.school,"  ",m.secureId]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supervisor information not available"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabrication Team"}),e.jsx("div",{className:"grid gap-3",children:p.map(w=>{const A=f.filter(F=>F.fabricatorId===w.id),C=A.reduce((F,b)=>F+b.hoursWorked,0);return e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary/10 flex items-center justify-center",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.school,"  ",w.secureId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[C," hours"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.length," reports"]})]})]})},w.id)})})]})]})})]})})]})})]})}const yg=[],Ng=[],wg=[],Cg=[],Sg=[],kg={totalRevenue:0,monthlyRevenue:[],yearlyRevenue:[]};function Pg(t){const s=Array.isArray(t.fabricator_ids)?t.fabricator_ids:typeof t.fabricator_ids=="string"?Dg(t.fabricator_ids):Array.isArray(t.fabricatorIds)?t.fabricatorIds:[],r=t.start_date||t.startDate||null,n=t.end_date||t.due_date||t.endDate||null;return{id:t.id,name:t.name||t.title||"",description:t.description||"",status:t.status||"planning",priority:t.priority||"medium",startDate:Xs(r),endDate:Xs(n),progress:Number.isFinite(t.progress)?t.progress:0,supervisorId:t.supervisor_id||t.supervisorId||"",fabricatorIds:s,budget:Gs(t.budget),spent:Gs(t.spent),revenue:Gs(t.revenue),clientName:t.client_name||t.clientName||"",documentationUrl:t.documentation_url||t.documentationUrl||void 0,attachments:Array.isArray(t.attachments)?t.attachments:void 0,fabricatorBudgets:Array.isArray(t.fabricatorBudgets)?t.fabricatorBudgets:void 0,createdBy:t.created_by||t.createdBy||"",createdAt:Xs(t.created_at||t.createdAt||new Date().toISOString()),pendingAssignments:Array.isArray(t.pendingAssignments)?t.pendingAssignments:void 0}}function Fn(t){return Array.isArray(t)?t.map(Pg):[]}function Dg(t){try{const s=JSON.parse(t);return Array.isArray(s)?s:[]}catch{return[]}}function Gs(t){const s=typeof t=="string"?parseFloat(t):t;return Number.isFinite(s)?Number(s):0}function Xs(t){if(!t)return new Date().toISOString().split("T")[0];const s=new Date(t);return isNaN(s.getTime())?new Date().toISOString().split("T")[0]:s.toISOString().split("T")[0]}const Ag={lightStart:6,darkStart:18,transitionDuration:30},_g=(t={})=>{const s={...Ag,...t},[r,n]=u.useState(!1),[a,o]=u.useState(!1);return u.useEffect(()=>{const d=()=>{const h=localStorage.getItem("theme-override");if(h&&h!=="auto")return;const g=new Date,x=g.getHours(),v=g.getMinutes(),y=x+v/60,j=s.lightStart,D=s.darkStart,N=s.transitionDuration/60;let M=!1,w=!1;D>j,(y>=D||y<j)&&(M=!0),y>=D-N&&y<D&&(w=!0),y>=j-N&&y<j&&(w=!0),n(M),o(w);const A=document.documentElement;M?A.classList.add("dark"):A.classList.remove("dark"),w?A.classList.add("theme-transition"):A.classList.remove("theme-transition")};(()=>{const h=localStorage.getItem("theme-override");h==="light"?(n(!1),document.documentElement.classList.remove("dark")):h==="dark"?(n(!0),document.documentElement.classList.add("dark")):d()})();const m=setInterval(d,6e4),p=window.matchMedia("(prefers-color-scheme: dark)"),f=()=>{localStorage.getItem("theme-override")||d()};return p.addEventListener("change",f),()=>{clearInterval(m),p.removeEventListener("change",f)}},[s]),{isDark:r,isTransitioning:a,setTheme:d=>{console.log(" Setting theme to:",d);const c=document.documentElement;if(d==="auto"){localStorage.removeItem("theme-override"),console.log(" Switched to auto mode - will follow time-based schedule");const m=new Date,p=m.getHours(),f=m.getMinutes(),h=p+f/60,g=h>=s.darkStart||h<s.lightStart;n(g),o(!1),g?(c.classList.add("dark"),console.log(" Auto mode: Dark theme applied")):(c.classList.remove("dark"),console.log(" Auto mode: Light theme applied"))}else{localStorage.setItem("theme-override",d);const m=d==="dark";n(m),o(!1),m?(c.classList.add("dark"),console.log(" Manual: Dark theme applied")):(c.classList.remove("dark"),console.log(" Manual: Light theme applied"))}},getCurrentTheme:()=>{const d=localStorage.getItem("theme-override");return d||"auto"},config:s}};function Mg(){const[t,s]=u.useState(null),[r,n]=u.useState("dashboard"),[a,o]=u.useState("main"),[i,l]=u.useState(wg),[d,c]=u.useState(yg),[m,p]=u.useState(Ng),[f,h]=u.useState(Cg),[g,x]=u.useState(Sg),[v,y]=u.useState(!1),[j,D]=u.useState(null),[N,M]=u.useState(0),{isTransitioning:w,setTheme:A,getCurrentTheme:C}=_g();u.useEffect(()=>{(async()=>{try{try{const Z=localStorage.getItem("currentUser");if(Z){const ee=JSON.parse(Z);s(ee)}if(!(window.location.hash||"").slice(1)&&Z){n("dashboard");try{window.location.hash="dashboard"}catch{}}}catch{}if((await ye.healthCheck()).error){console.warn("Backend not available. Running in demo mode with local data."),D(!1),y(!0);return}await F(),D(!0),y(!0)}catch(q){console.error("Failed to initialize app:",q),console.warn("Falling back to demo mode with local data."),D(!1),y(!0)}})()},[]),u.useEffect(()=>{if(!t)return;const z=t.role;if(!({admin:["dashboard","projects","tasks","users","materials","reports","settings","team","revenue","assignments","archives"],supervisor:["dashboard","projects","tasks","team","reports","archives"],fabricator:["dashboard","projects","assignments","worklog","materials","tasks"],client:["dashboard","project-status","documentation"]}[z]||["dashboard"]).includes(r)){n("dashboard");try{window.location.hash="dashboard"}catch{}}},[t,r]);const F=async()=>{try{const[z,q,Z,K,ee]=await Promise.all([ye.getProjects(),ye.getTasks(),ye.getWorkLogs(),ye.getMaterials(),ye.getUsers()]);z.data&&p(Fn(z.data)),q.data&&l(q.data),Z.data&&h(Z.data),K.data&&x(K.data),ee.data&&c(ee.data.map(gr))}catch(z){console.error("Failed to load data from database:",z)}},b=z=>{s(z);try{localStorage.setItem("currentUser",JSON.stringify(z))}catch{}n("dashboard");try{window.location.hash="dashboard"}catch{}},L=()=>{ye.logout(),s(null),n("dashboard"),o("main");try{localStorage.removeItem("currentUser")}catch{}try{window.location.hash="dashboard"}catch{}},P=z=>{c(q=>[...q,z]),s(z);try{localStorage.setItem("currentUser",JSON.stringify(z))}catch{}n("dashboard")},O=z=>{c(q=>[...q,z])},k=()=>{o("fabricator-signup")},Y=()=>{o("forgot-password")},S=()=>{o("main")},R=(z,q)=>{l(Z=>Z.map(K=>K.id===z?{...K,status:q,updatedAt:new Date().toISOString()}:K))},I=z=>{const q={...z,id:`task-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l(Z=>[...Z,q])},oe=(z,q)=>{l(Z=>Z.map(K=>K.id===z?{...K,...q,updatedAt:new Date().toISOString()}:K))},je=z=>{l(q=>q.filter(Z=>Z.id!==z))},G=async z=>{try{const q=await ye.createProject(z);if(q.data){const Z=Fn([q.data])[0];return p(K=>[...K,Z]),Z}else throw new Error(q.error||"Failed to create project")}catch(q){console.error("Failed to create project:",q);const Z={...z,id:`project-${Date.now()}`};return p(K=>[...K,Z]),Z}},ge=z=>{const q={...z,id:`wl-${Date.now()}`,createdAt:new Date().toISOString()};h(K=>[...K,q]);const Z=z.progressPercentage;p(K=>K.map(ee=>ee.id===z.projectId?{...ee,progress:Math.min(100,ee.progress+Z)}:ee))},Ce=z=>{const q={...z,id:`mat-${Date.now()}`,addedAt:new Date().toISOString()};x(Z=>[...Z,q])},it=(z,q)=>{p(Z=>Z.map(K=>{var ee,he,_;return{...K,pendingAssignments:(ee=K.pendingAssignments)==null?void 0:ee.map(H=>H.id===z?{...H,status:"accepted",response:q,respondedAt:new Date().toISOString()}:H),fabricatorIds:(he=K.pendingAssignments)!=null&&he.find(H=>H.id===z&&H.status==="pending")?[...K.fabricatorIds,K.pendingAssignments.find(H=>H.id===z).fabricatorId]:K.fabricatorIds,status:(_=K.pendingAssignments)!=null&&_.find(H=>H.id===z&&H.status==="pending")?"planning":K.status}}))},lt=(z,q)=>{p(Z=>Z.map(K=>{var ee;return{...K,pendingAssignments:(ee=K.pendingAssignments)==null?void 0:ee.map(he=>he.id===z?{...he,status:"declined",response:q,respondedAt:new Date().toISOString()}:he)}}))},Ge=(z,q,Z)=>{const K=m.find(Q=>Q.id===z),ee=d.find(Q=>Q.id===q),he=t;if(!K||!ee||!he)return;const _={id:`pa-${Date.now()}`,projectId:z,fabricatorId:q,assignedBy:t.id,assignedAt:new Date().toISOString(),status:"pending",message:Z};p(Q=>Q.map(ve=>ve.id===z?{...ve,pendingAssignments:[...ve.pendingAssignments||[],_],status:"pending-assignment"}:ve)),gs.sendProjectAssignment(_,K,ee,he);const ae=[{projectId:z,title:"Project Planning Review",description:"Review project requirements and create detailed work plan",status:"pending",priority:"high",assignedTo:q,dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimatedHours:8,actualHours:0,createdBy:t.id},{projectId:z,title:"Material Assessment",description:"Assess and order required materials for the project",status:"pending",priority:"medium",assignedTo:q,dueDate:new Date(Date.now()+10*24*60*60*1e3).toISOString().split("T")[0],estimatedHours:4,actualHours:0,createdBy:t.id}].map(Q=>({...Q,id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));l(Q=>[...Q,...ae])},Oe=async z=>{p(q=>q.map(Z=>Z.id===z.id?z:Z));try{await ye.updateProject(z.id,z)}catch(q){console.warn("Failed to persist project update; will retry on next refresh.",q)}t&&gs.sendProjectUpdate(z,d,"progress_update",t)};if(u.useEffect(()=>{const z=["dashboard","projects","tasks","users","materials","reports","settings","team","worklog","revenue","assignments","archives","project-status","documentation","admin-projects","admin-tasks"],q=()=>{const ee=window.location.hash.slice(1);if(ee==="admin-projects"||ee==="admin-tasks"){window.location.hash="projects",n("projects");try{localStorage.setItem("currentView","projects")}catch{}return}if(ee==="assignments"&&(t==null?void 0:t.role)==="fabricator"){window.location.hash="projects",n("projects");try{localStorage.setItem("currentView","projects")}catch{}return}if(z.includes(ee)){n(ee);try{localStorage.setItem("currentView",ee)}catch{}}else if(!ee){n("dashboard");try{localStorage.setItem("currentView","dashboard")}catch{}}};window.addEventListener("hashchange",q);const Z=ee=>{const he=ee.target;if(!he)return;const _=he.closest('a[href^="#"]');if(!_)return;const H=_.getAttribute("href")||"",ae=H.startsWith("#")?H.slice(1):H;z.includes(ae)&&n(ae)};document.addEventListener("click",Z);const K=window.location.hash.slice(1);if(z.includes(K))q();else try{const ee=localStorage.getItem("currentUser"),he=localStorage.getItem("currentView");if(ee){const _=he&&z.includes(he)?he:"dashboard";if(n(_),!K)try{window.location.hash=_}catch{}}}catch{}return()=>{window.removeEventListener("hashchange",q),document.removeEventListener("click",Z)}},[]),u.useEffect(()=>{let z=!0;const q=setInterval(async()=>{try{const K=!(await ye.healthCheck()).error;if(!z)return;D(ee=>(ee===!1&&K&&F().then(()=>M(Date.now())).catch(()=>{}),K))}catch{if(!z)return;D(!1)}},2e4);return()=>{z=!1,clearInterval(q)}},[]),u.useEffect(()=>{const z=()=>{document.visibilityState==="visible"&&j&&Date.now()-N>1e4&&F().then(()=>M(Date.now())).catch(()=>{})},q=()=>{setTimeout(async()=>{const K=!(await ye.healthCheck()).error;D(K),K&&F().then(()=>M(Date.now())).catch(()=>{})},1e3)};return document.addEventListener("visibilitychange",z),window.addEventListener("online",q),()=>{document.removeEventListener("visibilitychange",z),window.removeEventListener("online",q)}},[j,N]),!t)switch(a){case"fabricator-signup":return e.jsx(vd,{onSignup:P,onBackToMain:S});case"forgot-password":return e.jsx(jd,{onBackToLogin:S});default:return e.jsx(ud,{onLogin:b,onShowSignup:k,onShowForgotPassword:Y})}const Xe=()=>{if(t.role==="client")switch(r){case"dashboard":case"project-status":case"documentation":return e.jsx(On,{currentUser:t,projects:m,users:d,workLogs:f,tasks:i});default:return e.jsx(On,{currentUser:t,projects:m,users:d,workLogs:f,tasks:i})}switch(r){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(rm,{projects:m,tasks:i,users:d,currentUser:t}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(fm,{projects:m,currentUser:t}),e.jsx(pm,{tasks:i,projects:m,currentUser:t,onUpdateTaskStatus:R})]})]});case"projects":return e.jsx(Us,{projects:m,users:d,currentUser:t,onCreateProject:t.role==="admin"||t.role==="supervisor"?G:void 0,onAssignFabricator:t.role==="supervisor"?Ge:void 0,onUpdateProject:Oe,onAcceptAssignment:t.role==="fabricator"?it:void 0,onDeclineAssignment:t.role==="fabricator"?lt:void 0,onCreateUser:O});case"archives":return t.role==="admin"||t.role==="supervisor"?e.jsx(bg,{projects:m,users:d,materials:g,workLogs:f,currentUser:t}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Project archives are only available for administrators and supervisors."})]})});case"assignments":return t.role==="fabricator"?(typeof window<"u"&&(window.location.hash="projects"),e.jsx(Us,{projects:m,users:d,currentUser:t,onCreateProject:t.role==="admin"||t.role==="supervisor"?G:void 0,onAssignFabricator:t.role==="supervisor"?Ge:void 0,onUpdateProject:Oe,onAcceptAssignment:it,onDeclineAssignment:lt,onCreateUser:O})):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Project assignments are only available for fabricators."})]})});case"worklog":return t.role==="fabricator"?e.jsx(Up,{currentUser:t,projects:m,workLogs:f,materials:g,onAddWorkLog:ge,onUpdateProject:Oe}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Work logs are only available for fabricators."})]})});case"materials":return t.role==="fabricator"?e.jsx(Gp,{currentUser:t,projects:m,materials:g,onAddMaterial:Ce}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Materials management is only available for fabricators."})]})});case"revenue":return e.jsx(Yp,{projects:m,companyRevenue:kg,currentUser:t});case"reports":return e.jsx(jg,{projects:m,users:d,tasks:i,currentUser:t});case"users":return e.jsx(Hp,{users:d,setUsers:c,currentUser:t});case"tasks":return e.jsx(vg,{tasks:i,projects:m,users:d,currentUser:t,onCreateTask:I,onUpdateTask:oe,onDeleteTask:je});case"admin-projects":case"admin-tasks":return e.jsx(Us,{projects:m,users:d,currentUser:t,onCreateProject:t.role==="admin"||t.role==="supervisor"?G:void 0,onAssignFabricator:t.role==="supervisor"?Ge:void 0,onUpdateProject:Oe,onCreateUser:O});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-muted-foreground",children:["The ",r," section is under development."]})]})})}};return e.jsx(sm,{currentUser:t,onLogout:L,currentTheme:C(),onThemeChange:A,isTransitioning:w,children:Xe()})}Ks.createRoot(document.getElementById("root")).render(e.jsx(mt.StrictMode,{children:e.jsx(Mg,{})}));
//# sourceMappingURL=index-UClGmJvp.js.map
