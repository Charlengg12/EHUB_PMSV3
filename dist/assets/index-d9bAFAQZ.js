var Mo=Object.defineProperty;var To=(t,s,r)=>s in t?Mo(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var cs=(t,s,r)=>To(t,typeof s!="symbol"?s+"":s,r);import{j as e,S as qe,R as Eo,T as Io,I as Ro,V as Oo,P as Fo,C as Lo,a as $o,b as zo,c as Wo,d as Bo,e as Vo,f as qo,O as ys,g as xr,h as Ns,i as ws,k as Cs,D as Ss,l as fr,u as Kn,o as Qn,s as Jn,m as Zn,n as ea,p as ta,q as sa,r as ra,t as na,v as aa,w as Ho,x as Yo,y as Uo,z as Go,A as Xo,B as Ko,E as Qo,F as ia,W as Jo,G as Zo}from"./ui-DXq1sQR8.js";import{a as pr,r as u,b as gr,c as oa,R as ft}from"./vendor-CYabRHnS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var er={},an=pr;er.createRoot=an.createRoot,er.hydrateRoot=an.hydrateRoot;function la(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=la(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ca(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=la(t))&&(n&&(n+=" "),n+=s);return n}const on=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ln=ca,ks=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return ln(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=s,o=Object.keys(a).map(d=>{const m=r==null?void 0:r[d],p=i==null?void 0:i[d];if(m===null)return null;const h=on(m)||on(p);return a[d][h]}),l=r&&Object.entries(r).reduce((d,m)=>{let[p,h]=m;return h===void 0||(d[p]=h),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,m)=>{let{class:p,className:h,...x}=m;return Object.entries(x).every(g=>{let[f,v]=g;return Array.isArray(v)?v.includes({...i,...l}[f]):{...i,...l}[f]===v})?[...d,p,h]:d},[]);return ln(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},vr="-",el=t=>{const s=sl(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(vr);return l[0]===""&&l.length!==1&&l.shift(),da(l,s)||tl(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},da=(t,s)=>{var o;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?da(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(vr);return(o=s.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},cn=/^\[(.+)\]$/,tl=t=>{if(cn.test(t)){const s=cn.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},sl=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return nl(Object.entries(t.classGroups),r).forEach(([i,o])=>{tr(o,n,i,s)}),n},tr=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:dn(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(rl(a)){tr(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{tr(o,dn(s,i),r,n)})})},dn=(t,s)=>{let r=t;return s.split(vr).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},rl=t=>t.isThemeGetter,nl=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[s+o,l])):i);return[r,a]}):t,al=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},ua="!",il=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,o=l=>{const c=[];let d=0,m=0,p;for(let v=0;v<l.length;v++){let b=l[v];if(d===0){if(b===a&&(n||l.slice(v,v+i)===s)){c.push(l.slice(m,v)),m=v+i;continue}if(b==="/"){p=v;continue}}b==="["?d++:b==="]"&&d--}const h=c.length===0?l:l.substring(m),x=h.startsWith(ua),g=x?h.substring(1):h,f=p&&p>m?p-m:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:f}};return r?l=>r({className:l,parseClassName:o}):o},ol=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},ll=t=>({cache:al(t.cacheSize),parseClassName:il(t),...el(t)}),cl=/\s+/,dl=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],o=t.trim().split(cl);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:m,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:x}=r(d);let g=!!x,f=n(g?h.substring(0,x):h);if(!f){if(!g){l=d+(l.length>0?" "+l:l);continue}if(f=n(h),!f){l=d+(l.length>0?" "+l:l);continue}g=!1}const v=ol(m).join(":"),b=p?v+ua:v,j=b+f;if(i.includes(j))continue;i.push(j);const k=a(f,g);for(let y=0;y<k.length;++y){const E=k[y];i.push(b+E)}l=d+(l.length>0?" "+l:l)}return l};function ul(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=ma(s))&&(n&&(n+=" "),n+=r);return n}const ma=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=ma(t[n]))&&(r&&(r+=" "),r+=s);return r};function ml(t,...s){let r,n,a,i=o;function o(c){const d=s.reduce((m,p)=>p(m),t());return r=ll(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const m=dl(c,r);return a(c,m),m}return function(){return i(ul.apply(null,arguments))}}const ve=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},ha=/^\[(?:([a-z-]+):)?(.+)\]$/i,hl=/^\d+\/\d+$/,xl=new Set(["px","full","screen"]),fl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rt=t=>Rt(t)||xl.has(t)||hl.test(t),mt=t=>Wt(t,"length",Pl),Rt=t=>!!t&&!Number.isNaN(Number(t)),Os=t=>Wt(t,"number",Rt),Ht=t=>!!t&&Number.isInteger(Number(t)),bl=t=>t.endsWith("%")&&Rt(t.slice(0,-1)),oe=t=>ha.test(t),ht=t=>fl.test(t),yl=new Set(["length","size","percentage"]),Nl=t=>Wt(t,yl,xa),wl=t=>Wt(t,"position",xa),Cl=new Set(["image","url"]),Sl=t=>Wt(t,Cl,Al),kl=t=>Wt(t,"",Dl),Yt=()=>!0,Wt=(t,s,r)=>{const n=ha.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},Pl=t=>pl.test(t)&&!gl.test(t),xa=()=>!1,Dl=t=>vl.test(t),Al=t=>jl.test(t),_l=()=>{const t=ve("colors"),s=ve("spacing"),r=ve("blur"),n=ve("brightness"),a=ve("borderColor"),i=ve("borderRadius"),o=ve("borderSpacing"),l=ve("borderWidth"),c=ve("contrast"),d=ve("grayscale"),m=ve("hueRotate"),p=ve("invert"),h=ve("gap"),x=ve("gradientColorStops"),g=ve("gradientColorStopPositions"),f=ve("inset"),v=ve("margin"),b=ve("opacity"),j=ve("padding"),k=ve("saturate"),y=ve("scale"),E=ve("sepia"),N=ve("skew"),P=ve("space"),w=ve("translate"),$=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto",oe,s],M=()=>[oe,s],W=()=>["",rt,mt],A=()=>["auto",Rt,oe],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],de=()=>["","0",oe],je=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>[Rt,oe];return{cacheSize:500,separator:":",theme:{colors:[Yt],spacing:[rt,mt],blur:["none","",ht,oe],brightness:S(),borderColor:[t],borderRadius:["none","","full",ht,oe],borderSpacing:M(),borderWidth:W(),contrast:S(),grayscale:de(),hueRotate:S(),invert:de(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[bl,mt],inset:ee(),margin:ee(),opacity:S(),padding:M(),saturate:S(),scale:S(),sepia:de(),skew:S(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[ht]}],"break-after":[{"break-after":je()}],"break-before":[{"break-before":je()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),oe]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ht,oe]}],basis:[{basis:ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:de()}],shrink:[{shrink:de()}],order:[{order:["first","last","none",Ht,oe]}],"grid-cols":[{"grid-cols":[Yt]}],"col-start-end":[{col:["auto",{span:["full",Ht,oe]},oe]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Yt]}],"row-start-end":[{row:["auto",{span:[Ht,oe]},oe]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,s]}],"min-w":[{"min-w":[oe,s,"min","max","fit"]}],"max-w":[{"max-w":[oe,s,"none","full","min","max","fit","prose",{screen:[ht]},ht]}],h:[{h:[oe,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,s,"auto","min","max","fit"]}],"font-size":[{text:["base",ht,mt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Os]}],"font-family":[{font:[Yt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",Rt,Os]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rt,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rt,mt]}],"underline-offset":[{"underline-offset":["auto",rt,oe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),wl]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Nl]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Sl]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...C(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:C()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...C()]}],"outline-offset":[{"outline-offset":[rt,oe]}],"outline-w":[{outline:[rt,mt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[rt,mt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ht,kl]}],"shadow-color":[{shadow:[Yt]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ht,oe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[p]}],saturate:[{saturate:[k]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:S()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:S()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[Ht,oe]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rt,mt,Os]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ml=ml(_l);function B(...t){return Ml(ca(t))}const Qt=ks("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),T=u.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const o=n?qe:"button";return e.jsx(o,{"data-slot":"button",className:B(Qt({variant:s,size:r,className:t})),ref:i,...a})});T.displayName="Button";function q({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:B("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function re({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:B("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function ne({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:B("leading-none",t),...s})}function Jt({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:B("text-muted-foreground",t),...s})}function H({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:B("px-6 [&:last-child]:pb-6",t),...s})}function K({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:B("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var Tl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],El=Tl.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Il="Label",fa=u.forwardRef((t,s)=>e.jsx(El.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));fa.displayName=Il;var Rl=fa;function I({className:t,...s}){return e.jsx(Rl,{"data-slot":"label",className:B("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Ol=ks("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Te({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:B(Ol({variant:s}),t),...r})}function Ee({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:B("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}var Fl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ll=Fl.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),$l="Separator",un="horizontal",zl=["horizontal","vertical"],pa=u.forwardRef((t,s)=>{const{decorative:r,orientation:n=un,...a}=t,i=Wl(n)?n:un,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Ll.div,{"data-orientation":i,...l,...a,ref:s})});pa.displayName=$l;function Wl(t){return zl.includes(t)}var Bl=pa;function ga({className:t,orientation:s="horizontal",decorative:r=!0,...n}){return e.jsx(Bl,{"data-slot":"separator-root",decorative:r,orientation:s,className:B("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ql=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,n)=>n?n.toUpperCase():r.toLowerCase()),mn=t=>{const s=ql(t);return s.charAt(0).toUpperCase()+s.slice(1)},va=(...t)=>t.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=u.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>u.createElement("svg",{ref:c,...Hl,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:va("lucide",a),...l},[...o.map(([d,m])=>u.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,s)=>{const r=u.forwardRef(({className:n,...a},i)=>u.createElement(Yl,{ref:i,iconNode:s,className:va(`lucide-${Vl(mn(t))}`,`lucide-${t}`,n),...a}));return r.displayName=mn(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Pt=Q("archive",Ul);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sr=Q("arrow-left",Gl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Tt=Q("building",Xl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],He=Q("calendar",Kl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hn=Q("chart-column",Ql);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zl=Q("check",Jl);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ja=Q("chevron-down",ec);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sc=Q("chevron-left",tc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],nc=Q("chevron-right",rc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ic=Q("chevron-up",ac);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gt=Q("circle-alert",oc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ve=Q("circle-check-big",lc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fs=Q("circle-check",cc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Kt=Q("circle-x",dc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ft=Q("clock",uc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],rr=Q("copy",mc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],xc=Q("crown",hc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],pe=Q("dollar-sign",fc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],$e=Q("download",pc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],vc=Q("external-link",gc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zt=Q("eye-off",jc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tt=Q("eye",bc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],we=Q("file-text",yc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ba=Q("folder-open",Nc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Cc=Q("graduation-cap",wc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],kc=Q("image",Sc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],xn=Q("layout-dashboard",Pc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Xt=Q("link",Dc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_c=Q("log-out",Ac);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],nr=Q("mail",Mc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ec=Q("message-square",Tc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Rc=Q("monitor",Ic);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],fn=Q("moon",Oc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],kt=Q("package",Fc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],$c=Q("panel-left",Lc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Wc=Q("paperclip",zc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Vc=Q("phone",Bc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ke=Q("plus",qc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jr=Q("save",Hc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Uc=Q("search",Yc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xc=Q("settings",Gc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Dt=Q("shield",Kc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xs=Q("square-check-big",Qc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ps=Q("square-pen",Jc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],pn=Q("sun",Zc);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],br=Q("trash-2",ed);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],sd=Q("trending-down",td);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ar=Q("trending-up",rd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ad=Q("truck",nd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],gn=Q("upload",id);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xe=Q("user-plus",od);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],it=Q("user",ld);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ge=Q("users",cd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ud=Q("video",dd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lt=Q("x",md),hd="/assets/logo-CZhMzCMz.png";function es({size:t="md",showText:s=!0,className:r="",clickable:n=!1}){const a={sm:"h-10 w-10",md:"h-14 w-14",lg:"h-20 w-20",xl:"h-24 w-24"},i={sm:"text-base",md:"text-lg",lg:"text-2xl",xl:"text-3xl"},o=()=>{n&&(window.location.hash="dashboard")};return e.jsxs("div",{className:`flex items-center gap-3 ${n?"cursor-pointer hover:opacity-80 transition-opacity":""} ${r}`,onClick:o,children:[e.jsx("img",{src:hd,alt:"Ehub Project Management Logo",className:`${a[t]} object-contain`}),s&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`${i[t]} leading-none tracking-tight text-primary font-bold`,children:"Ehub"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Project Management"})]})]})}const xd="/api";class fd{constructor(){cs(this,"baseUrl");cs(this,"token",null);this.baseUrl=xd,this.token=localStorage.getItem("authToken")}async request(s,r={},n=0){const a=`${this.baseUrl}${s}`,i={"Content-Type":"application/json",...r.headers};this.token&&(i.Authorization=`Bearer ${this.token}`);try{const o=await fetch(a,{...r,headers:i});if(o.status===429){const c=o.headers.get("Retry-After"),d=c?parseInt(c,10):NaN,m=Number.isFinite(d)?Math.min(Math.max(d,1),30)*1e3:Math.min(1e3*Math.pow(2,n),8e3);return n<3?(await new Promise(p=>setTimeout(p,m)),this.request(s,r,n+1)):{error:"Too many requests. Please try again shortly."}}if(!o.ok){const c=await o.json().catch(()=>({}));throw new Error(c.error||`HTTP ${o.status}`)}return{data:await o.json()}}catch(o){if(n<2){const l=Math.min(1e3*Math.pow(2,n),4e3);return await new Promise(c=>setTimeout(c,l)),this.request(s,r,n+1)}return console.error(`API request failed for ${s}:`,o),{error:o instanceof Error?o.message:"Unknown error"}}}async login(s,r){const n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({identifier:s,password:r})});return n.data&&n.data.token&&(this.token=n.data.token,localStorage.setItem("authToken",this.token)),n}async signup(s){const r=await this.request("/auth/signup",{method:"POST",body:JSON.stringify(s)});return r.data&&r.data.token&&(this.token=r.data.token,localStorage.setItem("authToken",this.token)),r}logout(){this.token=null,localStorage.removeItem("authToken")}setToken(s){this.token=s,localStorage.setItem("authToken",s)}async getProjects(){return this.request("/projects")}async createProject(s){return this.request("/projects",{method:"POST",body:JSON.stringify(s)})}async updateProject(s,r){return this.request(`/projects/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteProject(s){return this.request(`/projects/${s}`,{method:"DELETE"})}async getTasks(){return this.request("/tasks")}async createTask(s){return this.request("/tasks",{method:"POST",body:JSON.stringify(s)})}async updateTask(s,r){return this.request(`/tasks/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteTask(s){return this.request(`/tasks/${s}`,{method:"DELETE"})}async getWorkLogs(){return this.request("/worklogs")}async createWorkLog(s){return this.request("/worklogs",{method:"POST",body:JSON.stringify(s)})}async getMaterials(){return this.request("/materials")}async createMaterial(s){return this.request("/materials",{method:"POST",body:JSON.stringify(s)})}async getUsers(){return this.request("/users")}async createClient(s){return this.request("/users/client",{method:"POST",body:JSON.stringify(s)})}async healthCheck(){return this.request("/health")}async broadcastToFabricators(s,r){return this.request("/projects/broadcast-fabricators",{method:"POST",body:JSON.stringify({projectId:s,message:r})})}async respondToAssignment(s,r,n){return this.request("/projects/respond-assignment",{method:"POST",body:JSON.stringify({projectId:s,response:r,assignmentId:n})})}}const be=new fd;function yr(t){return{id:t.id,name:t.name,email:t.email,role:t.role,school:t.school,secureId:t.secure_id,employeeNumber:t.employee_number,phone:t.phone,gcashNumber:t.gcash_number,clientProjectId:t.client_project_id}}function pd({onLogin:t,onShowSignup:s,onShowForgotPassword:r}){const[n,a]=u.useState({identifier:"",password:""}),[i,o]=u.useState(!1),[l,c]=u.useState(""),[d,m]=u.useState(!1),p=(x,g)=>{a(f=>({...f,[x]:g})),c("")},h=async x=>{x.preventDefault(),m(!0),c("");try{const g=await be.login(n.identifier,n.password);if(g.data){g.data.token&&be.setToken(g.data.token);const f=g.data.user,v=yr(f);t(v)}else{if(n.identifier.toLowerCase()==="admin"&&n.password==="password123"){const f={id:"admin-1",name:"Demo Administrator",email:"admin@ehub.com",role:"admin",school:"Ehub University",phone:"+63 123 456 7890",gcashNumber:"09123456789",secureId:"ADM001",employeeNumber:"EMP001",isActive:!0,createdAt:new Date().toISOString(),department:"Administration"};t(f);return}if(n.identifier.toLowerCase()==="supervisor"&&n.password==="password123"){const f={id:"supervisor-1",name:"Demo Supervisor",email:"supervisor@ehub.com",role:"supervisor",school:"Ehub University",phone:"+63 987 654 3210",gcashNumber:"09987654321",secureId:"SUP001",employeeNumber:"EMP101",isActive:!0,createdAt:new Date().toISOString(),department:"Demo Department"};t(f);return}throw new Error(g.error||"Login failed")}}catch(g){if(n.identifier.toLowerCase()==="admin"&&n.password==="password123"){const f={id:"admin-1",name:"Demo Administrator",email:"admin@ehub.com",role:"admin",school:"Ehub University",phone:"+63 123 456 7890",gcashNumber:"09123456789",secureId:"ADM001",employeeNumber:"EMP001",isActive:!0,createdAt:new Date().toISOString(),department:"Administration"};t(f);return}if(n.identifier.toLowerCase()==="supervisor"&&n.password==="password123"){const f={id:"supervisor-1",name:"Demo Supervisor",email:"supervisor@ehub.com",role:"supervisor",school:"Ehub University",phone:"+63 987 654 3210",gcashNumber:"09987654321",secureId:"SUP001",employeeNumber:"EMP101",isActive:!0,createdAt:new Date().toISOString(),department:"Demo Department"};t(f);return}c(g instanceof Error?g.message:"Login failed")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(q,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(re,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(es,{size:"xl",showText:!0,className:"font-[Archivo_Black]"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Dt,{className:"h-6 w-6 text-primary"}),e.jsx(ne,{className:"text-2xl font-[Archivo_Black]",children:"Ehub Project Management"})]}),e.jsx(Jt,{className:"text-base",children:"Enter your credentials to access the system"})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"identifier",children:"Employee ID / Secure ID / Email"}),e.jsx(K,{id:"identifier",type:"text",placeholder:"Enter your ID or email",value:n.identifier,onChange:x=>p("identifier",x.target.value),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use your Employee ID, Secure ID, or email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:n.password,onChange:x=>p("password",x.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!i),children:i?e.jsx(Zt,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})})]})]}),l&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:l})}),e.jsx(T,{type:"submit",className:"w-full h-12 text-base bg-accent hover:bg-accent/90 font-[Archivo_Black]",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Authenticating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Login"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:r,className:"text-sm text-primary hover:underline",children:"Forgot your password?"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(ga,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"New Fabricator?"})})]}),e.jsxs(T,{onClick:s,variant:"outline",className:"w-full h-11",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Sign Up as Fabricator"]})]})]})]})}function me({...t}){return e.jsx(Eo,{"data-slot":"select",...t})}function he({...t}){return e.jsx(Oo,{"data-slot":"select-value",...t})}function xe({className:t,size:s="default",children:r,...n}){return e.jsxs(Io,{"data-slot":"select-trigger","data-size":s,className:B("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,e.jsx(Ro,{asChild:!0,children:e.jsx(ja,{className:"size-4 opacity-50"})})]})}function fe({className:t,children:s,position:r="popper",...n}){return e.jsx(Fo,{children:e.jsxs(Lo,{"data-slot":"select-content",className:B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(gd,{}),e.jsx($o,{className:B("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(vd,{})]})})}function z({className:t,children:s,...r}){return e.jsxs(zo,{"data-slot":"select-item",className:B("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Wo,{children:e.jsx(Zl,{className:"size-4"})})}),e.jsx(Bo,{children:s})]})}function gd({className:t,...s}){return e.jsx(Vo,{"data-slot":"select-scroll-up-button",className:B("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ic,{className:"size-4"})})}function vd({className:t,...s}){return e.jsx(qo,{"data-slot":"select-scroll-down-button",className:B("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ja,{className:"size-4"})})}const ze=fr,jd=xr,ya=u.forwardRef(({className:t,...s},r)=>e.jsx(ys,{ref:r,className:B("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));ya.displayName=ys.displayName;const Ie=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(jd,{children:[e.jsx(ya,{}),e.jsxs(Ns,{ref:n,className:B("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,e.jsxs(ws,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(lt,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ie.displayName=Ns.displayName;const Re=({className:t,...s})=>e.jsx("div",{className:B("flex flex-col gap-2 text-center sm:text-left",t),...s});Re.displayName="DialogHeader";const Oe=u.forwardRef(({className:t,...s},r)=>e.jsx(Cs,{ref:r,className:B("text-lg leading-none font-semibold",t),...s}));Oe.displayName=Cs.displayName;const Fe=u.forwardRef(({className:t,...s},r)=>e.jsx(Ss,{ref:r,className:B("text-muted-foreground text-sm",t),...s}));Fe.displayName=Ss.displayName;const bd=ks("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ie({className:t,variant:s,asChild:r=!1,...n}){const a=r?qe:"span";return e.jsx(a,{"data-slot":"badge",className:B(bd({variant:s}),t),...n})}function yd({isOpen:t,user:s,onClose:r,onContinue:n}){const[a,i]=u.useState(10),[o,l]=u.useState(!1);u.useEffect(()=>{if(!t){i(10),l(!1);return}const d=setInterval(()=>{i(m=>m<=1?(clearInterval(d),n(),0):m-1)},1e3);return()=>clearInterval(d)},[t,n]);const c=async()=>{if(s!=null&&s.secureId)try{await navigator.clipboard.writeText(s.secureId),l(!0),setTimeout(()=>l(!1),2e3)}catch(d){console.error("Failed to copy ID:",d)}};return s?e.jsx(ze,{open:t,onOpenChange:()=>{},children:e.jsxs(Ie,{className:"max-w-md",children:[e.jsxs(Re,{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(Ve,{className:"h-8 w-8 text-green-600"})})}),e.jsx(Oe,{className:"text-xl",children:"Registration Successful!"}),e.jsx(Fe,{children:"Welcome to Ehub Project Management. Your account has been created successfully."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Account Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Name:"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email:"}),e.jsx("span",{className:"font-medium",children:s.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Role:"}),e.jsx(ie,{variant:"secondary",className:"capitalize",children:s.role})]})]})]}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-medium text-primary",children:"Your Login ID"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this ID to login to your account"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"bg-background border rounded-md px-4 py-2 font-mono text-lg font-bold text-primary",children:s.secureId}),e.jsxs(T,{variant:"outline",size:"sm",onClick:c,className:"h-10",children:[e.jsx(rr,{className:"h-4 w-4"}),o?"Copied!":"Copy"]})]})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Important:"})," Please save your Login ID (",s.secureId,") in a secure place. You'll need it to access your account."]})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Automatically continuing in ",a," seconds..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",onClick:r,className:"flex-1",children:"Close"}),e.jsx(T,{onClick:n,className:"flex-1",children:"Continue to Dashboard"})]})]})]})]})}):null}const Nd=["Ehub University","Philippine State College of Aeronautics","Technical Education and Skills Development Authority","University of the Philippines","Ateneo de Manila University","De La Salle University","University of Santo Tomas","Far Eastern University","Polytechnic University of the Philippines","Technological University of the Philippines","Mapa University","Adamson University","University of the East","National University","San Beda University","Other"];function wd({onSignup:t,onBackToMain:s}){const[r,n]=u.useState({name:"",email:"",password:"",confirmPassword:"",school:"",phone:"",gcashNumber:""}),[a,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState(""),[m,p]=u.useState(!1),[h,x]=u.useState(!1),[g,f]=u.useState(null),v=(E,N)=>{n(P=>({...P,[E]:N})),d("")},b=()=>r.name.trim()?r.email.trim()?r.email.includes("@")?r.password?r.password.length<6?"Password must be at least 6 characters":r.password!==r.confirmPassword?"Passwords do not match":r.school?r.phone.trim()?r.gcashNumber.trim()?null:"GCash number is required":"Phone number is required":"School is required":"Password is required":"Please enter a valid email":"Email is required":"Name is required",j=async E=>{E.preventDefault();const N=b();if(N){d(N);return}p(!0),d("");try{const P=await be.signup({name:r.name,email:r.email,password:r.password,school:r.school,phone:r.phone,gcashNumber:r.gcashNumber});if(P.data){const w=P.data.user||P.data,$=yr(w);f($),x(!0)}else throw new Error(P.error||"Signup failed")}catch(P){d(P instanceof Error?P.message:"Signup failed")}finally{p(!1)}},k=()=>{g&&t(g)},y=()=>{x(!1),s()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden py-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(q,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(re,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(es,{size:"xl",showText:!1})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Xe,{className:"h-6 w-6 text-accent"}),e.jsx(ne,{className:"text-2xl",children:"Fabricator Registration"})]}),e.jsx(Jt,{className:"text-base",children:"Create your fabricator account"})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Full Name"}),e.jsx(K,{id:"name",type:"text",placeholder:"Enter your full name",value:r.name,onChange:E=>v("name",E.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email Address"}),e.jsx(K,{id:"email",type:"email",placeholder:"Enter your email address",value:r.email,onChange:E=>v("email",E.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"password",type:a?"text":"password",placeholder:"Enter password",value:r.password,onChange:E=>v("password",E.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>i(!a),children:a?e.jsx(Zt,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"confirmPassword",type:o?"text":"password",placeholder:"Confirm password",value:r.confirmPassword,onChange:E=>v("confirmPassword",E.target.value),required:!0}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>l(!o),children:o?e.jsx(Zt,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"school",children:"School/Institution"}),e.jsxs(me,{value:r.school,onValueChange:E=>v("school",E),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select your school"})}),e.jsx(fe,{children:Nd.map(E=>e.jsx(z,{value:E,children:E},E))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number"}),e.jsx(K,{id:"phone",type:"tel",placeholder:"+63 9XX XXX XXXX",value:r.phone,onChange:E=>v("phone",E.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"gcashNumber",children:"GCash Number"}),e.jsx(K,{id:"gcashNumber",type:"tel",placeholder:"09XX XXX XXXX",value:r.gcashNumber,onChange:E=>v("gcashNumber",E.target.value),required:!0})]})]}),c&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:c})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Create Account"]})}),e.jsxs(T,{type:"button",variant:"outline",onClick:s,className:"w-full",disabled:m,children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"By creating an account, you agree to our terms of service and privacy policy."})})]})]})]}),e.jsx(yd,{isOpen:h,user:g,onClose:y,onContinue:k})]})}function Cd({onBackToLogin:t}){const[s,r]=u.useState(""),[n,a]=u.useState(!1),[i,o]=u.useState(!1),[l,c]=u.useState(""),d=async m=>{m.preventDefault(),a(!0),c("");try{console.log(`Password reset email would be sent to ${s}`),o(!0)}catch(p){c(p instanceof Error?p.message:"Failed to send reset email")}finally{a(!1)}};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(q,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(re,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(es,{size:"xl"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"h-6 w-6 text-green-600"}),e.jsx(ne,{className:"text-2xl text-green-600",children:"Reset Email Sent"})]}),e.jsx(Jt,{className:"text-base",children:"Check your email for password reset instructions"})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We've sent a password reset link to ",e.jsx("strong",{children:s})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The link will expire in 15 minutes for security purposes."})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs(T,{type:"button",onClick:t,className:"w-full",variant:"outline",children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})]})]})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-primary relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),e.jsxs(q,{className:"w-full max-w-md relative z-10 shadow-2xl border-0",children:[e.jsxs(re,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(es,{size:"xl"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(nr,{className:"h-6 w-6 text-primary"}),e.jsx(ne,{className:"text-2xl",children:"Reset Password"})]}),e.jsx(Jt,{className:"text-base",children:"Enter your email address and we'll send you a reset link"})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email Address"}),e.jsx(K,{id:"email",type:"email",placeholder:"Enter your email address",value:s,onChange:m=>r(m.target.value),required:!0})]}),l&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:l})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{type:"submit",className:"w-full",disabled:n||!s,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Sending Reset Email..."]}):e.jsxs(e.Fragment,{children:[e.jsx(nr,{className:"h-4 w-4 mr-2"}),"Send Reset Email"]})}),e.jsxs(T,{type:"button",variant:"outline",onClick:t,className:"w-full",disabled:n,children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsxs("p",{children:["Remember your password?"," ",e.jsx("button",{onClick:t,className:"text-primary hover:underline",children:"Sign in here"})]})})]})]})]})}const Ls=768;function Sd(){const[t,s]=u.useState(void 0);return u.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Ls-1}px)`),n=()=>{s(window.innerWidth<Ls)};return r.addEventListener("change",n),s(window.innerWidth<Ls),()=>r.removeEventListener("change",n)},[]),!!t}function kd({...t}){return e.jsx(fr,{"data-slot":"sheet",...t})}function Pd({...t}){return e.jsx(xr,{"data-slot":"sheet-portal",...t})}function Dd({className:t,...s}){return e.jsx(ys,{"data-slot":"sheet-overlay",className:B("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Ad({className:t,children:s,side:r="right",...n}){return e.jsxs(Pd,{children:[e.jsx(Dd,{}),e.jsxs(Ns,{"data-slot":"sheet-content",className:B("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[s,e.jsxs(ws,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(lt,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function _d({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:B("flex flex-col gap-1.5 p-4",t),...s})}function Md({className:t,...s}){return e.jsx(Cs,{"data-slot":"sheet-title",className:B("text-foreground font-semibold",t),...s})}function Td({className:t,...s}){return e.jsx(Ss,{"data-slot":"sheet-description",className:B("text-muted-foreground text-sm",t),...s})}function at(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function vn(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Ed(...t){return s=>{let r=!1;const n=t.map(a=>{const i=vn(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():vn(t[a],null)}}}}function Et(...t){return u.useCallback(Ed(...t),t)}function Na(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=p=>{var b;const{scope:h,children:x,...g}=p,f=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})};d.displayName=i+"Provider";function m(p,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||l,g=u.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,Id(a,...s)]}function Id(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var Rd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],bt=Rd.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Od(t,s){t&&pr.flushSync(()=>t.dispatchEvent(s))}function Bt(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function Fd(t,s=globalThis==null?void 0:globalThis.document){const r=Bt(t);u.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var Ld="DismissableLayer",ir="dismissableLayer.update",$d="dismissableLayer.pointerDownOutside",zd="dismissableLayer.focusOutside",jn,wa=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ca=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=u.useContext(wa),[m,p]=u.useState(null),h=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=u.useState({}),g=Et(s,P=>p(P)),f=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(v),j=m?f.indexOf(m):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,y=j>=b,E=Vd(P=>{const w=P.target,$=[...d.branches].some(D=>D.contains(w));!y||$||(a==null||a(P),o==null||o(P),P.defaultPrevented||l==null||l())},h),N=qd(P=>{const w=P.target;[...d.branches].some(D=>D.contains(w))||(i==null||i(P),o==null||o(P),P.defaultPrevented||l==null||l())},h);return Fd(P=>{j===d.layers.size-1&&(n==null||n(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},h),u.useEffect(()=>{if(m)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(jn=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),bn(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=jn)}},[m,h,r,d]),u.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),bn())},[m,d]),u.useEffect(()=>{const P=()=>x({});return document.addEventListener(ir,P),()=>document.removeEventListener(ir,P)},[]),e.jsx(bt.div,{...c,ref:g,style:{pointerEvents:k?y?"auto":"none":void 0,...t.style},onFocusCapture:at(t.onFocusCapture,N.onFocusCapture),onBlurCapture:at(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:at(t.onPointerDownCapture,E.onPointerDownCapture)})});Ca.displayName=Ld;var Wd="DismissableLayerBranch",Bd=u.forwardRef((t,s)=>{const r=u.useContext(wa),n=u.useRef(null),a=Et(s,n);return u.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(bt.div,{...t,ref:a})});Bd.displayName=Wd;function Vd(t,s=globalThis==null?void 0:globalThis.document){const r=Bt(t),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Sa($d,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function qd(t,s=globalThis==null?void 0:globalThis.document){const r=Bt(t),n=u.useRef(!1);return u.useEffect(()=>{const a=i=>{i.target&&!n.current&&Sa(zd,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function bn(){const t=new CustomEvent(ir);document.dispatchEvent(t)}function Sa(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?Od(a,i):a.dispatchEvent(i)}var At=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},Hd=gr.useId||(()=>{}),Yd=0;function Ud(t){const[s,r]=u.useState(Hd());return At(()=>{r(n=>n??String(Yd++))},[t]),s?`radix-${s}`:""}var Gd="Arrow",ka=u.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(bt.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ka.displayName=Gd;var Xd=ka;function Kd(t){const[s,r]=u.useState(void 0);return At(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var Nr="Popper",[Pa,Da]=Na(Nr),[Qd,Aa]=Pa(Nr),_a=t=>{const{__scopePopper:s,children:r}=t,[n,a]=u.useState(null);return e.jsx(Qd,{scope:s,anchor:n,onAnchorChange:a,children:r})};_a.displayName=Nr;var Ma="PopperAnchor",Ta=u.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=Aa(Ma,r),o=u.useRef(null),l=Et(s,o);return u.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:e.jsx(bt.div,{...a,ref:l})});Ta.displayName=Ma;var wr="PopperContent",[Jd,Zd]=Pa(wr),Ea=u.forwardRef((t,s)=>{var Ye,Ae,Be,Ce,F,V;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:g,...f}=t,v=Aa(wr,r),[b,j]=u.useState(null),k=Et(s,Y=>j(Y)),[y,E]=u.useState(null),N=Kd(y),P=(N==null?void 0:N.width)??0,w=(N==null?void 0:N.height)??0,$=n+(i!=="center"?"-"+i:""),D=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},ee=Array.isArray(d)?d:[d],M=ee.length>0,W={padding:D,boundary:ee.filter(tu),altBoundary:M},{refs:A,floatingStyles:G,placement:C,isPositioned:R,middlewareData:O}=Kn({strategy:"fixed",placement:$,whileElementsMounted:(...Y)=>na(...Y,{animationFrame:x==="always"}),elements:{reference:v.anchor},middleware:[Qn({mainAxis:a+w,alignmentAxis:o}),c&&Jn({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?ra():void 0,...W}),c&&Zn({...W}),ea({...W,apply:({elements:Y,rects:X,availableWidth:se,availableHeight:_})=>{const{width:L,height:te}=X.reference,le=Y.floating.style;le.setProperty("--radix-popper-available-width",`${se}px`),le.setProperty("--radix-popper-available-height",`${_}px`),le.setProperty("--radix-popper-anchor-width",`${L}px`),le.setProperty("--radix-popper-anchor-height",`${te}px`)}}),y&&ta({element:y,padding:l}),su({arrowWidth:P,arrowHeight:w}),h&&sa({strategy:"referenceHidden",...W})]}),[de,je]=Oa(C),S=Bt(g);At(()=>{R&&(S==null||S())},[R,S]);const U=(Ye=O.arrow)==null?void 0:Ye.x,ae=(Ae=O.arrow)==null?void 0:Ae.y,ye=((Be=O.arrow)==null?void 0:Be.centerOffset)!==0,[Ne,De]=u.useState();return At(()=>{b&&De(window.getComputedStyle(b).zIndex)},[b]),e.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:R?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(Ce=O.transformOrigin)==null?void 0:Ce.x,(F=O.transformOrigin)==null?void 0:F.y].join(" "),...((V=O.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Jd,{scope:r,placedSide:de,onArrowChange:E,arrowX:U,arrowY:ae,shouldHideArrow:ye,children:e.jsx(bt.div,{"data-side":de,"data-align":je,...f,ref:k,style:{...f.style,animation:R?void 0:"none"}})})})});Ea.displayName=wr;var Ia="PopperArrow",eu={top:"bottom",right:"left",bottom:"top",left:"right"},Ra=u.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=Zd(Ia,n),o=eu[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Xd,{...a,ref:r,style:{...a.style,display:"block"}})})});Ra.displayName=Ia;function tu(t){return t!==null}var su=t=>({name:"transformOrigin",options:t,fn(s){var v,b,j;const{placement:r,rects:n,middlewareData:a}=s,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,m]=Oa(r),p={start:"0%",center:"50%",end:"100%"}[m],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,x=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let g="",f="";return d==="bottom"?(g=o?p:`${h}px`,f=`${-c}px`):d==="top"?(g=o?p:`${h}px`,f=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,f=o?p:`${x}px`):d==="left"&&(g=`${n.floating.width+c}px`,f=o?p:`${x}px`),{data:{x:g,y:f}}}});function Oa(t){const[s,r="center"]=t.split("-");return[s,r]}var ru=_a,nu=Ta,au=Ea,iu=Ra,ou="Portal",Fa=u.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,i]=u.useState(!1);At(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?oa.createPortal(e.jsx(bt.div,{...n,ref:s}),o):null});Fa.displayName=ou;function lu(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var Cr=t=>{const{present:s,children:r}=t,n=cu(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),i=Et(n.ref,du(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:i}):null};Cr.displayName="Presence";function cu(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),i=u.useRef("none"),o=t?"mounted":"unmounted",[l,c]=lu(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=ds(n.current);i.current=l==="mounted"?d:"none"},[l]),At(()=>{const d=n.current,m=a.current;if(m!==t){const h=i.current,x=ds(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(m&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),At(()=>{if(s){let d;const m=s.ownerDocument.defaultView??window,p=x=>{const f=ds(n.current).includes(x.animationName);if(x.target===s&&f&&(c("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},h=x=>{x.target===s&&(i.current=ds(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function ds(t){return(t==null?void 0:t.animationName)||"none"}function du(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function uu({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=mu({defaultProp:s,onChange:r}),i=t!==void 0,o=i?t:n,l=Bt(r),c=u.useCallback(d=>{if(i){const p=typeof d=="function"?d(t):d;p!==t&&l(p)}else a(d)},[i,t,a,l]);return[o,c]}function mu({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),i=Bt(s);return u.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var hu="VisuallyHidden",La=u.forwardRef((t,s)=>e.jsx(bt.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));La.displayName=hu;var xu=La,[Ds]=Na("Tooltip",[Da]),As=Da(),$a="TooltipProvider",fu=700,or="tooltip.open",[pu,Sr]=Ds($a),za=t=>{const{__scopeTooltip:s,delayDuration:r=fu,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,[o,l]=u.useState(!0),c=u.useRef(!1),d=u.useRef(0);return u.useEffect(()=>{const m=d.current;return()=>window.clearTimeout(m)},[]),e.jsx(pu,{scope:s,isOpenDelayed:o,delayDuration:r,onOpen:u.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:u.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:u.useCallback(m=>{c.current=m},[]),disableHoverableContent:a,children:i})};za.displayName=$a;var _s="Tooltip",[gu,rs]=Ds(_s),Wa=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Sr(_s,t.__scopeTooltip),d=As(s),[m,p]=u.useState(null),h=Ud(),x=u.useRef(0),g=o??c.disableHoverableContent,f=l??c.delayDuration,v=u.useRef(!1),[b=!1,j]=uu({prop:n,defaultProp:a,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(or))):c.onClose(),i==null||i(P)}}),k=u.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),y=u.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v.current=!1,j(!0)},[j]),E=u.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j(!1)},[j]),N=u.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,j(!0),x.current=0},f)},[f,j]);return u.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(ru,{...d,children:e.jsx(gu,{scope:s,contentId:h,open:b,stateAttribute:k,trigger:m,onTriggerChange:p,onTriggerEnter:u.useCallback(()=>{c.isOpenDelayed?N():y()},[c.isOpenDelayed,N,y]),onTriggerLeave:u.useCallback(()=>{g?E():(window.clearTimeout(x.current),x.current=0)},[E,g]),onOpen:y,onClose:E,disableHoverableContent:g,children:r})})};Wa.displayName=_s;var lr="TooltipTrigger",Ba=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=rs(lr,r),i=Sr(lr,r),o=As(r),l=u.useRef(null),c=Et(s,l,a.onTriggerChange),d=u.useRef(!1),m=u.useRef(!1),p=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(nu,{asChild:!0,...o,children:e.jsx(bt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:at(t.onPointerMove,h=>{h.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:at(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:at(t.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:at(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:at(t.onBlur,a.onClose),onClick:at(t.onClick,a.onClose)})})});Ba.displayName=lr;var kr="TooltipPortal",[vu,ju]=Ds(kr,{forceMount:void 0}),Va=t=>{const{__scopeTooltip:s,forceMount:r,children:n,container:a}=t,i=rs(kr,s);return e.jsx(vu,{scope:s,forceMount:r,children:e.jsx(Cr,{present:r||i.open,children:e.jsx(Fa,{asChild:!0,container:a,children:n})})})};Va.displayName=kr;var Lt="TooltipContent",qa=u.forwardRef((t,s)=>{const r=ju(Lt,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,o=rs(Lt,t.__scopeTooltip);return e.jsx(Cr,{present:n||o.open,children:o.disableHoverableContent?e.jsx(Ha,{side:a,...i,ref:s}):e.jsx(bu,{side:a,...i,ref:s})})}),bu=u.forwardRef((t,s)=>{const r=rs(Lt,t.__scopeTooltip),n=Sr(Lt,t.__scopeTooltip),a=u.useRef(null),i=Et(s,a),[o,l]=u.useState(null),{trigger:c,onClose:d}=r,m=a.current,{onPointerInTransitChange:p}=n,h=u.useCallback(()=>{l(null),p(!1)},[p]),x=u.useCallback((g,f)=>{const v=g.currentTarget,b={x:g.clientX,y:g.clientY},j=wu(b,v.getBoundingClientRect()),k=Cu(b,j),y=Su(f.getBoundingClientRect()),E=Pu([...k,...y]);l(E),p(!0)},[p]);return u.useEffect(()=>()=>h(),[h]),u.useEffect(()=>{if(c&&m){const g=v=>x(v,m),f=v=>x(v,c);return c.addEventListener("pointerleave",g),m.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerleave",g),m.removeEventListener("pointerleave",f)}}},[c,m,x,h]),u.useEffect(()=>{if(o){const g=f=>{const v=f.target,b={x:f.clientX,y:f.clientY},j=(c==null?void 0:c.contains(v))||(m==null?void 0:m.contains(v)),k=!ku(b,o);j?h():k&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,m,o,d,h]),e.jsx(Ha,{...t,ref:i})}),[yu,Nu]=Ds(_s,{isInside:!1}),Ha=u.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=rs(Lt,r),d=As(r),{onClose:m}=c;return u.useEffect(()=>(document.addEventListener(or,m),()=>document.removeEventListener(or,m)),[m]),u.useEffect(()=>{if(c.trigger){const p=h=>{const x=h.target;x!=null&&x.contains(c.trigger)&&m()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,m]),e.jsx(Ca,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:m,children:e.jsxs(au,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(aa,{children:n}),e.jsx(yu,{scope:r,isInside:!0,children:e.jsx(xu,{id:c.contentId,role:"tooltip",children:a||n})})]})})});qa.displayName=Lt;var Ya="TooltipArrow",Ua=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=As(r);return Nu(Ya,r).isInside?null:e.jsx(iu,{...a,...n,ref:s})});Ua.displayName=Ya;function wu(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Cu(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Su(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function ku(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i].x,c=s[i].y,d=s[o].x,m=s[o].y;c>n!=m>n&&r<(d-l)*(n-c)/(m-c)+l&&(a=!a)}return a}function Pu(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Du(s)}function Du(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Au=za,_u=Wa,Mu=Ba,Tu=Va,Eu=qa,Iu=Ua;function Ga({delayDuration:t=0,...s}){return e.jsx(Au,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function Ru({...t}){return e.jsx(Ga,{children:e.jsx(_u,{"data-slot":"tooltip",...t})})}function Ou({...t}){return e.jsx(Mu,{"data-slot":"tooltip-trigger",...t})}function Fu({className:t,sideOffset:s=0,children:r,...n}){return e.jsx(Tu,{children:e.jsxs(Eu,{"data-slot":"tooltip-content",sideOffset:s,className:B("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,e.jsx(Iu,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Lu="sidebar_state",$u=60*60*24*7,zu="16rem",Wu="18rem",Bu="3rem",Vu="b",Xa=u.createContext(null);function Ms(){const t=u.useContext(Xa);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function qu({defaultOpen:t=!0,open:s,onOpenChange:r,className:n,style:a,children:i,...o}){const l=Sd(),[c,d]=u.useState(!1),[m,p]=u.useState(t),h=s??m,x=u.useCallback(b=>{const j=typeof b=="function"?b(h):b;r?r(j):p(j),document.cookie=`${Lu}=${j}; path=/; max-age=${$u}`},[r,h]),g=u.useCallback(()=>l?d(b=>!b):x(b=>!b),[l,x,d]);u.useEffect(()=>{const b=j=>{j.key===Vu&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),g())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[g]);const f=h?"expanded":"collapsed",v=u.useMemo(()=>({state:f,open:h,setOpen:x,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:g}),[f,h,x,l,c,d,g]);return e.jsx(Xa.Provider,{value:v,children:e.jsx(Ga,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":zu,"--sidebar-width-icon":Bu,...a},className:B("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...o,children:i})})})}function Hu({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:n,children:a,...i}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=Ms();return r==="none"?e.jsx("div",{"data-slot":"sidebar",className:B("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...i,children:a}):o?e.jsx(kd,{open:c,onOpenChange:d,...i,children:e.jsxs(Ad,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Wu},side:t,children:[e.jsxs(_d,{className:"sr-only",children:[e.jsx(Md,{children:"Sidebar"}),e.jsx(Td,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?r:"","data-variant":s,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:B("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:B("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...i,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function Yu({className:t,onClick:s,...r}){const{toggleSidebar:n}=Ms();return e.jsxs(T,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:B("size-7",t),onClick:a=>{s==null||s(a),n()},...r,children:[e.jsx($c,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function Uu({className:t,...s}){return e.jsx("main",{"data-slot":"sidebar-inset",className:B("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...s})}function Gu({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:B("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})}function Xu({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:B("relative flex w-full min-w-0 flex-col p-2",t),...s})}function Ku({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:B("w-full text-sm",t),...s})}function Qu({className:t,...s}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:B("flex w-full min-w-0 flex-col gap-1",t),...s})}function Ju({className:t,...s}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:B("group/menu-item relative",t),...s})}const Zu=ks("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function em({asChild:t=!1,isActive:s=!1,variant:r="default",size:n="default",tooltip:a,className:i,...o}){const l=t?qe:"button",{isMobile:c,state:d}=Ms(),m=e.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":s,className:B(Zu({variant:r,size:n}),i),...o});return a?(typeof a=="string"&&(a={children:a}),e.jsxs(Ru,{children:[e.jsx(Ou,{asChild:!0,children:m}),e.jsx(Fu,{side:"right",align:"center",hidden:d!=="collapsed"||c,...a})]})):m}function tm({currentUser:t}){const{isMobile:s,setOpenMobile:r,state:n}=Ms(),i=(()=>{const o=[{title:"Dashboard",url:"#dashboard",icon:xn},{title:"Projects",url:"#projects",icon:ba}];return t.role==="admin"?[...o,{title:"Archives",url:"#archives",icon:Pt},{title:"Tasks",url:"#tasks",icon:xs},{title:"Users",url:"#users",icon:Ge},{title:"Revenue",url:"#revenue",icon:pe},{title:"Reports",url:"#reports",icon:hn},{title:"Settings",url:"#settings",icon:Xc}]:t.role==="supervisor"?[...o,{title:"Archives",url:"#archives",icon:Pt},{title:"Tasks",url:"#tasks",icon:xs},{title:"Team",url:"#team",icon:Ge},{title:"Reports",url:"#reports",icon:hn}]:t.role==="fabricator"?[...o,{title:"Work Log",url:"#worklog",icon:He},{title:"Materials",url:"#materials",icon:kt},{title:"Tasks",url:"#tasks",icon:xs}]:t.role==="client"?[{title:"Dashboard",url:"#dashboard",icon:xn},{title:"Project Status",url:"#project-status",icon:tt},{title:"Documentation",url:"#documentation",icon:$e}]:o})();return e.jsx(Hu,{className:"border-r-0",collapsible:"offcanvas",children:e.jsxs(Gu,{className:"gap-0 bg-sidebar",children:[e.jsx("div",{className:"p-4 border-b border-sidebar-border",children:e.jsx("h3",{className:`text-sm text-sidebar-foreground/70 tracking-wide uppercase transition-opacity ${n==="collapsed"?"opacity-0 w-0 overflow-hidden":""}`,children:"Navigation"})}),e.jsx(Xu,{className:"py-2",children:e.jsx(Ku,{children:e.jsx(Qu,{className:"gap-1 px-2",children:i.map(o=>e.jsx(Ju,{children:e.jsx(em,{asChild:!0,className:"hover:bg-sidebar-accent rounded-lg transition-colors",tooltip:n==="collapsed"?o.title:void 0,children:e.jsxs("a",{href:o.url,className:"flex items-center gap-3 px-3 py-2.5",onClick:l=>{const c=o.url;c.startsWith("#")&&(l.preventDefault(),window.location.hash=c),s&&r(!1)},children:[e.jsx(o.icon,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:n==="collapsed"?"sr-only":"",children:o.title})]})})},o.title))})})})]})})}function sm({...t}){return e.jsx(Ho,{"data-slot":"dropdown-menu",...t})}function rm({...t}){return e.jsx(Yo,{"data-slot":"dropdown-menu-trigger",...t})}function nm({className:t,sideOffset:s=4,...r}){return e.jsx(Uo,{children:e.jsx(Go,{"data-slot":"dropdown-menu-content",sideOffset:s,className:B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function $s({className:t,inset:s,variant:r="default",...n}){return e.jsx(Xo,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:B("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function am({currentTheme:t,onThemeChange:s,isTransitioning:r=!1}){return e.jsxs(sm,{children:[e.jsx(rm,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(pn,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(fn,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(nm,{align:"end",children:[e.jsxs($s,{onClick:()=>s("light"),className:t==="light"?"bg-accent text-accent-foreground":"",children:[e.jsx(pn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Light"})]}),e.jsxs($s,{onClick:()=>s("dark"),className:t==="dark"?"bg-accent text-accent-foreground":"",children:[e.jsx(fn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dark"})]}),e.jsxs($s,{onClick:()=>s("auto"),className:t==="auto"?"bg-accent text-accent-foreground":"",children:[e.jsx(Rc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Auto"}),r&&e.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Transitioning"})]})]})]})}function im({currentUser:t,onLogout:s,currentTheme:r,onThemeChange:n,isTransitioning:a}){const i=()=>{switch(t.role){case"admin":return e.jsx(xc,{className:"h-4 w-4"});case"supervisor":return e.jsx(Dt,{className:"h-4 w-4"});case"fabricator":return e.jsx(Dt,{className:"h-4 w-4"});default:return e.jsx(Dt,{className:"h-4 w-4"})}},o=()=>{switch(t.role){case"admin":return e.jsx(ie,{className:"bg-accent text-accent-foreground",children:"Admin"});case"supervisor":return e.jsx(ie,{className:"bg-primary text-primary-foreground",children:"Supervisor"});case"fabricator":return e.jsx(ie,{className:"bg-secondary text-secondary-foreground",children:"Fabricator"});case"client":return e.jsx(ie,{variant:"outline",className:"border-primary text-primary",children:"Client"});default:return e.jsx(ie,{variant:"outline",children:"User"})}};return e.jsxs("header",{className:"flex items-center justify-between px-3 md:px-6 py-3 bg-card border-b shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Yu,{}),e.jsx(es,{size:"md",showText:!0,clickable:!0})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(am,{currentTheme:r,onThemeChange:n,isTransitioning:a}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-2 md:px-4 py-2 bg-muted/50 rounded-lg max-w-[150px] md:max-w-none",children:[i(),e.jsxs("div",{className:"text-right overflow-hidden",children:[e.jsx("p",{className:"text-xs md:text-sm font-medium truncate",children:t.name}),e.jsxs("div",{className:"flex items-center justify-end gap-1 md:gap-2",children:[e.jsx("div",{className:"scale-75 md:scale-100 origin-right",children:o()}),e.jsx("span",{className:"hidden sm:inline text-[10px] md:text-xs text-muted-foreground font-mono",children:t.secureId})]})]})]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:s,className:"ml-1 md:ml-2 border-border hover:bg-destructive hover:text-destructive-foreground",title:"Logout",children:[e.jsx(_c,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}function om({children:t,currentUser:s,onLogout:r,currentTheme:n,onThemeChange:a,isTransitioning:i}){return e.jsx(qu,{children:e.jsxs("div",{className:"min-h-screen flex w-full",children:[e.jsx(tm,{currentUser:s}),e.jsxs(Uu,{className:"flex-1",children:[e.jsx(im,{currentUser:s,onLogout:r,currentTheme:n,onThemeChange:a,isTransitioning:i}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:t})]})]})})}const us=t=>{window.location.hash=t};function lm({projects:t,tasks:s,users:r,currentUser:n}){const a=()=>{if(n.role==="admin")return{projects:t,tasks:s,users:r};if(n.role==="supervisor"){const f=t.filter(b=>b.supervisorId===n.id),v=s.filter(b=>f.some(j=>j.id===b.projectId));return{projects:f,tasks:v,users:r.filter(b=>b.role==="fabricator")}}const x=s.filter(f=>f.assignedTo===n.id);return{projects:t.filter(f=>f.fabricatorIds.includes(n.id)),tasks:x,users:[]}},{projects:i,tasks:o,users:l}=a(),c=i.filter(x=>x.status==="in-progress").length,d=o.filter(x=>x.status==="completed").length,p=(()=>{if(n.role==="admin"){const g=i.reduce((v,b)=>v+b.budget,0);return{title:"Total Revenue",value:`${i.reduce((v,b)=>v+b.revenue,0).toLocaleString()}`,description:`${g.toLocaleString()} budgeted`,canView:!0}}if(n.role==="supervisor"){const g=i.reduce((v,b)=>v+b.budget,0),f=i.reduce((v,b)=>v+b.spent,0);return{title:"Project Budget",value:`${g.toLocaleString()}`,description:`${f.toLocaleString()} spent`,canView:!0}}return{title:"Assigned Value",value:`${i.reduce((g,f)=>g+f.revenue,0).toLocaleString()}`,description:`${i.length} assigned projects`,canView:!0}})(),h=[{title:"Active Projects",value:c.toString(),icon:ba,description:`${i.length} total projects`,onClick:()=>us("projects")},{title:"Completed Tasks",value:d.toString(),icon:xs,description:`${o.length} total tasks`,onClick:()=>us("tasks")},...n.role!=="fabricator"?[{title:"Team Members",value:l.length.toString(),icon:Ge,description:"Available resources",onClick:()=>us("users")}]:[],{title:p.title,value:p.value,icon:pe,description:p.description,onClick:()=>us("revenue")}];return e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:h.map((x,g)=>e.jsxs(q,{className:"overflow-hidden border-0 shadow-sm hover:shadow-md transition-all cursor-pointer md:hover:scale-105 active:scale-95",onClick:x.onClick,children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 bg-gradient-to-br from-primary/5 to-transparent px-4 md:px-6",children:[e.jsx(ne,{className:"text-xs md:text-sm font-medium",children:x.title}),e.jsx("div",{className:`p-1.5 md:p-2 rounded-lg ${g===0?"bg-primary/10 text-primary":g===1?"bg-accent/10 text-accent":g===2?"bg-secondary/10 text-secondary":"bg-accent/10 text-accent"}`,children:e.jsx(x.icon,{className:"h-4 w-4 md:h-5 md:w-5"})})]}),e.jsxs(H,{className:"pt-4 px-4 md:px-6",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:x.value}),e.jsx("p",{className:"text-[10px] md:text-sm text-muted-foreground mt-1 truncate",children:x.description})]})]},x.title))})}function cm(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=p=>{var b;const{scope:h,children:x,...g}=p,f=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})};d.displayName=i+"Provider";function m(p,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||l,g=u.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,dm(a,...s)]}function dm(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var um=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ka=um.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Pr="Progress",Dr=100,[mm]=cm(Pr),[hm,xm]=mm(Pr),Qa=u.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=fm,...o}=t;(a||a===0)&&!yn(a)&&console.error(pm(`${a}`,"Progress"));const l=yn(a)?a:Dr;n!==null&&!Nn(n,l)&&console.error(gm(`${n}`,"Progress"));const c=Nn(n,l)?n:null,d=ps(c)?i(c,l):void 0;return e.jsx(hm,{scope:r,value:c,max:l,children:e.jsx(Ka.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ps(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":ei(c,l),"data-value":c??void 0,"data-max":l,...o,ref:s})})});Qa.displayName=Pr;var Ja="ProgressIndicator",Za=u.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=xm(Ja,r);return e.jsx(Ka.div,{"data-state":ei(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});Za.displayName=Ja;function fm(t,s){return`${Math.round(t/s*100)}%`}function ei(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function ps(t){return typeof t=="number"}function yn(t){return ps(t)&&!isNaN(t)&&t>0}function Nn(t,s){return ps(t)&&!isNaN(t)&&t<=s&&t>=0}function pm(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Dr}\`.`}function gm(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Dr} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vm=Qa,jm=Za;function ts({className:t,value:s,...r}){return e.jsx(vm,{"data-slot":"progress",className:B("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:e.jsx(jm,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function bm({projects:t,currentUser:s}){const n=s.role==="admin"?t:s.role==="supervisor"?t.filter(o=>o.supervisorId===s.id):t.filter(o=>o.fabricatorIds.includes(s.id)),a=o=>{switch(o){case"completed":return"default";case"in-progress":return"secondary";case"planning":return"outline";case"review":return"destructive";case"on-hold":return"destructive";default:return"outline"}},i=o=>{switch(o){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}};return e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Project Overview"})}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(o=>e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm",children:o.name}),e.jsx(ie,{variant:a(o.status),children:o.status}),e.jsx(ie,{variant:i(o.priority),children:o.priority})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ts,{value:o.progress,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-12",children:[o.progress,"%"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(o.endDate).toLocaleDateString()]})]})},o.id)),n.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No projects assigned to you"})]})})]})}function ym({tasks:t,projects:s,currentUser:r,onUpdateTaskStatus:n}){const i=(()=>{if(r.role==="admin")return t;if(r.role==="supervisor"){const x=s.filter(g=>g.supervisorId===r.id);return t.filter(g=>x.some(f=>f.id===g.projectId))}return t.filter(x=>x.assignedTo===r.id)})().slice(0,8),o=x=>{switch(x){case"completed":return e.jsx(Ve,{className:"h-4 w-4 text-green-500"});case"in-progress":return e.jsx(Ft,{className:"h-4 w-4 text-blue-500"});case"blocked":return e.jsx(gt,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ft,{className:"h-4 w-4 text-gray-400"})}},l=x=>{switch(x){case"completed":return"default";case"in-progress":return"secondary";case"blocked":return"destructive";case"pending":return"outline";default:return"outline"}},c=x=>{switch(x){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},d=x=>{const g=s.find(f=>f.id===x);return(g==null?void 0:g.name)||"Unknown Project"},m=x=>r.role==="fabricator"&&x.assignedTo===r.id,p=x=>(r.role==="admin"||r.role==="supervisor")&&x.status!=="completed",h=x=>{switch(x){case"pending":return"in-progress";case"in-progress":return"completed";case"blocked":return"completed";case"completed":default:return"completed"}};return e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Recent Tasks"})}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[i.map(x=>e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o(x.status),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm",children:x.title}),e.jsx(ie,{variant:l(x.status),children:x.status}),e.jsx(ie,{variant:c(x.priority),children:x.priority})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d(x.projectId),"  Due:"," ",x.dueDate?new Date(x.dueDate).toLocaleDateString():"No due date"]})]})]}),n&&e.jsxs("div",{className:"flex gap-2",children:[m(x)&&x.status!=="completed"&&e.jsxs(T,{size:"sm",variant:"outline",onClick:()=>{n(x.id,h(x.status))},children:[x.status==="pending"&&"Start",x.status==="in-progress"&&"Complete",x.status==="blocked"&&"Complete"]}),p(x)&&e.jsxs(T,{size:"sm",variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>n(x.id,"completed"),children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Done"]})]})]},x.id)),i.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No tasks available"})]})})]})}function et({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:B("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function ce(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function We(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function _e(t,s){const r=ce(t);return isNaN(s)?We(t,NaN):(s&&r.setDate(r.getDate()+s),r)}function Qe(t,s){const r=ce(t);if(isNaN(s))return We(t,NaN);if(!s)return r;const n=r.getDate(),a=We(t,r.getTime());a.setMonth(r.getMonth()+s+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const Ar=6048e5,Nm=864e5;let wm={};function ns(){return wm}function st(t,s){var l,c,d,m;const r=ns(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=ce(t),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function _t(t){return st(t,{weekStartsOn:1})}function ti(t){const s=ce(t),r=s.getFullYear(),n=We(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=_t(n),i=We(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=_t(i);return s.getTime()>=a.getTime()?r+1:s.getTime()>=o.getTime()?r:r-1}function $t(t){const s=ce(t);return s.setHours(0,0,0,0),s}function gs(t){const s=ce(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function Ze(t,s){const r=$t(t),n=$t(s),a=+r-gs(r),i=+n-gs(n);return Math.round((a-i)/Nm)}function Cm(t){const s=ti(t),r=We(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),_t(r)}function cr(t,s){const r=s*7;return _e(t,r)}function Sm(t,s){return Qe(t,s*12)}function km(t){let s;return t.forEach(function(r){const n=ce(r);(s===void 0||s<n||isNaN(Number(n)))&&(s=n)}),s||new Date(NaN)}function Pm(t){let s;return t.forEach(r=>{const n=ce(r);(!s||s>n||isNaN(+n))&&(s=n)}),s||new Date(NaN)}function Me(t,s){const r=$t(t),n=$t(s);return+r==+n}function _r(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Dm(t){if(!_r(t)&&typeof t!="number")return!1;const s=ce(t);return!isNaN(Number(s))}function ss(t,s){const r=ce(t),n=ce(s),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function Am(t,s,r){const n=st(t,r),a=st(s,r),i=+n-gs(n),o=+a-gs(a);return Math.round((i-o)/Ar)}function Mr(t){const s=ce(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function Le(t){const s=ce(t);return s.setDate(1),s.setHours(0,0,0,0),s}function si(t){const s=ce(t),r=We(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Tr(t,s){var l,c,d,m;const r=ns(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=ce(t),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function ri(t){return Tr(t,{weekStartsOn:1})}const _m={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mm=(t,s,r)=>{let n;const a=_m[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function zs(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Tm={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Em={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Im={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rm={date:zs({formats:Tm,defaultWidth:"full"}),time:zs({formats:Em,defaultWidth:"full"}),dateTime:zs({formats:Im,defaultWidth:"full"})},Om={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fm=(t,s,r,n)=>Om[t];function Ut(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const Lm={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$m={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zm={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wm={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qm=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Hm={ordinalNumber:qm,era:Ut({values:Lm,defaultWidth:"wide"}),quarter:Ut({values:$m,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ut({values:zm,defaultWidth:"wide"}),day:Ut({values:Wm,defaultWidth:"wide"}),dayPeriod:Ut({values:Bm,defaultWidth:"wide",formattingValues:Vm,defaultFormattingWidth:"wide"})};function Gt(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Um(l,p=>p.test(o)):Ym(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const m=s.slice(o.length);return{value:d,rest:m}}}function Ym(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Um(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Gm(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],i=s.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=s.slice(a.length);return{value:o,rest:l}}}const Xm=/^(\d+)(th|st|nd|rd)?/i,Km=/\d+/i,Qm={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jm={any:[/^b/i,/^(a|c)/i]},Zm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eh={any:[/1/i,/2/i,/3/i,/4/i]},th={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ah={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ih={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oh={ordinalNumber:Gm({matchPattern:Xm,parsePattern:Km,valueCallback:t=>parseInt(t,10)}),era:Gt({matchPatterns:Qm,defaultMatchWidth:"wide",parsePatterns:Jm,defaultParseWidth:"any"}),quarter:Gt({matchPatterns:Zm,defaultMatchWidth:"wide",parsePatterns:eh,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gt({matchPatterns:th,defaultMatchWidth:"wide",parsePatterns:sh,defaultParseWidth:"any"}),day:Gt({matchPatterns:rh,defaultMatchWidth:"wide",parsePatterns:nh,defaultParseWidth:"any"}),dayPeriod:Gt({matchPatterns:ah,defaultMatchWidth:"any",parsePatterns:ih,defaultParseWidth:"any"})},ni={code:"en-US",formatDistance:Mm,formatLong:Rm,formatRelative:Fm,localize:Hm,match:oh,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lh(t){const s=ce(t);return Ze(s,si(s))+1}function ai(t){const s=ce(t),r=+_t(s)-+Cm(s);return Math.round(r/Ar)+1}function ii(t,s){var m,p,h,x;const r=ce(t),n=r.getFullYear(),a=ns(),i=(s==null?void 0:s.firstWeekContainsDate)??((p=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(h=a.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=We(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=st(o,s),c=We(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=st(c,s);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function ch(t,s){var l,c,d,m;const r=ns(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=ii(t,s),i=We(t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),st(i,s)}function oi(t,s){const r=ce(t),n=+st(r,s)-+ch(r,s);return Math.round(n/Ar)+1}function ue(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const xt={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return ue(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):ue(r+1,2)},d(t,s){return ue(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return ue(t.getHours()%12||12,s.length)},H(t,s){return ue(t.getHours(),s.length)},m(t,s){return ue(t.getMinutes(),s.length)},s(t,s){return ue(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ue(a,s.length)}},It={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wn={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return xt.y(t,s)},Y:function(t,s,r,n){const a=ii(t,n),i=a>0?a:1-a;if(s==="YY"){const o=i%100;return ue(o,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):ue(i,s.length)},R:function(t,s){const r=ti(t);return ue(r,s.length)},u:function(t,s){const r=t.getFullYear();return ue(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return ue(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return ue(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return xt.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return ue(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=oi(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):ue(a,s.length)},I:function(t,s,r){const n=ai(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):ue(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):xt.d(t,s)},D:function(t,s,r){const n=lh(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ue(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return ue(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return ue(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return ue(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=It.noon:n===0?a=It.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=It.evening:n>=12?a=It.afternoon:n>=4?a=It.morning:a=It.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return xt.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):xt.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ue(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):ue(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):xt.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):xt.s(t,s)},S:function(t,s){return xt.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return Sn(n);case"XXXX":case"XX":return St(n);case"XXXXX":case"XXX":default:return St(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return Sn(n);case"xxxx":case"xx":return St(n);case"xxxxx":case"xxx":default:return St(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Cn(n,":");case"OOOO":default:return"GMT"+St(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Cn(n,":");case"zzzz":default:return"GMT"+St(n,":")}},t:function(t,s,r){const n=Math.trunc(t.getTime()/1e3);return ue(n,s.length)},T:function(t,s,r){const n=t.getTime();return ue(n,s.length)}};function Cn(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+s+ue(i,2)}function Sn(t,s){return t%60===0?(t>0?"-":"+")+ue(Math.abs(t)/60,2):St(t,s)}function St(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=ue(Math.trunc(n/60),2),i=ue(n%60,2);return r+a+s+i}const kn=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},li=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},dh=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return kn(t,s);let i;switch(n){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",kn(n,s)).replace("{{time}}",li(a,s))},uh={p:li,P:dh},mh=/^D+$/,hh=/^Y+$/,xh=["D","DD","YY","YYYY"];function fh(t){return mh.test(t)}function ph(t){return hh.test(t)}function gh(t,s,r){const n=vh(t,s,r);if(console.warn(n),xh.includes(t))throw new RangeError(n)}function vh(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yh=/^'([^]*?)'?$/,Nh=/''/g,wh=/[a-zA-Z]/;function ct(t,s,r){var m,p,h,x,g,f,v,b;const n=ns(),a=(r==null?void 0:r.locale)??n.locale??ni,i=(r==null?void 0:r.firstWeekContainsDate)??((p=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((f=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((b=(v=n.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??0,l=ce(t);if(!Dm(l))throw new RangeError("Invalid time value");let c=s.match(bh).map(j=>{const k=j[0];if(k==="p"||k==="P"){const y=uh[k];return y(j,a.formatLong)}return j}).join("").match(jh).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const k=j[0];if(k==="'")return{isToken:!1,value:Ch(j)};if(wn[k])return{isToken:!0,value:j};if(k.match(wh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(j=>{if(!j.isToken)return j.value;const k=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&ph(k)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fh(k))&&gh(k,s,String(t));const y=wn[k[0]];return y(l,k,a.localize,d)}).join("")}function Ch(t){const s=t.match(yh);return s?s[1].replace(Nh,"'"):t}function Sh(t){const s=ce(t),r=s.getFullYear(),n=s.getMonth(),a=We(t,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function kh(t){return Math.trunc(+ce(t)/1e3)}function Ph(t){const s=ce(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(0,0,0,0),s}function Dh(t,s){return Am(Ph(t),Le(t),s)+1}function dr(t,s){const r=ce(t),n=ce(s);return r.getTime()>n.getTime()}function ci(t,s){const r=ce(t),n=ce(s);return+r<+n}function Er(t,s){const r=ce(t),n=ce(s);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Ah(t,s){const r=ce(t),n=ce(s);return r.getFullYear()===n.getFullYear()}function Ws(t,s){return _e(t,-s)}function Bs(t,s){const r=ce(t),n=r.getFullYear(),a=r.getDate(),i=We(t,0);i.setFullYear(n,s,15),i.setHours(0,0,0,0);const o=Sh(i);return r.setMonth(s,Math.min(a,o)),r}function Pn(t,s){const r=ce(t);return isNaN(+r)?We(t,NaN):(r.setFullYear(s),r)}var Z=function(){return Z=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},Z.apply(this,arguments)};function _h(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function di(t,s,r){for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}function as(t){return t.mode==="multiple"}function is(t){return t.mode==="range"}function Ts(t){return t.mode==="single"}var Mh={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Th(t,s){return ct(t,"LLLL y",s)}function Eh(t,s){return ct(t,"d",s)}function Ih(t,s){return ct(t,"LLLL",s)}function Rh(t){return"".concat(t)}function Oh(t,s){return ct(t,"cccccc",s)}function Fh(t,s){return ct(t,"yyyy",s)}var Lh=Object.freeze({__proto__:null,formatCaption:Th,formatDay:Eh,formatMonthCaption:Ih,formatWeekNumber:Rh,formatWeekdayName:Oh,formatYearCaption:Fh}),$h=function(t,s,r){return ct(t,"do MMMM (EEEE)",r)},zh=function(){return"Month: "},Wh=function(){return"Go to next month"},Bh=function(){return"Go to previous month"},Vh=function(t,s){return ct(t,"cccc",s)},qh=function(t){return"Week n. ".concat(t)},Hh=function(){return"Year: "},Yh=Object.freeze({__proto__:null,labelDay:$h,labelMonthDropdown:zh,labelNext:Wh,labelPrevious:Bh,labelWeekNumber:qh,labelWeekday:Vh,labelYearDropdown:Hh});function Uh(){var t="buttons",s=Mh,r=ni,n={},a={},i=1,o={},l=new Date;return{captionLayout:t,classNames:s,formatters:Lh,labels:Yh,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function Gh(t){var s=t.fromYear,r=t.toYear,n=t.fromMonth,a=t.toMonth,i=t.fromDate,o=t.toDate;return n?i=Le(n):s&&(i=new Date(s,0,1)),a?o=Mr(a):r&&(o=new Date(r,11,31)),{fromDate:i?$t(i):void 0,toDate:o?$t(o):void 0}}var ui=u.createContext(void 0);function Xh(t){var s,r=t.initialProps,n=Uh(),a=Gh(r),i=a.fromDate,o=a.toDate,l=(s=r.captionLayout)!==null&&s!==void 0?s:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Ts(r)||as(r)||is(r))&&(c=r.onSelect);var d=Z(Z(Z({},n),r),{captionLayout:l,classNames:Z(Z({},n.classNames),r.classNames),components:Z({},r.components),formatters:Z(Z({},n.formatters),r.formatters),fromDate:i,labels:Z(Z({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Z(Z({},n.modifiers),r.modifiers),modifiersClassNames:Z(Z({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Z(Z({},n.styles),r.styles),toDate:o});return e.jsx(ui.Provider,{value:d,children:t.children})}function ge(){var t=u.useContext(ui);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function mi(t){var s=ge(),r=s.locale,n=s.classNames,a=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function Kh(t){return e.jsx("svg",Z({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hi(t){var s,r,n=t.onChange,a=t.value,i=t.children,o=t.caption,l=t.className,c=t.style,d=ge(),m=(r=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:Kh;return e.jsxs("div",{className:l,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,e.jsx(m,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function Qh(t){var s,r=ge(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,m=r.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var p=[];if(Ah(n,a))for(var h=Le(n),x=n.getMonth();x<=a.getMonth();x++)p.push(Bs(h,x));else for(var h=Le(new Date),x=0;x<=11;x++)p.push(Bs(h,x));var g=function(v){var b=Number(v.target.value),j=Bs(Le(t.displayMonth),b);t.onChange(j)},f=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:hi;return e.jsx(f,{name:"months","aria-label":m(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:p.map(function(v){return e.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function Jh(t){var s,r=t.displayMonth,n=ge(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,m=n.formatters.formatYearCaption,p=n.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var x=a.getFullYear(),g=i.getFullYear(),f=x;f<=g;f++)h.push(Pn(si(new Date),f));var v=function(j){var k=Pn(Le(r),Number(j.target.value));t.onChange(k)},b=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:hi;return e.jsx(b,{name:"years","aria-label":p(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:m(r,{locale:o}),children:h.map(function(j){return e.jsx("option",{value:j.getFullYear(),children:m(j,{locale:o})},j.getFullYear())})})}function Zh(t,s){var r=u.useState(t),n=r[0],a=r[1],i=s===void 0?n:s;return[i,a]}function ex(t){var s=t.month,r=t.defaultMonth,n=t.today,a=s||r||n||new Date,i=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(i&&ss(i,a)<0){var d=-1*(c-1);a=Qe(i,d)}return o&&ss(a,o)<0&&(a=o),Le(a)}function tx(){var t=ge(),s=ex(t),r=Zh(s,t.month),n=r[0],a=r[1],i=function(o){var l;if(!t.disableNavigation){var c=Le(o);a(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,i]}function sx(t,s){for(var r=s.reverseMonths,n=s.numberOfMonths,a=Le(t),i=Le(Qe(a,n)),o=ss(i,a),l=[],c=0;c<o;c++){var d=Qe(a,c);l.push(d)}return r&&(l=l.reverse()),l}function rx(t,s){if(!s.disableNavigation){var r=s.toDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Le(t);if(!r)return Qe(l,o);var c=ss(r,t);if(!(c<i))return Qe(l,o)}}function nx(t,s){if(!s.disableNavigation){var r=s.fromDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Le(t);if(!r)return Qe(l,-o);var c=ss(l,r);if(!(c<=0))return Qe(l,-o)}}var xi=u.createContext(void 0);function ax(t){var s=ge(),r=tx(),n=r[0],a=r[1],i=sx(n,s),o=rx(n,s),l=nx(n,s),c=function(p){return i.some(function(h){return Er(p,h)})},d=function(p,h){c(p)||(h&&ci(p,h)?a(Qe(p,1+s.numberOfMonths*-1)):a(p))},m={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return e.jsx(xi.Provider,{value:m,children:t.children})}function os(){var t=u.useContext(xi);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Dn(t){var s,r=ge(),n=r.classNames,a=r.styles,i=r.components,o=os().goToMonth,l=function(m){o(Qe(m,t.displayIndex?-t.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:mi,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:d}),e.jsx(Qh,{onChange:l,displayMonth:t.displayMonth}),e.jsx(Jh,{onChange:l,displayMonth:t.displayMonth})]})}function ix(t){return e.jsx("svg",Z({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ox(t){return e.jsx("svg",Z({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var vs=u.forwardRef(function(t,s){var r=ge(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var o=i.join(" "),l=Z(Z({},a.button_reset),a.button);return t.style&&Object.assign(l,t.style),e.jsx("button",Z({},t,{ref:s,type:"button",className:o,style:l}))});function lx(t){var s,r,n=ge(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,m=c.labelNext,p=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=d(t.previousMonth,{locale:i}),x=[o.nav_button,o.nav_button_previous].join(" "),g=m(t.nextMonth,{locale:i}),f=[o.nav_button,o.nav_button_next].join(" "),v=(s=p==null?void 0:p.IconRight)!==null&&s!==void 0?s:ox,b=(r=p==null?void 0:p.IconLeft)!==null&&r!==void 0?r:ix;return e.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&e.jsx(vs,{name:"previous-month","aria-label":h,className:x,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(v,{className:o.nav_icon,style:l.nav_icon}):e.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&e.jsx(vs,{name:"next-month","aria-label":g,className:f,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(b,{className:o.nav_icon,style:l.nav_icon}):e.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function An(t){var s=ge().numberOfMonths,r=os(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return Er(t.displayMonth,g)}),c=l===0,d=l===o.length-1,m=s>1&&(c||!d),p=s>1&&(d||!c),h=function(){n&&i(n)},x=function(){a&&i(a)};return e.jsx(lx,{displayMonth:t.displayMonth,hideNext:m,hidePrevious:p,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:x})}function cx(t){var s,r=ge(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(s=l==null?void 0:l.CaptionLabel)!==null&&s!==void 0?s:mi,d;return a?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=e.jsx(Dn,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(Dn,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(An,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(An,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:d})}function dx(t){var s=ge(),r=s.footer,n=s.styles,a=s.classNames.tfoot;return r?e.jsx("tfoot",{className:a,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function ux(t,s,r){for(var n=r?_t(new Date):st(new Date,{locale:t,weekStartsOn:s}),a=[],i=0;i<7;i++){var o=_e(n,i);a.push(o)}return a}function mx(){var t=ge(),s=t.classNames,r=t.styles,n=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=ux(a,i,o);return e.jsxs("tr",{style:r.head_row,className:s.head_row,children:[n&&e.jsx("td",{style:r.head_cell,className:s.head_cell}),d.map(function(m,p){return e.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":c(m,{locale:a}),children:l(m,{locale:a})},p)})]})}function hx(){var t,s=ge(),r=s.classNames,n=s.styles,a=s.components,i=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:mx;return e.jsx("thead",{style:n.head,className:r.head,children:e.jsx(i,{})})}function xx(t){var s=ge(),r=s.locale,n=s.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:r})})}var Ir=u.createContext(void 0);function fx(t){if(!as(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Ir.Provider,{value:s,children:t.children})}return e.jsx(px,{initialProps:t.initialProps,children:t.children})}function px(t){var s=t.initialProps,r=t.children,n=s.selected,a=s.min,i=s.max,o=function(d,m,p){var h,x;(h=s.onDayClick)===null||h===void 0||h.call(s,d,m,p);var g=!!(m.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var f=!!(!m.selected&&i&&(n==null?void 0:n.length)===i);if(!f){var v=n?di([],n):[];if(m.selected){var b=v.findIndex(function(j){return Me(d,j)});v.splice(b,1)}else v.push(d);(x=s.onSelect)===null||x===void 0||x.call(s,v,d,m,p)}}},l={disabled:[]};n&&l.disabled.push(function(d){var m=i&&n.length>i-1,p=n.some(function(h){return Me(h,d)});return!!(m&&!p)});var c={selected:n,onDayClick:o,modifiers:l};return e.jsx(Ir.Provider,{value:c,children:r})}function Rr(){var t=u.useContext(Ir);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function gx(t,s){var r=s||{},n=r.from,a=r.to;return n&&a?Me(a,t)&&Me(n,t)?void 0:Me(a,t)?{from:a,to:void 0}:Me(n,t)?void 0:dr(n,t)?{from:t,to:a}:{from:n,to:t}:a?dr(t,a)?{from:a,to:t}:{from:t,to:a}:n?ci(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Or=u.createContext(void 0);function vx(t){if(!is(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Or.Provider,{value:s,children:t.children})}return e.jsx(jx,{initialProps:t.initialProps,children:t.children})}function jx(t){var s=t.initialProps,r=t.children,n=s.selected,a=n||{},i=a.from,o=a.to,l=s.min,c=s.max,d=function(x,g,f){var v,b;(v=s.onDayClick)===null||v===void 0||v.call(s,x,g,f);var j=gx(x,n);(b=s.onSelect)===null||b===void 0||b.call(s,j,x,g,f)},m={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(m.range_start=[i],o?(m.range_end=[o],Me(i,o)||(m.range_middle=[{after:i,before:o}])):m.range_end=[i]):o&&(m.range_start=[o],m.range_end=[o]),l&&(i&&!o&&m.disabled.push({after:Ws(i,l-1),before:_e(i,l-1)}),i&&o&&m.disabled.push({after:i,before:_e(i,l-1)}),!i&&o&&m.disabled.push({after:Ws(o,l-1),before:_e(o,l-1)})),c){if(i&&!o&&(m.disabled.push({before:_e(i,-c+1)}),m.disabled.push({after:_e(i,c-1)})),i&&o){var p=Ze(o,i)+1,h=c-p;m.disabled.push({before:Ws(i,h)}),m.disabled.push({after:_e(o,h)})}!i&&o&&(m.disabled.push({before:_e(o,-c+1)}),m.disabled.push({after:_e(o,c-1)}))}return e.jsx(Or.Provider,{value:{selected:n,onDayClick:d,modifiers:m},children:r})}function Fr(){var t=u.useContext(Or);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function fs(t){return Array.isArray(t)?di([],t):t!==void 0?[t]:[]}function bx(t){var s={};return Object.entries(t).forEach(function(r){var n=r[0],a=r[1];s[n]=fs(a)}),s}var Je;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Je||(Je={}));var yx=Je.Selected,nt=Je.Disabled,Nx=Je.Hidden,wx=Je.Today,Vs=Je.RangeEnd,qs=Je.RangeMiddle,Hs=Je.RangeStart,Cx=Je.Outside;function Sx(t,s,r){var n,a=(n={},n[yx]=fs(t.selected),n[nt]=fs(t.disabled),n[Nx]=fs(t.hidden),n[wx]=[t.today],n[Vs]=[],n[qs]=[],n[Hs]=[],n[Cx]=[],n);return t.fromDate&&a[nt].push({before:t.fromDate}),t.toDate&&a[nt].push({after:t.toDate}),as(t)?a[nt]=a[nt].concat(s.modifiers[nt]):is(t)&&(a[nt]=a[nt].concat(r.modifiers[nt]),a[Hs]=r.modifiers[Hs],a[qs]=r.modifiers[qs],a[Vs]=r.modifiers[Vs]),a}var fi=u.createContext(void 0);function kx(t){var s=ge(),r=Rr(),n=Fr(),a=Sx(s,r,n),i=bx(s.modifiers),o=Z(Z({},a),i);return e.jsx(fi.Provider,{value:o,children:t.children})}function pi(){var t=u.useContext(fi);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Px(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Dx(t){return!!(t&&typeof t=="object"&&"from"in t)}function Ax(t){return!!(t&&typeof t=="object"&&"after"in t)}function _x(t){return!!(t&&typeof t=="object"&&"before"in t)}function Mx(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Tx(t,s){var r,n=s.from,a=s.to;if(n&&a){var i=Ze(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=Ze(t,n)>=0&&Ze(a,t)>=0;return o}return a?Me(a,t):n?Me(n,t):!1}function Ex(t){return _r(t)}function Ix(t){return Array.isArray(t)&&t.every(_r)}function Rx(t,s){return s.some(function(r){if(typeof r=="boolean")return r;if(Ex(r))return Me(t,r);if(Ix(r))return r.includes(t);if(Dx(r))return Tx(t,r);if(Mx(r))return r.dayOfWeek.includes(t.getDay());if(Px(r)){var n=Ze(r.before,t),a=Ze(r.after,t),i=n>0,o=a<0,l=dr(r.before,r.after);return l?o&&i:i||o}return Ax(r)?Ze(t,r.after)>0:_x(r)?Ze(r.before,t)>0:typeof r=="function"?r(t):!1})}function Lr(t,s,r){var n=Object.keys(s).reduce(function(i,o){var l=s[o];return Rx(t,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!Er(t,r)&&(a.outside=!0),a}function Ox(t,s){for(var r=Le(t[0]),n=Mr(t[t.length-1]),a,i,o=r;o<=n;){var l=Lr(o,s),c=!l.disabled&&!l.hidden;if(!c){o=_e(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=_e(o,1)}return i||a}var Fx=365;function gi(t,s){var r=s.moveBy,n=s.direction,a=s.context,i=s.modifiers,o=s.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=a.weekStartsOn,d=a.fromDate,m=a.toDate,p=a.locale,h={day:_e,week:cr,month:Qe,year:Sm,startOfWeek:function(v){return a.ISOWeek?_t(v):st(v,{locale:p,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?ri(v):Tr(v,{locale:p,weekStartsOn:c})}},x=h[r](t,n==="after"?1:-1);n==="before"&&d?x=km([d,x]):n==="after"&&m&&(x=Pm([m,x]));var g=!0;if(i){var f=Lr(x,i);g=!f.disabled&&!f.hidden}return g?x:l.count>Fx?l.lastFocused:gi(x,{moveBy:r,direction:n,context:a,modifiers:i,retry:Z(Z({},l),{count:l.count+1})})}var vi=u.createContext(void 0);function Lx(t){var s=os(),r=pi(),n=u.useState(),a=n[0],i=n[1],o=u.useState(),l=o[0],c=o[1],d=Ox(s.displayMonths,r),m=a??(l&&s.isDateDisplayed(l))?l:d,p=function(){c(a),i(void 0)},h=function(v){i(v)},x=ge(),g=function(v,b){if(a){var j=gi(a,{moveBy:v,direction:b,context:x,modifiers:r});Me(a,j)||(s.goToDate(j,a),h(j))}},f={focusedDay:a,focusTarget:m,blur:p,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return e.jsx(vi.Provider,{value:f,children:t.children})}function $r(){var t=u.useContext(vi);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function $x(t,s){var r=pi(),n=Lr(t,r,s);return n}var zr=u.createContext(void 0);function zx(t){if(!Ts(t.initialProps)){var s={selected:void 0};return e.jsx(zr.Provider,{value:s,children:t.children})}return e.jsx(Wx,{initialProps:t.initialProps,children:t.children})}function Wx(t){var s=t.initialProps,r=t.children,n=function(i,o,l){var c,d,m;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,o,l),o.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,o,l);return}(m=s.onSelect)===null||m===void 0||m.call(s,i,i,o,l)},a={selected:s.selected,onDayClick:n};return e.jsx(zr.Provider,{value:a,children:r})}function ji(){var t=u.useContext(zr);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Bx(t,s){var r=ge(),n=ji(),a=Rr(),i=Fr(),o=$r(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,m=o.focusWeekBefore,p=o.blur,h=o.focus,x=o.focusMonthBefore,g=o.focusMonthAfter,f=o.focusYearBefore,v=o.focusYearAfter,b=o.focusStartOfWeek,j=o.focusEndOfWeek,k=function(R){var O,de,je,S;Ts(r)?(O=n.onDayClick)===null||O===void 0||O.call(n,t,s,R):as(r)?(de=a.onDayClick)===null||de===void 0||de.call(a,t,s,R):is(r)?(je=i.onDayClick)===null||je===void 0||je.call(i,t,s,R):(S=r.onDayClick)===null||S===void 0||S.call(r,t,s,R)},y=function(R){var O;h(t),(O=r.onDayFocus)===null||O===void 0||O.call(r,t,s,R)},E=function(R){var O;p(),(O=r.onDayBlur)===null||O===void 0||O.call(r,t,s,R)},N=function(R){var O;(O=r.onDayMouseEnter)===null||O===void 0||O.call(r,t,s,R)},P=function(R){var O;(O=r.onDayMouseLeave)===null||O===void 0||O.call(r,t,s,R)},w=function(R){var O;(O=r.onDayPointerEnter)===null||O===void 0||O.call(r,t,s,R)},$=function(R){var O;(O=r.onDayPointerLeave)===null||O===void 0||O.call(r,t,s,R)},D=function(R){var O;(O=r.onDayTouchCancel)===null||O===void 0||O.call(r,t,s,R)},ee=function(R){var O;(O=r.onDayTouchEnd)===null||O===void 0||O.call(r,t,s,R)},M=function(R){var O;(O=r.onDayTouchMove)===null||O===void 0||O.call(r,t,s,R)},W=function(R){var O;(O=r.onDayTouchStart)===null||O===void 0||O.call(r,t,s,R)},A=function(R){var O;(O=r.onDayKeyUp)===null||O===void 0||O.call(r,t,s,R)},G=function(R){var O;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),d();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),m();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?f():x();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?v():g();break;case"Home":R.preventDefault(),R.stopPropagation(),b();break;case"End":R.preventDefault(),R.stopPropagation(),j();break}(O=r.onDayKeyDown)===null||O===void 0||O.call(r,t,s,R)},C={onClick:k,onFocus:y,onBlur:E,onKeyDown:G,onKeyUp:A,onMouseEnter:N,onMouseLeave:P,onPointerEnter:w,onPointerLeave:$,onTouchCancel:D,onTouchEnd:ee,onTouchMove:M,onTouchStart:W};return C}function Vx(){var t=ge(),s=ji(),r=Rr(),n=Fr(),a=Ts(t)?s.selected:as(t)?r.selected:is(t)?n.selected:void 0;return a}function qx(t){return Object.values(Je).includes(t)}function Hx(t,s){var r=[t.classNames.day];return Object.keys(s).forEach(function(n){var a=t.modifiersClassNames[n];if(a)r.push(a);else if(qx(n)){var i=t.classNames["day_".concat(n)];i&&r.push(i)}}),r}function Yx(t,s){var r=Z({},t.styles.day);return Object.keys(s).forEach(function(n){var a;r=Z(Z({},r),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function Ux(t,s,r){var n,a,i,o=ge(),l=$r(),c=$x(t,s),d=Bx(t,c),m=Vx(),p=!!(o.onDayClick||o.mode!=="default");u.useEffect(function(){var N;c.outside||l.focusedDay&&p&&Me(l.focusedDay,t)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,t,r,p,c.outside]);var h=Hx(o,c).join(" "),x=Yx(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),f=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:xx,v=e.jsx(f,{date:t,displayMonth:s,activeModifiers:c}),b={style:x,className:h,children:v,role:"gridcell"},j=l.focusTarget&&Me(l.focusTarget,t)&&!c.outside,k=l.focusedDay&&Me(l.focusedDay,t),y=Z(Z(Z({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=k||j?0:-1,n)),d),E={isButton:p,isHidden:g,activeModifiers:c,selectedDays:m,buttonProps:y,divProps:b};return E}function Gx(t){var s=u.useRef(null),r=Ux(t.date,t.displayMonth,s);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(vs,Z({name:"day",ref:s},r.buttonProps)):e.jsx("div",Z({},r.divProps))}function Xx(t){var s=t.number,r=t.dates,n=ge(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,m=d(Number(s),{locale:l});if(!a)return e.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:m});var p=c(Number(s),{locale:l}),h=function(x){a(s,r,x)};return e.jsx(vs,{name:"week-number","aria-label":p,className:o.weeknumber,style:i.weeknumber,onClick:h,children:m})}function Kx(t){var s,r,n=ge(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(s=l==null?void 0:l.Day)!==null&&s!==void 0?s:Gx,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:Xx,m;return o&&(m=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[m,t.dates.map(function(p){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:p})},kh(p))})]})}function _n(t,s,r){for(var n=r!=null&&r.ISOWeek?ri(s):Tr(s,r),a=r!=null&&r.ISOWeek?_t(t):st(t,r),i=Ze(n,a),o=[],l=0;l<=i;l++)o.push(_e(a,l));var c=o.reduce(function(d,m){var p=r!=null&&r.ISOWeek?ai(m):oi(m,r),h=d.find(function(x){return x.weekNumber===p});return h?(h.dates.push(m),d):(d.push({weekNumber:p,dates:[m]}),d)},[]);return c}function Qx(t,s){var r=_n(Le(t),Mr(t),s);if(s!=null&&s.useFixedWeeks){var n=Dh(t,s);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=cr(i,6-n),l=_n(cr(i,1),o,s);r.push.apply(r,l)}}return r}function Jx(t){var s,r,n,a=ge(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,m=a.components,p=a.weekStartsOn,h=a.firstWeekContainsDate,x=a.ISOWeek,g=Qx(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:x,locale:i,weekStartsOn:p,firstWeekContainsDate:h}),f=(s=m==null?void 0:m.Head)!==null&&s!==void 0?s:hx,v=(r=m==null?void 0:m.Row)!==null&&r!==void 0?r:Kx,b=(n=m==null?void 0:m.Footer)!==null&&n!==void 0?n:dx;return e.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(f,{}),e.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(j){return e.jsx(v,{displayMonth:t.displayMonth,dates:j.dates,weekNumber:j.weekNumber},j.weekNumber)})}),e.jsx(b,{displayMonth:t.displayMonth})]})}function Zx(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ef=Zx()?u.useLayoutEffect:u.useEffect,Ys=!1,tf=0;function Mn(){return"react-day-picker-".concat(++tf)}function sf(t){var s,r=t??(Ys?Mn():null),n=u.useState(r),a=n[0],i=n[1];return ef(function(){a===null&&i(Mn())},[]),u.useEffect(function(){Ys===!1&&(Ys=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function rf(t){var s,r,n=ge(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=os().displayMonths,d=sf(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),m=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,p=[i.month],h=o.month,x=t.displayIndex===0,g=t.displayIndex===c.length-1,f=!x&&!g;a==="rtl"&&(s=[x,g],g=s[0],x=s[1]),x&&(p.push(i.caption_start),h=Z(Z({},h),o.caption_start)),g&&(p.push(i.caption_end),h=Z(Z({},h),o.caption_end)),f&&(p.push(i.caption_between),h=Z(Z({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:cx;return e.jsxs("div",{className:p.join(" "),style:h,children:[e.jsx(v,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Jx,{id:m,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function nf(t){var s=ge(),r=s.classNames,n=s.styles;return e.jsx("div",{className:r.months,style:n.months,children:t.children})}function af(t){var s,r,n=t.initialProps,a=ge(),i=$r(),o=os(),l=u.useState(!1),c=l[0],d=l[1];u.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var m=[a.classNames.root,a.className];a.numberOfMonths>1&&m.push(a.classNames.multiple_months),a.showWeekNumber&&m.push(a.classNames.with_weeknumber);var p=Z(Z({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,f){var v;return Z(Z({},g),(v={},v[f]=n[f],v))},{}),x=(r=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:nf;return e.jsx("div",Z({className:m.join(" "),style:p,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:e.jsx(x,{children:o.displayMonths.map(function(g,f){return e.jsx(rf,{displayIndex:f,displayMonth:g},f)})})}))}function of(t){var s=t.children,r=_h(t,["children"]);return e.jsx(Xh,{initialProps:r,children:e.jsx(ax,{children:e.jsx(zx,{initialProps:r,children:e.jsx(fx,{initialProps:r,children:e.jsx(vx,{initialProps:r,children:e.jsx(kx,{children:e.jsx(Lx,{children:s})})})})})})})}function lf(t){return e.jsx(of,Z({},t,{children:e.jsx(af,{initialProps:t})}))}function Tn({className:t,classNames:s,showOutsideDays:r=!0,...n}){return e.jsx(lf,{showOutsideDays:r,className:B("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:B(Qt({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:B("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:B(Qt({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({className:a,...i})=>e.jsx(sc,{className:B("size-4",a),...i}),IconRight:({className:a,...i})=>e.jsx(nc,{className:B("size-4",a),...i})},...n})}function vt(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function En(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function cf(...t){return s=>{let r=!1;const n=t.map(a=>{const i=En(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():En(t[a],null)}}}}function yt(...t){return u.useCallback(cf(...t),t)}function bi(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=p=>{var b;const{scope:h,children:x,...g}=p,f=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})};d.displayName=i+"Provider";function m(p,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||l,g=u.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,df(a,...s)]}function df(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var uf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],dt=uf.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function mf(t,s){t&&pr.flushSync(()=>t.dispatchEvent(s))}function jt(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function hf(t,s=globalThis==null?void 0:globalThis.document){const r=jt(t);u.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var xf="DismissableLayer",ur="dismissableLayer.update",ff="dismissableLayer.pointerDownOutside",pf="dismissableLayer.focusOutside",In,yi=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ni=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=u.useContext(yi),[m,p]=u.useState(null),h=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=u.useState({}),g=yt(s,P=>p(P)),f=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(v),j=m?f.indexOf(m):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,y=j>=b,E=jf(P=>{const w=P.target,$=[...d.branches].some(D=>D.contains(w));!y||$||(a==null||a(P),o==null||o(P),P.defaultPrevented||l==null||l())},h),N=bf(P=>{const w=P.target;[...d.branches].some(D=>D.contains(w))||(i==null||i(P),o==null||o(P),P.defaultPrevented||l==null||l())},h);return hf(P=>{j===d.layers.size-1&&(n==null||n(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},h),u.useEffect(()=>{if(m)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(In=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),Rn(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=In)}},[m,h,r,d]),u.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),Rn())},[m,d]),u.useEffect(()=>{const P=()=>x({});return document.addEventListener(ur,P),()=>document.removeEventListener(ur,P)},[]),e.jsx(dt.div,{...c,ref:g,style:{pointerEvents:k?y?"auto":"none":void 0,...t.style},onFocusCapture:vt(t.onFocusCapture,N.onFocusCapture),onBlurCapture:vt(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:vt(t.onPointerDownCapture,E.onPointerDownCapture)})});Ni.displayName=xf;var gf="DismissableLayerBranch",vf=u.forwardRef((t,s)=>{const r=u.useContext(yi),n=u.useRef(null),a=yt(s,n);return u.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(dt.div,{...t,ref:a})});vf.displayName=gf;function jf(t,s=globalThis==null?void 0:globalThis.document){const r=jt(t),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){wi(ff,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function bf(t,s=globalThis==null?void 0:globalThis.document){const r=jt(t),n=u.useRef(!1);return u.useEffect(()=>{const a=i=>{i.target&&!n.current&&wi(pf,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Rn(){const t=new CustomEvent(ur);document.dispatchEvent(t)}function wi(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?mf(a,i):a.dispatchEvent(i)}var Us=0;function yf(){u.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??On()),document.body.insertAdjacentElement("beforeend",t[1]??On()),Us++,()=>{Us===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Us--}},[])}function On(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Gs="focusScope.autoFocusOnMount",Xs="focusScope.autoFocusOnUnmount",Fn={bubbles:!1,cancelable:!0},Nf="FocusScope",Ci=u.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,c]=u.useState(null),d=jt(a),m=jt(i),p=u.useRef(null),h=yt(s,f=>c(f)),x=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let f=function(k){if(x.paused||!l)return;const y=k.target;l.contains(y)?p.current=y:pt(p.current,{select:!0})},v=function(k){if(x.paused||!l)return;const y=k.relatedTarget;y!==null&&(l.contains(y)||pt(p.current,{select:!0}))},b=function(k){if(document.activeElement===document.body)for(const E of k)E.removedNodes.length>0&&pt(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",v);const j=new MutationObserver(b);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",v),j.disconnect()}}},[n,l,x.paused]),u.useEffect(()=>{if(l){$n.add(x);const f=document.activeElement;if(!l.contains(f)){const b=new CustomEvent(Gs,Fn);l.addEventListener(Gs,d),l.dispatchEvent(b),b.defaultPrevented||(wf(Df(Si(l)),{select:!0}),document.activeElement===f&&pt(l))}return()=>{l.removeEventListener(Gs,d),setTimeout(()=>{const b=new CustomEvent(Xs,Fn);l.addEventListener(Xs,m),l.dispatchEvent(b),b.defaultPrevented||pt(f??document.body,{select:!0}),l.removeEventListener(Xs,m),$n.remove(x)},0)}}},[l,d,m,x]);const g=u.useCallback(f=>{if(!r&&!n||x.paused)return;const v=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,b=document.activeElement;if(v&&b){const j=f.currentTarget,[k,y]=Cf(j);k&&y?!f.shiftKey&&b===y?(f.preventDefault(),r&&pt(k,{select:!0})):f.shiftKey&&b===k&&(f.preventDefault(),r&&pt(y,{select:!0})):b===j&&f.preventDefault()}},[r,n,x.paused]);return e.jsx(dt.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Ci.displayName=Nf;function wf(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(pt(n,{select:s}),document.activeElement!==r)return}function Cf(t){const s=Si(t),r=Ln(s,t),n=Ln(s.reverse(),t);return[r,n]}function Si(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Ln(t,s){for(const r of t)if(!Sf(r,{upTo:s}))return r}function Sf(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function kf(t){return t instanceof HTMLInputElement&&"select"in t}function pt(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&kf(t)&&s&&t.select()}}var $n=Pf();function Pf(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=zn(t,s),t.unshift(s)},remove(s){var r;t=zn(t,s),(r=t[0])==null||r.resume()}}}function zn(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function Df(t){return t.filter(s=>s.tagName!=="A")}var Mt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},Af=gr.useId||(()=>{}),_f=0;function Mf(t){const[s,r]=u.useState(Af());return Mt(()=>{r(n=>n??String(_f++))},[t]),t||(s?`radix-${s}`:"")}var Tf="Arrow",ki=u.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(dt.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ki.displayName=Tf;var Ef=ki;function If(t){const[s,r]=u.useState(void 0);return Mt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var Wr="Popper",[Pi,Di]=bi(Wr),[Rf,Ai]=Pi(Wr),_i=t=>{const{__scopePopper:s,children:r}=t,[n,a]=u.useState(null);return e.jsx(Rf,{scope:s,anchor:n,onAnchorChange:a,children:r})};_i.displayName=Wr;var Mi="PopperAnchor",Ti=u.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=Ai(Mi,r),o=u.useRef(null),l=yt(s,o);return u.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:e.jsx(dt.div,{...a,ref:l})});Ti.displayName=Mi;var Br="PopperContent",[Of,Ff]=Pi(Br),Ei=u.forwardRef((t,s)=>{var Ye,Ae,Be,Ce,F,V;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:g,...f}=t,v=Ai(Br,r),[b,j]=u.useState(null),k=yt(s,Y=>j(Y)),[y,E]=u.useState(null),N=If(y),P=(N==null?void 0:N.width)??0,w=(N==null?void 0:N.height)??0,$=n+(i!=="center"?"-"+i:""),D=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},ee=Array.isArray(d)?d:[d],M=ee.length>0,W={padding:D,boundary:ee.filter($f),altBoundary:M},{refs:A,floatingStyles:G,placement:C,isPositioned:R,middlewareData:O}=Kn({strategy:"fixed",placement:$,whileElementsMounted:(...Y)=>na(...Y,{animationFrame:x==="always"}),elements:{reference:v.anchor},middleware:[Qn({mainAxis:a+w,alignmentAxis:o}),c&&Jn({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?ra():void 0,...W}),c&&Zn({...W}),ea({...W,apply:({elements:Y,rects:X,availableWidth:se,availableHeight:_})=>{const{width:L,height:te}=X.reference,le=Y.floating.style;le.setProperty("--radix-popper-available-width",`${se}px`),le.setProperty("--radix-popper-available-height",`${_}px`),le.setProperty("--radix-popper-anchor-width",`${L}px`),le.setProperty("--radix-popper-anchor-height",`${te}px`)}}),y&&ta({element:y,padding:l}),zf({arrowWidth:P,arrowHeight:w}),h&&sa({strategy:"referenceHidden",...W})]}),[de,je]=Oi(C),S=jt(g);Mt(()=>{R&&(S==null||S())},[R,S]);const U=(Ye=O.arrow)==null?void 0:Ye.x,ae=(Ae=O.arrow)==null?void 0:Ae.y,ye=((Be=O.arrow)==null?void 0:Be.centerOffset)!==0,[Ne,De]=u.useState();return Mt(()=>{b&&De(window.getComputedStyle(b).zIndex)},[b]),e.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:R?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(Ce=O.transformOrigin)==null?void 0:Ce.x,(F=O.transformOrigin)==null?void 0:F.y].join(" "),...((V=O.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Of,{scope:r,placedSide:de,onArrowChange:E,arrowX:U,arrowY:ae,shouldHideArrow:ye,children:e.jsx(dt.div,{"data-side":de,"data-align":je,...f,ref:k,style:{...f.style,animation:R?void 0:"none"}})})})});Ei.displayName=Br;var Ii="PopperArrow",Lf={top:"bottom",right:"left",bottom:"top",left:"right"},Ri=u.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=Ff(Ii,n),o=Lf[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Ef,{...a,ref:r,style:{...a.style,display:"block"}})})});Ri.displayName=Ii;function $f(t){return t!==null}var zf=t=>({name:"transformOrigin",options:t,fn(s){var v,b,j;const{placement:r,rects:n,middlewareData:a}=s,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,m]=Oi(r),p={start:"0%",center:"50%",end:"100%"}[m],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,x=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let g="",f="";return d==="bottom"?(g=o?p:`${h}px`,f=`${-c}px`):d==="top"?(g=o?p:`${h}px`,f=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,f=o?p:`${x}px`):d==="left"&&(g=`${n.floating.width+c}px`,f=o?p:`${x}px`),{data:{x:g,y:f}}}});function Oi(t){const[s,r="center"]=t.split("-");return[s,r]}var Wf=_i,Fi=Ti,Bf=Ei,Vf=Ri,qf="Portal",Li=u.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,i]=u.useState(!1);Mt(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?oa.createPortal(e.jsx(dt.div,{...n,ref:s}),o):null});Li.displayName=qf;function Hf(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var Vr=t=>{const{present:s,children:r}=t,n=Yf(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),i=yt(n.ref,Uf(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:i}):null};Vr.displayName="Presence";function Yf(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),i=u.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Hf(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=ms(n.current);i.current=l==="mounted"?d:"none"},[l]),Mt(()=>{const d=n.current,m=a.current;if(m!==t){const h=i.current,x=ms(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(m&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Mt(()=>{if(s){let d;const m=s.ownerDocument.defaultView??window,p=x=>{const f=ms(n.current).includes(x.animationName);if(x.target===s&&f&&(c("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},h=x=>{x.target===s&&(i.current=ms(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function ms(t){return(t==null?void 0:t.animationName)||"none"}function Uf(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Gf({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=Xf({defaultProp:s,onChange:r}),i=t!==void 0,o=i?t:n,l=jt(r),c=u.useCallback(d=>{if(i){const p=typeof d=="function"?d(t):d;p!==t&&l(p)}else a(d)},[i,t,a,l]);return[o,c]}function Xf({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),i=jt(s);return u.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var qr="Popover",[$i]=bi(qr,[Di]),ls=Di(),[Kf,Nt]=$i(qr),zi=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=ls(s),c=u.useRef(null),[d,m]=u.useState(!1),[p=!1,h]=Gf({prop:n,defaultProp:a,onChange:i});return e.jsx(Wf,{...l,children:e.jsx(Kf,{scope:s,contentId:Mf(),triggerRef:c,open:p,onOpenChange:h,onOpenToggle:u.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>m(!0),[]),onCustomAnchorRemove:u.useCallback(()=>m(!1),[]),modal:o,children:r})})};zi.displayName=qr;var Wi="PopoverAnchor",Qf=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Nt(Wi,r),i=ls(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return u.useEffect(()=>(o(),()=>l()),[o,l]),e.jsx(Fi,{...i,...n,ref:s})});Qf.displayName=Wi;var Bi="PopoverTrigger",Vi=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Nt(Bi,r),i=ls(r),o=yt(s,a.triggerRef),l=e.jsx(dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Gi(a.open),...n,ref:o,onClick:vt(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:e.jsx(Fi,{asChild:!0,...i,children:l})});Vi.displayName=Bi;var Hr="PopoverPortal",[Jf,Zf]=$i(Hr,{forceMount:void 0}),qi=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,i=Nt(Hr,s);return e.jsx(Jf,{scope:s,forceMount:r,children:e.jsx(Vr,{present:r||i.open,children:e.jsx(Li,{asChild:!0,container:a,children:n})})})};qi.displayName=Hr;var zt="PopoverContent",Hi=u.forwardRef((t,s)=>{const r=Zf(zt,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,i=Nt(zt,t.__scopePopover);return e.jsx(Vr,{present:n||i.open,children:i.modal?e.jsx(ep,{...a,ref:s}):e.jsx(tp,{...a,ref:s})})});Hi.displayName=zt;var ep=u.forwardRef((t,s)=>{const r=Nt(zt,t.__scopePopover),n=u.useRef(null),a=yt(s,n),i=u.useRef(!1);return u.useEffect(()=>{const o=n.current;if(o)return Ko(o)},[]),e.jsx(Qo,{as:qe,allowPinchZoom:!0,children:e.jsx(Yi,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vt(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:vt(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:vt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),tp=u.forwardRef((t,s)=>{const r=Nt(zt,t.__scopePopover),n=u.useRef(!1),a=u.useRef(!1);return e.jsx(Yi,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Yi=u.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,...p}=t,h=Nt(zt,r),x=ls(r);return yf(),e.jsx(Ci,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ni,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(Bf,{"data-state":Gi(h.open),role:"dialog",id:h.contentId,...x,...p,ref:s,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ui="PopoverClose",sp=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Nt(Ui,r);return e.jsx(dt.button,{type:"button",...n,ref:s,onClick:vt(t.onClick,()=>a.onOpenChange(!1))})});sp.displayName=Ui;var rp="PopoverArrow",np=u.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=ls(r);return e.jsx(Vf,{...a,...n,ref:s})});np.displayName=rp;function Gi(t){return t?"open":"closed"}var ap=zi,ip=Vi,op=qi,lp=Hi;function Wn({...t}){return e.jsx(ap,{"data-slot":"popover",...t})}function Bn({...t}){return e.jsx(ip,{"data-slot":"popover-trigger",...t})}function Vn({className:t,align:s="center",sideOffset:r=4,...n}){return e.jsx(op,{children:e.jsx(lp,{"data-slot":"popover-content",align:s,sideOffset:r,className:B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}function Xi({currentUser:t,users:s,onCreateProject:r,onClose:n}){const[a,i]=u.useState({name:"",description:"",priority:"medium",startDate:new Date,endDate:new Date(new Date().setMonth(new Date().getMonth()+1)),supervisorId:"",fabricatorIds:[],fabricatorAllocation:"",materialsAllocation:"",supervisorAllocation:"",companyAllocation:"",totalProjectPrice:"",supervisorAssignsFabricators:!1,broadcastToSupervisors:!1,documentationUrl:""}),[o,l]=u.useState({}),[c,d]=u.useState(!1),[m,p]=u.useState(!1),h=s.filter(y=>y.role==="supervisor"),x=s.filter(y=>y.role==="fabricator");u.useEffect(()=>{const y=parseFloat(a.fabricatorAllocation)||0,E=parseFloat(a.materialsAllocation)||0,N=parseFloat(a.supervisorAllocation)||0,P=parseFloat(a.companyAllocation)||0,w=y+E+N+P;i($=>({...$,totalProjectPrice:w.toFixed(2)}))},[a.fabricatorAllocation,a.materialsAllocation,a.supervisorAllocation,a.companyAllocation]);const g=()=>{const y={};return a.name.trim()||(y.name="Project name is required"),a.description.trim()||(y.description="Project description is required"),!a.supervisorId&&!a.broadcastToSupervisors&&(y.supervisorId="Supervisor selection is required unless broadcasting to all"),!a.supervisorAssignsFabricators&&!a.broadcastToSupervisors&&a.fabricatorIds.length===0&&(y.fabricatorIds="At least one fabricator must be assigned or supervisor must assign manually"),a.endDate<=a.startDate&&(y.endDate="End date must be after start date"),((parseFloat(a.fabricatorAllocation)||0)<0||(parseFloat(a.materialsAllocation)||0)<0||(parseFloat(a.supervisorAllocation)||0)<0||(parseFloat(a.companyAllocation)||0)<0)&&(y.totalProjectPrice="Allocations must be zero or positive numbers"),l(y),Object.keys(y).length===0},f=(y,E)=>{i(N=>({...N,[y]:E})),o[y]&&l(N=>({...N,[y]:""}))},v=y=>{a.fabricatorIds.includes(y)||f("fabricatorIds",[...a.fabricatorIds,y])},b=y=>{f("fabricatorIds",a.fabricatorIds.filter(E=>E!==y))},j=async y=>{if(y.preventDefault(),!g())return;const E=parseFloat(a.totalProjectPrice),P=a.supervisorAssignsFabricators?"0_Created":"1_Assigned_to_FAB",w={name:a.name,description:a.description,clientName:"",status:P,priority:a.priority,startDate:a.startDate.toISOString().split("T")[0],endDate:a.endDate.toISOString().split("T")[0],progress:0,supervisorId:a.supervisorId,fabricatorIds:a.supervisorAssignsFabricators?[]:a.fabricatorIds,budget:E,spent:0,revenue:0,documentationUrl:a.documentationUrl||void 0,createdBy:t.id,createdAt:new Date().toISOString(),fabricatorBudgets:[],broadcastToSupervisors:a.broadcastToSupervisors};await r(w),n();try{window.location.hash="projects"}catch{}},k=y=>{var E;return((E=s.find(N=>N.id===y))==null?void 0:E.name)||"Unknown"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(q,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5"}),"Create New Project"]}),e.jsx(T,{variant:"ghost",onClick:n,children:e.jsx(lt,{className:"h-4 w-4"})})]})}),e.jsx(H,{className:"space-y-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Project Name *"}),e.jsx(K,{id:"name",value:a.name,onChange:y=>f("name",y.target.value),placeholder:"Enter project name",className:o.name?"border-destructive":""}),o.name&&e.jsx("p",{className:"text-sm text-destructive",children:o.name})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description *"}),e.jsx(et,{id:"description",value:a.description,onChange:y=>f("description",y.target.value),placeholder:"Enter project description",className:o.description?"border-destructive":""}),o.description&&e.jsx("p",{className:"text-sm text-destructive",children:o.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"priority",children:"Priority"}),e.jsxs(me,{value:a.priority,onValueChange:y=>f("priority",y),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select priority"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Timeline"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Start Date"}),e.jsxs(Wn,{open:c,onOpenChange:d,children:[e.jsx(Bn,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"w-full justify-start text-left",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),ct(a.startDate,"PPP")]})}),e.jsx(Vn,{className:"w-auto p-0",children:e.jsx(Tn,{mode:"single",selected:a.startDate,onSelect:y=>{y&&(f("startDate",y),d(!1))},initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"End Date"}),e.jsxs(Wn,{open:m,onOpenChange:p,children:[e.jsx(Bn,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"w-full justify-start text-left",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),ct(a.endDate,"PPP")]})}),e.jsx(Vn,{className:"w-auto p-0",children:e.jsx(Tn,{mode:"single",selected:a.endDate,onSelect:y=>{y&&(f("endDate",y),p(!1))},initialFocus:!0})})]}),o.endDate&&e.jsx("p",{className:"text-sm text-destructive",children:o.endDate})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Team Assignment"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"supervisor",children:"Supervisor *"}),e.jsxs(me,{value:a.supervisorId,onValueChange:y=>f("supervisorId",y),children:[e.jsx(xe,{className:o.supervisorId?"border-destructive":"",children:e.jsx(he,{placeholder:"Select supervisor"})}),e.jsx(fe,{children:h.map(y=>e.jsxs(z,{value:y.id,children:[y.name," - ",y.department]},y.id))})]}),o.supervisorId&&e.jsx("p",{className:"text-sm text-destructive",children:o.supervisorId})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"broadcastToSupervisors",type:"checkbox",checked:a.broadcastToSupervisors,onChange:y=>{f("broadcastToSupervisors",y.target.checked),y.target.checked&&f("supervisorId","")},className:"cursor-pointer h-4 w-4"}),e.jsx(I,{htmlFor:"broadcastToSupervisors",className:"cursor-pointer font-medium",children:"Send to all active supervisors"})]}),a.broadcastToSupervisors&&e.jsx(Te,{children:e.jsx(Ee,{children:"All supervisors will be notified. The first to accept will be assigned."})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"supervisorAssignsFabricators",type:"checkbox",checked:a.supervisorAssignsFabricators,onChange:y=>f("supervisorAssignsFabricators",y.target.checked),className:"cursor-pointer"}),e.jsx(I,{htmlFor:"supervisorAssignsFabricators",className:"cursor-pointer",children:"Supervisor will assign fabricators manually"})]}),a.supervisorAssignsFabricators&&e.jsx(Te,{children:e.jsx(Ee,{children:"You can assign fabricators later from the project card using the Assign action."})}),!a.supervisorAssignsFabricators&&!a.broadcastToSupervisors&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Fabricators *"}),e.jsxs(me,{onValueChange:v,children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Add fabricators"})}),e.jsx(fe,{children:x.filter(y=>!a.fabricatorIds.includes(y.id)).map(y=>e.jsxs(z,{value:y.id,children:[y.name," - ",y.department]},y.id))})]}),a.fabricatorIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.fabricatorIds.map(y=>e.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[k(y),e.jsx(lt,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(y)})]},y))}),o.fabricatorIds&&e.jsx("p",{className:"text-sm text-destructive",children:o.fabricatorIds})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Financial Allocation"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Project Price"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Budget"})]}),e.jsxs("p",{className:"text-2xl",children:["",(parseFloat(a.totalProjectPrice)||0).toLocaleString()]})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),e.jsx("p",{className:"text-2xl",children:"0"})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Revenue"})]}),e.jsx("p",{className:"text-2xl",children:"0"})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"fabricatorAllocation",children:"Fabricator Allocation ()"}),e.jsx(K,{id:"fabricatorAllocation",type:"number",min:"0",step:"0.01",value:a.fabricatorAllocation,onChange:y=>f("fabricatorAllocation",y.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Labor costs allocated to fabricators."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"materialsAllocation",children:"Materials Allocation ()"}),e.jsx(K,{id:"materialsAllocation",type:"number",min:"0",step:"0.01",value:a.materialsAllocation,onChange:y=>f("materialsAllocation",y.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected material expenses."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"supervisorAllocation",children:"Supervisor Allocation ()"}),e.jsx(K,{id:"supervisorAllocation",type:"number",min:"0",step:"0.01",value:a.supervisorAllocation,onChange:y=>f("supervisorAllocation",y.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supervisor fees or overhead."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"companyAllocation",children:"Company Allocation ()"}),e.jsx(K,{id:"companyAllocation",type:"number",min:"0",step:"0.01",value:a.companyAllocation,onChange:y=>f("companyAllocation",y.target.value),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Company margin and other costs."})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total Project Price ()"}),e.jsx("span",{className:"text-muted-foreground",children:"Auto-calculated"})]}),e.jsx(K,{readOnly:!0,value:a.totalProjectPrice,placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{children:"Documentation (Optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"documentationUrl",children:"Google Drive Documentation URL"}),e.jsx(K,{id:"documentationUrl",type:"url",value:a.documentationUrl,onChange:y=>f("documentationUrl",y.target.value),placeholder:"https://drive.google.com/drive/folders/..."})]})]}),Object.keys(o).length>0&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:"Please fix the errors above before submitting."})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{type:"button",variant:"outline",onClick:n,className:"flex-1",children:"Cancel"}),e.jsxs(T,{type:"submit",className:"flex-1",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})]})})]})})}function ot(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function Yr(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=p=>{var b;const{scope:h,children:x,...g}=p,f=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})};d.displayName=i+"Provider";function m(p,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||l,g=u.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,cp(a,...s)]}function cp(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}function qn(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function dp(...t){return s=>{let r=!1;const n=t.map(a=>{const i=qn(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():qn(t[a],null)}}}}function js(...t){return u.useCallback(dp(...t),t)}function up(t){const s=t+"CollectionProvider",[r,n]=Yr(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:g,children:f}=x,v=ft.useRef(null),b=ft.useRef(new Map).current;return e.jsx(a,{scope:g,itemMap:b,collectionRef:v,children:f})};o.displayName=s;const l=t+"CollectionSlot",c=ft.forwardRef((x,g)=>{const{scope:f,children:v}=x,b=i(l,f),j=js(g,b.collectionRef);return e.jsx(qe,{ref:j,children:v})});c.displayName=l;const d=t+"CollectionItemSlot",m="data-radix-collection-item",p=ft.forwardRef((x,g)=>{const{scope:f,children:v,...b}=x,j=ft.useRef(null),k=js(g,j),y=i(d,f);return ft.useEffect(()=>(y.itemMap.set(j,{ref:j,...b}),()=>void y.itemMap.delete(j))),e.jsx(qe,{[m]:"",ref:k,children:v})});p.displayName=d;function h(x){const g=i(t+"CollectionConsumer",x);return ft.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((y,E)=>b.indexOf(y.ref.current)-b.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},h,n]}var mr=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},mp=gr.useId||(()=>{}),hp=0;function Ki(t){const[s,r]=u.useState(mp());return mr(()=>{r(n=>n??String(hp++))},[t]),t||(s?`radix-${s}`:"")}var xp=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Vt=xp.reduce((t,s)=>{const r=u.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Ur(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function Qi({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=fp({defaultProp:s,onChange:r}),i=t!==void 0,o=i?t:n,l=Ur(r),c=u.useCallback(d=>{if(i){const p=typeof d=="function"?d(t):d;p!==t&&l(p)}else a(d)},[i,t,a,l]);return[o,c]}function fp({defaultProp:t,onChange:s}){const r=u.useState(t),[n]=r,a=u.useRef(n),i=Ur(s);return u.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var pp=u.createContext(void 0);function Ji(t){const s=u.useContext(pp);return t||s||"ltr"}var Ks="rovingFocusGroup.onEntryFocus",gp={bubbles:!1,cancelable:!0},Es="RovingFocusGroup",[hr,Zi,vp]=up(Es),[jp,eo]=Yr(Es,[vp]),[bp,yp]=jp(Es),to=u.forwardRef((t,s)=>e.jsx(hr.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(hr.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Np,{...t,ref:s})})}));to.displayName=Es;var Np=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...p}=t,h=u.useRef(null),x=js(s,h),g=Ji(i),[f=null,v]=Qi({prop:o,defaultProp:l,onChange:c}),[b,j]=u.useState(!1),k=Ur(d),y=Zi(r),E=u.useRef(!1),[N,P]=u.useState(0);return u.useEffect(()=>{const w=h.current;if(w)return w.addEventListener(Ks,k),()=>w.removeEventListener(Ks,k)},[k]),e.jsx(bp,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:f,onItemFocus:u.useCallback(w=>v(w),[v]),onItemShiftTab:u.useCallback(()=>j(!0),[]),onFocusableItemAdd:u.useCallback(()=>P(w=>w+1),[]),onFocusableItemRemove:u.useCallback(()=>P(w=>w-1),[]),children:e.jsx(Vt.div,{tabIndex:b||N===0?-1:0,"data-orientation":n,...p,ref:x,style:{outline:"none",...t.style},onMouseDown:ot(t.onMouseDown,()=>{E.current=!0}),onFocus:ot(t.onFocus,w=>{const $=!E.current;if(w.target===w.currentTarget&&$&&!b){const D=new CustomEvent(Ks,gp);if(w.currentTarget.dispatchEvent(D),!D.defaultPrevented){const ee=y().filter(C=>C.focusable),M=ee.find(C=>C.active),W=ee.find(C=>C.id===f),G=[M,W,...ee].filter(Boolean).map(C=>C.ref.current);no(G,m)}}E.current=!1}),onBlur:ot(t.onBlur,()=>j(!1))})})}),so="RovingFocusGroupItem",ro=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=t,l=Ki(),c=i||l,d=yp(so,r),m=d.currentTabStopId===c,p=Zi(r),{onFocusableItemAdd:h,onFocusableItemRemove:x}=d;return u.useEffect(()=>{if(n)return h(),()=>x()},[n,h,x]),e.jsx(hr.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:e.jsx(Vt.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...o,ref:s,onMouseDown:ot(t.onMouseDown,g=>{n?d.onItemFocus(c):g.preventDefault()}),onFocus:ot(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:ot(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const f=Sp(g,d.orientation,d.dir);if(f!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=p().filter(j=>j.focusable).map(j=>j.ref.current);if(f==="last")b.reverse();else if(f==="prev"||f==="next"){f==="prev"&&b.reverse();const j=b.indexOf(g.currentTarget);b=d.loop?kp(b,j+1):b.slice(j+1)}setTimeout(()=>no(b))}})})})});ro.displayName=so;var wp={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cp(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Sp(t,s,r){const n=Cp(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return wp[n]}function no(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function kp(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var Pp=to,Dp=ro;function Ap(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var ao=t=>{const{present:s,children:r}=t,n=_p(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),i=js(n.ref,Mp(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:i}):null};ao.displayName="Presence";function _p(t){const[s,r]=u.useState(),n=u.useRef({}),a=u.useRef(t),i=u.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Ap(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=hs(n.current);i.current=l==="mounted"?d:"none"},[l]),mr(()=>{const d=n.current,m=a.current;if(m!==t){const h=i.current,x=hs(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(m&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),mr(()=>{if(s){let d;const m=s.ownerDocument.defaultView??window,p=x=>{const f=hs(n.current).includes(x.animationName);if(x.target===s&&f&&(c("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},h=x=>{x.target===s&&(i.current=hs(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{m.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function hs(t){return(t==null?void 0:t.animationName)||"none"}function Mp(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Gr="Tabs",[Tp]=Yr(Gr,[eo]),io=eo(),[Ep,Xr]=Tp(Gr),oo=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,m=Ji(l),[p,h]=Qi({prop:n,onChange:a,defaultProp:i});return e.jsx(Ep,{scope:r,baseId:Ki(),value:p,onValueChange:h,orientation:o,dir:m,activationMode:c,children:e.jsx(Vt.div,{dir:m,"data-orientation":o,...d,ref:s})})});oo.displayName=Gr;var lo="TabsList",co=u.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=Xr(lo,r),o=io(r);return e.jsx(Pp,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Vt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});co.displayName=lo;var uo="TabsTrigger",mo=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,o=Xr(uo,r),l=io(r),c=fo(o.baseId,n),d=po(o.baseId,n),m=n===o.value;return e.jsx(Dp,{asChild:!0,...l,focusable:!a,active:m,children:e.jsx(Vt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:ot(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?o.onValueChange(n):p.preventDefault()}),onKeyDown:ot(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(n)}),onFocus:ot(t.onFocus,()=>{const p=o.activationMode!=="manual";!m&&!a&&p&&o.onValueChange(n)})})})});mo.displayName=uo;var ho="TabsContent",xo=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=t,l=Xr(ho,r),c=fo(l.baseId,n),d=po(l.baseId,n),m=n===l.value,p=u.useRef(m);return u.useEffect(()=>{const h=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(ao,{present:a||m,children:({present:h})=>e.jsx(Vt.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:p.current?"0s":void 0},children:h&&i})})});xo.displayName=ho;function fo(t,s){return`${t}-trigger-${s}`}function po(t,s){return`${t}-content-${s}`}var Ip=oo,Rp=co,Op=mo,Fp=xo;function Is({className:t,...s}){return e.jsx(Ip,{"data-slot":"tabs",className:B("flex flex-col gap-2",t),...s})}function Rs({className:t,...s}){return e.jsx(Rp,{"data-slot":"tabs-list",className:B("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function ke({className:t,...s}){return e.jsx(Op,{"data-slot":"tabs-trigger",className:B("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function Pe({className:t,...s}){return e.jsx(Fp,{"data-slot":"tabs-content",className:B("flex-1 outline-none",t),...s})}function Lp({projectId:t,currentUserId:s,onFilesUploaded:r,maxFileSize:n=10*1024*1024,acceptedFileTypes:a=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".jpg",".jpeg",".png",".gif",".bmp",".svg",".zip",".rar",".7z",".mp4",".avi",".mov",".wmv",".txt",".csv"]}){const[i,o]=u.useState([]),[l,c]=u.useState(!1),[d,m]=u.useState(""),p=u.useRef(null),h=j=>j.startsWith("image/")?e.jsx(kc,{className:"h-4 w-4"}):j.startsWith("video/")?e.jsx(ud,{className:"h-4 w-4"}):j.includes("zip")||j.includes("rar")||j.includes("7z")?e.jsx(Pt,{className:"h-4 w-4"}):e.jsx(we,{className:"h-4 w-4"}),x=j=>{if(j===0)return"0 Bytes";const k=1024,y=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(j)/Math.log(k));return parseFloat((j/Math.pow(k,E)).toFixed(2))+" "+y[E]},g=j=>{var y;if(j.size>n)return`File "${j.name}" is too large. Maximum size is ${x(n)}.`;const k="."+((y=j.name.split(".").pop())==null?void 0:y.toLowerCase());return a.includes(k)?null:`File type "${k}" is not supported.`},f=j=>{const k=Array.from(j.target.files||[]);m("");for(const P of k){const w=g(P);if(w){m(w);return}}const y=i.map(P=>P.name),E=k.filter(P=>!y.includes(P.name)),N=k.filter(P=>y.includes(P.name));if(N.length>0){m(`Files with the same names already selected: ${N.map(P=>P.name).join(", ")}`);return}o(P=>[...P,...E])},v=j=>{o(k=>k.filter((y,E)=>E!==j)),m("")},b=async()=>{if(i.length===0){m("Please select files to upload.");return}c(!0),m("");try{await new Promise(k=>setTimeout(k,2e3));const j=i.map(k=>({id:`att-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:k.name,size:k.size,type:k.type,uploadedBy:s,uploadedAt:new Date().toISOString(),url:`mock://uploads/${t}/${k.name}`}));r(j),o([]),p.current&&(p.current.value="")}catch{m("Failed to upload files. Please try again.")}finally{c(!1)}};return e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5"}),"Upload Project Files"]})}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"file-upload",children:"Select Files"}),e.jsx(K,{ref:p,id:"file-upload",type:"file",multiple:!0,accept:a.join(","),onChange:f,className:"cursor-pointer"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supported formats: ",a.slice(0,5).join(", "),a.length>5&&` and ${a.length-5} more`]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Maximum file size: ",x(n)]})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{children:["Selected Files (",i.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:i.map((j,k)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h(j.type),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm truncate",children:j.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x(j.size)})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>v(k),className:"shrink-0",children:e.jsx(lt,{className:"h-4 w-4"})})]},k))})]}),d&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:d})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{onClick:b,disabled:i.length===0||l,className:"flex-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gn,{className:"h-4 w-4 mr-2"}),"Upload Files"]})}),i.length>0&&e.jsx(T,{variant:"outline",onClick:()=>{o([]),p.current&&(p.current.value=""),m("")},disabled:l,children:"Clear All"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," This is a demo implementation. In a real application, files would be uploaded to a secure cloud storage service."]})})]})]})}function $p({project:t,users:s,currentUser:r,onUpdateProject:n,onClose:a}){const[i,o]=u.useState({}),[l,c]=u.useState(""),[d,m]=u.useState(!1);if(u.useEffect(()=>{const j={};t.fabricatorIds.forEach(k=>{var E,N;const y=(E=t.fabricatorBudgets)==null?void 0:E.find(P=>P.fabricatorId===k);j[k]=((N=y==null?void 0:y.allocatedRevenue)==null?void 0:N.toString())||"0"}),o(j)},[t]),!(r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id))return e.jsxs(Te,{children:[e.jsx(gt,{className:"h-4 w-4"}),e.jsx(Ee,{children:"You don't have permission to manage fabricator revenue for this project."})]});const h=j=>{var k;return((k=s.find(y=>y.id===j))==null?void 0:k.name)||"Unknown Fabricator"},x=(j,k)=>{(k===""||/^\d*\.?\d*$/.test(k))&&(o(y=>({...y,[j]:k})),c(""),m(!1))},g=()=>Object.values(i).reduce((j,k)=>j+(parseFloat(k)||0),0),f=()=>{const j=g();if(j>t.revenue){c(`Total allocated revenue (${j.toLocaleString()}) exceeds project revenue (${t.revenue.toLocaleString()})`);return}const k=t.fabricatorIds.map(E=>{var w;const N=(w=t.fabricatorBudgets)==null?void 0:w.find($=>$.fabricatorId===E),P=parseFloat(i[E])||0;return{fabricatorId:E,allocatedAmount:(N==null?void 0:N.allocatedAmount)||0,spentAmount:(N==null?void 0:N.spentAmount)||0,allocatedRevenue:P,description:(N==null?void 0:N.description)||`Revenue allocation for ${h(E)}`}}),y={...t,fabricatorBudgets:k};n(y),m(!0),c(""),setTimeout(()=>m(!1),3e3)},v=g(),b=t.revenue-v;return e.jsxs(q,{children:[e.jsxs(re,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-accent"}),"Fabricator Revenue Assignment"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign revenue amounts to each fabricator working on this project"})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Project Revenue"}),e.jsxs("p",{className:"text-xl",children:["",t.revenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Allocated Revenue"}),e.jsxs("p",{className:"text-xl text-accent",children:["",v.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Remaining Revenue"}),e.jsxs("p",{className:`text-xl ${b<0?"text-destructive":"text-green-600"}`,children:["",b.toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsxs("h3",{className:"text-lg",children:["Fabricators (",t.fabricatorIds.length,")"]})]}),t.fabricatorIds.map((j,k)=>{const y=s.find(P=>P.id===j),E=parseFloat(i[j]||"0"),N=t.revenue>0?(E/t.revenue*100).toFixed(1):"0";return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:k+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(y==null?void 0:y.name)||"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:y==null?void 0:y.secureId})]})]}),e.jsxs(ie,{variant:"outline",children:[N,"% of total"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:`revenue-${j}`,children:"Assigned Revenue Amount ()"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx(K,{id:`revenue-${j}`,type:"text",value:i[j]||"",onChange:P=>x(j,P.target.value),placeholder:"0.00",className:"text-lg"})]}),E>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["This fabricator will receive ",E.toLocaleString()," (",N,"% of project revenue)"]})]})]},j)})]}),l&&e.jsxs(Te,{variant:"destructive",children:[e.jsx(gt,{className:"h-4 w-4"}),e.jsx(Ee,{children:l})]}),d&&e.jsxs(Te,{className:"border-green-600 text-green-600",children:[e.jsx(gt,{className:"h-4 w-4"}),e.jsx(Ee,{children:"Revenue allocations saved successfully!"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(T,{onClick:f,className:"flex-1",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Save Revenue Allocations"]}),a&&e.jsxs(T,{variant:"outline",onClick:a,children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Close"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{const j=(t.revenue/t.fabricatorIds.length).toFixed(2),k={};t.fabricatorIds.forEach(y=>{k[y]=j}),o(k)},children:"Split Equally"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{const j={};t.fabricatorIds.forEach(k=>{j[k]="0"}),o(j)},children:"Clear All"})]})]})]})}function go({project:t,users:s,currentUser:r,onUpdateProject:n,onClose:a}){const[i,o]=u.useState(!1),[l,c]=u.useState(t),[d,m]=u.useState(""),[p,h]=u.useState(!1),[x,g]=u.useState(!1),f=s.find(M=>M.role==="client"&&M.clientProjectId===t.id),v=!!f;u.useEffect(()=>{let M=!0;return(async()=>{try{const G=((await be.getProjects()).data||[]).find(R=>R.id===t.id||R.id===t.id),C=!!(G&&(G.client_id||G.clientId||G.client_name||G.clientName));M&&g(C)}catch{}})(),()=>{M=!1}},[t.id]);const b=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id,j=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id,k=r.role==="admin"||r.role==="supervisor"&&t.supervisorId===r.id||r.role==="fabricator"&&t.fabricatorIds.includes(r.id),y=M=>{const W=s.find(A=>A.id===M);return(W==null?void 0:W.name)||"Unknown Supervisor"},E=M=>{if(M===0)return"0 Bytes";const W=1024,A=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(M)/Math.log(W));return parseFloat((M/Math.pow(W,G)).toFixed(2))+" "+A[G]},N=M=>{switch(M){case"0_Created":return"outline";case"1_Assigned_to_FAB":return"secondary";case"2_Ready_for_Supervisor_Review":return"destructive";case"3_Ready_for_Admin_Review":return"destructive";case"4_Ready_for_Client_Signoff":return"default";default:return"outline"}},P=()=>{n(l),o(!1)},w=()=>{c(t),o(!1)},$=M=>{const W={...l,attachments:[...l.attachments||[],...M]};c(W),n(W)},D=M=>{c(W=>({...W,documentationUrl:M}))},ee=()=>{if(d&&!l.fabricatorIds.includes(d)){const M=[...l.fabricatorIds,d],W={...l,fabricatorIds:M};c(W),n(W),m(""),h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(q,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:i&&b?e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{value:l.name,onChange:M=>c(W=>({...W,name:M.target.value})),className:"text-2xl font-semibold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:l.status,onChange:M=>c(W=>({...W,status:M.target.value})),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"0_Created",children:"0_Created"}),e.jsx("option",{value:"1_Assigned_to_FAB",children:"1_Assigned_to_FAB"}),e.jsx("option",{value:"2_Ready_for_Supervisor_Review",children:"2_Ready_for_Supervisor_Review"}),e.jsx("option",{value:"3_Ready_for_Admin_Review",children:"3_Ready_for_Admin_Review"}),e.jsx("option",{value:"4_Ready_for_Client_Signoff",children:"4_Ready_for_Client_Signoff"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"pending-assignment",children:"Pending Assignment"})]}),e.jsxs("select",{value:l.priority,onChange:M=>c(W=>({...W,priority:M.target.value})),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"text-2xl",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(ie,{variant:N(t.status),children:t.status}),e.jsxs(ie,{variant:"outline",children:[t.priority," priority"]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[b&&!i&&e.jsxs(T,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Edit"]}),b&&(v||x)&&e.jsx(T,{variant:"outline",disabled:!0,children:"Client Assigned"}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",onClick:P,children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsx(T,{variant:"ghost",onClick:w,children:"Cancel"})]}),e.jsx(T,{variant:"ghost",onClick:a,children:e.jsx(lt,{className:"h-4 w-4"})})]})]})}),e.jsx(H,{children:e.jsxs(Is,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Rs,{className:"flex w-full overflow-x-auto justify-start md:grid md:grid-cols-5 h-auto p-1 bg-muted/50",children:[e.jsxs(ke,{value:"overview",className:"flex-1 min-w-[80px]",children:[e.jsx(we,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Overview"})]}),e.jsxs(ke,{value:"team",className:"flex-1 min-w-[80px]",children:[e.jsx(Ge,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Team"})]}),e.jsxs(ke,{value:"revenue",className:"flex-1 min-w-[80px]",children:[e.jsx(pe,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Revenue"})]}),e.jsxs(ke,{value:"files",className:"flex-1 min-w-[80px]",children:[e.jsx(we,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Files"})]}),e.jsxs(ke,{value:"documentation",className:"flex-1 min-w-[80px]",children:[e.jsx(Xt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Docs"})]})]}),e.jsxs(Pe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"description",children:"Description"}),i?e.jsx(K,{id:"description",value:l.description,onChange:M=>c(W=>({...W,description:M.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Progress"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[t.progress,"% Complete"]}),i&&e.jsx(K,{type:"number",min:"0",max:"100",value:l.progress,onChange:M=>c(W=>({...W,progress:parseInt(M.target.value)||0})),className:"w-20 h-6"})]}),e.jsx(ts,{value:t.progress})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Start Date"]}),i&&b?e.jsx(K,{type:"date",value:l.startDate,onChange:M=>c(W=>({...W,startDate:M.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.startDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"End Date"]}),i&&b?e.jsx(K,{type:"date",value:l.endDate,onChange:M=>c(W=>({...W,endDate:M.target.value})),className:"mt-1"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"}),"Client"]}),f?e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:f.name}),e.jsx("p",{className:"text-xs",children:f.email})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No client assigned"})]})]})]}),e.jsx(ga,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg",children:"Financial Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[(r.role==="admin"||r.role==="supervisor")&&e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Budget"})]}),i&&r.role==="admin"?e.jsx(K,{type:"number",value:l.budget,onChange:M=>c(W=>({...W,budget:parseFloat(M.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.budget.toLocaleString()]})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),i&&r.role==="admin"?e.jsx(K,{type:"number",value:l.spent,onChange:M=>c(W=>({...W,spent:parseFloat(M.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.spent.toLocaleString()]})]})})]}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:r.role==="fabricator"?"Project Value":"Revenue"})]}),i&&r.role==="admin"?e.jsx(K,{type:"number",value:l.revenue,onChange:M=>c(W=>({...W,revenue:parseFloat(M.target.value)||0})),className:"text-2xl font-semibold mt-2"}):e.jsxs("p",{className:"text-2xl",children:["",t.revenue.toLocaleString()]})]})})]})]})]}),e.jsx(Pe,{value:"team",className:"space-y-6",children:e.jsxs(q,{children:[e.jsxs(re,{className:"flex justify-between items-center",children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),"Project Team"]}),j&&!p&&e.jsx(T,{onClick:()=>h(!0),variant:"outline",size:"sm",children:"Add Fabricator"})]}),j&&p&&e.jsxs("div",{className:"p-4",children:[e.jsx(I,{htmlFor:"fabricator-select",children:"Select Fabricator"}),e.jsxs("select",{id:"fabricator-select",value:d,onChange:M=>m(M.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"",children:"--Choose a Fabricator--"}),s.filter(M=>M.role==="fabricator"&&!l.fabricatorIds.includes(M.id)).map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(T,{onClick:ee,disabled:!d,children:"Add"}),e.jsx(T,{variant:"ghost",onClick:()=>{h(!1),m("")},children:"Cancel"})]})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b",children:[e.jsx(I,{className:"flex items-center gap-2 text-base mb-2",children:"Supervisor"}),i&&r.role==="admin"?e.jsx("div",{className:"space-y-2",children:e.jsx("select",{value:l.supervisorId,onChange:M=>c(W=>({...W,supervisorId:M.target.value})),className:"w-full border rounded p-2",children:s.filter(M=>M.role==="supervisor").map(M=>e.jsxs("option",{value:M.id,children:[M.name," - ",M.school]},M.id))})}):e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:"S"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y(t.supervisorId)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Project Supervisor"})]})]})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2 text-base mb-3",children:["Fabricators (",t.fabricatorIds.length,")"]}),e.jsx("div",{className:"space-y-3",children:t.fabricatorIds.map((M,W)=>{var R;const A=s.find(O=>O.id===M),G=(R=t.fabricatorBudgets)==null?void 0:R.find(O=>O.fabricatorId===M),C=G&&G.allocatedRevenue>0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-accent-foreground flex items-center justify-center",children:W+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(A==null?void 0:A.name)||"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A==null?void 0:A.secureId})]})]}),C&&(r.role==="admin"||r.role==="supervisor")&&e.jsxs(ie,{variant:"outline",className:"gap-1",children:[e.jsx(pe,{className:"h-3 w-3"}),"",G.allocatedRevenue.toLocaleString()," revenue"]})]},M)})})]})]})]})}),e.jsx(Pe,{value:"revenue",className:"space-y-6",children:e.jsx($p,{project:t,users:s,currentUser:r,onUpdateProject:n})}),e.jsxs(Pe,{value:"files",className:"space-y-6",children:[k&&e.jsx(Lp,{projectId:t.id,currentUserId:r.id,onFilesUploaded:$}),t.attachments&&t.attachments.length>0?e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"Project Files (",t.attachments.length,")"]})}),e.jsx(H,{children:e.jsx("div",{className:"space-y-2",children:t.attachments.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:M.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E(M.size),"  Uploaded"," ",new Date(M.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"ghost",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},M.id))})})]}):!b&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No files uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"No files have been uploaded to this project yet."})]})})})]}),e.jsxs(Pe,{value:"documentation",className:"space-y-6",children:[e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Google Drive Documentation"]})}),e.jsx(H,{className:"space-y-4",children:i?e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"docs-url",children:"Documentation URL"}),e.jsx(K,{id:"docs-url",value:l.documentationUrl||"",onChange:M=>D(M.target.value),placeholder:"https://drive.google.com/drive/folders/..."})]}):e.jsx(e.Fragment,{children:t.documentationUrl?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Project Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Google Drive folder with complete project documentation"})]})]}),e.jsx(T,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:t.documentationUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(vc,{className:"h-4 w-4 mr-2"}),"Open"]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No documentation link"}),e.jsx("p",{className:"text-muted-foreground",children:"No Google Drive documentation has been added to this project."})]})})})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Documentation Guidelines"})}),e.jsxs(H,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"The Google Drive folder should contain:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[e.jsx("li",{children:" Project specifications and requirements"}),e.jsx("li",{children:" Technical drawings and blueprints"}),e.jsx("li",{children:" Material lists and supplier information"}),e.jsx("li",{children:" Quality control checklists"}),e.jsx("li",{children:" Progress reports and photos"}),e.jsx("li",{children:" Client communication records"})]})]})]})]})]})})]})})}class zp{constructor(){cs(this,"notifications",[])}async sendProjectAssignment(s,r,n,a){const i={id:`email-${Date.now()}`,to:n.email,from:a.email,subject:`New Project Assignment: ${r.name}`,content:`
        <h2>New Project Assignment</h2>
        <p>Hello ${n.name},</p>
        
        <p>You have been assigned to a new project by ${a.name}:</p>
        
        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
          <h3>${r.name}</h3>
          <p><strong>Description:</strong> ${r.description}</p>
          <p><strong>Client:</strong> ${r.clientName}</p>
          <p><strong>Start Date:</strong> ${new Date(r.startDate).toLocaleDateString()}</p>
          <p><strong>End Date:</strong> ${new Date(r.endDate).toLocaleDateString()}</p>
          <p><strong>Priority:</strong> ${r.priority}</p>
        </div>
        
        ${s.message?`
          <p><strong>Message from supervisor:</strong></p>
          <blockquote style="border-left: 4px solid #0066cc; padding-left: 15px; margin: 15px 0; font-style: italic;">
            ${s.message}
          </blockquote>
        `:""}
        
        <p>Please log into the Ehub Project Management system to accept or decline this assignment.</p>
        
        <p>Best regards,<br/>
        ${a.name}<br/>
        Ehub Project Management Team</p>
      `,type:"assignment",sentAt:new Date().toISOString(),projectId:r.id};return this.notifications.push(i),console.log(` Email sent to ${n.email}: ${i.subject}`),!0}async sendTaskAssignment(s,r,n,a){const i={id:`email-${Date.now()}`,to:n.email,from:a.email,subject:`New Task Assignment: ${s.title}`,content:`
        <h2>New Task Assignment</h2>
        <p>Hello ${n.name},</p>
        
        <p>You have been assigned a new task by ${a.name}:</p>
        
        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
          <h3>${s.title}</h3>
          <p><strong>Description:</strong> ${s.description}</p>
          <p><strong>Project:</strong> ${r.name}</p>
          <p><strong>Due Date:</strong> ${new Date(s.dueDate).toLocaleDateString()}</p>
          <p><strong>Priority:</strong> ${s.priority}</p>
          <p><strong>Estimated Hours:</strong> ${s.estimatedHours}</p>
          ${s.materials?`<p><strong>Materials:</strong> ${s.materials.join(", ")}</p>`:""}
        </div>
        
        <p>Please log into the Ehub Project Management system to view task details and update progress.</p>
        
        <p>Best regards,<br/>
        ${a.name}<br/>
        Ehub Project Management Team</p>
      `,type:"task_assignment",sentAt:new Date().toISOString(),projectId:r.id,taskId:s.id};return this.notifications.push(i),console.log(` Email sent to ${n.email}: ${i.subject}`),!0}async sendProjectUpdate(s,r,n,a){const i=r.filter(o=>o.id===s.supervisorId||s.fabricatorIds.includes(o.id)||o.role==="admin");for(const o of i){const l={id:`email-${Date.now()}-${o.id}`,to:o.email,from:"noreply@ehub.com",subject:`Project Update: ${s.name}`,content:`
          <h2>Project Update</h2>
          <p>Hello ${o.name},</p>
          
          <p>There has been an update to project "${s.name}" by ${a.name}:</p>
          
          <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <h3>${s.name}</h3>
            <p><strong>Status:</strong> ${s.status}</p>
            <p><strong>Progress:</strong> ${s.progress}%</p>
            <p><strong>Client:</strong> ${s.clientName}</p>
            <p><strong>Updated by:</strong> ${a.name}</p>
          </div>
          
          <p>Log into the Ehub Project Management system to view full project details.</p>
          
          <p>Best regards,<br/>
          Ehub Project Management Team</p>
        `,type:"project_update",sentAt:new Date().toISOString(),projectId:s.id};this.notifications.push(l),console.log(` Email sent to ${o.email}: ${l.subject}`)}return!0}getNotificationsForUser(s){return this.notifications.filter(r=>r.to===s).sort((r,n)=>new Date(n.sentAt).getTime()-new Date(r.sentAt).getTime())}getAllNotifications(){return this.notifications.sort((s,r)=>new Date(r.sentAt).getTime()-new Date(s.sentAt).getTime())}clearNotifications(){this.notifications=[]}}const bs=new zp;function Wp({open:t,onClose:s,project:r,onClientCreated:n}){const[a,i]=u.useState({name:"",email:"",phone:"",password:""}),[o,l]=u.useState({}),[c,d]=u.useState(!1),[m,p]=u.useState(null),[h,x]=u.useState(!1),[g,f]=u.useState(null),v=!!(r.clientName&&r.clientName.trim().length>0),b=()=>{const N={};return a.name.trim()||(N.name="Client name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(N.email="Please enter a valid email address"):N.email="Email is required",a.password.trim()?a.password.length<6&&(N.password="Password must be at least 6 characters"):N.password="Password is required",a.phone&&!/^(\+639|09)\d{9}$/.test(a.phone)&&(N.phone="Please enter a valid Philippine phone number"),l(N),Object.keys(N).length===0},j=(N,P)=>{i(w=>({...w,[N]:P})),o[N]&&l(w=>({...w,[N]:""}))},k=async N=>{if(N.preventDefault(),v){l({submit:"A client is already assigned to this project."});return}if(b()){d(!0);try{const P=await be.createClient({...a,projectId:r.id,projectName:r.name});if(P.data)p(P.data),n(P.data);else throw new Error(P.error||"Failed to create client account")}catch(P){l({submit:P instanceof Error?P.message:"Failed to create client account"})}finally{d(!1)}}},y=(N,P)=>{navigator.clipboard.writeText(N),f(P),setTimeout(()=>f(null),2e3)},E=()=>{i({name:"",email:"",phone:"",password:""}),l({}),p(null),x(!1),s()};return m?e.jsx(ze,{open:t,onOpenChange:E,children:e.jsxs(Ie,{className:"max-w-md",children:[e.jsxs(Re,{children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Fs,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Oe,{className:"text-center",children:"Client Account Created!"}),e.jsxs(Fe,{className:"text-center",children:["Client account has been successfully created for ",r.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Te,{children:e.jsxs(Ee,{children:["An email with login credentials has been sent to ",e.jsx("strong",{children:m.email})]})}),e.jsxs("div",{className:"space-y-3 p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm",children:"Client Login Credentials:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client ID"}),e.jsx("p",{className:"font-mono text-sm",children:m.secureId})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>y(m.secureId,"secureId"),children:g==="secureId"?e.jsx(Fs,{className:"h-4 w-4 text-green-600"}):e.jsx(rr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:m.email})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>y(m.email,"email"),children:g==="email"?e.jsx(Fs,{className:"h-4 w-4 text-green-600"}):e.jsx(rr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Password"}),e.jsx("p",{className:"font-mono text-sm",children:""})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"As set"})]})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Access Level:"})," Client can view project documentation and progress reports only."]})}),e.jsx(T,{onClick:E,className:"w-full",children:"Done"})]})]})}):e.jsx(ze,{open:t,onOpenChange:E,children:e.jsxs(Ie,{className:"max-w-md",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Create Client Account"]}),e.jsxs(Fe,{children:["Create a client account for ",e.jsx("strong",{children:r.name})," to allow them to track progress and view documentation."]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[v&&e.jsx(Te,{children:e.jsxs(Ee,{children:["A client is already assigned to this project (",r.clientName,"). You cannot create another client."]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Client Name *"}),e.jsx(K,{id:"name",placeholder:"Enter client's full name",value:a.name,onChange:N=>j("name",N.target.value),className:o.name?"border-destructive":"",disabled:v}),o.name&&e.jsx("p",{className:"text-sm text-destructive",children:o.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email Address *"}),e.jsx(K,{id:"email",type:"email",placeholder:"client@example.com",value:a.email,onChange:N=>j("email",N.target.value),className:o.email?"border-destructive":"",disabled:v}),o.email&&e.jsx("p",{className:"text-sm text-destructive",children:o.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number (Optional)"}),e.jsx(K,{id:"phone",type:"tel",placeholder:"+639123456789 or 09123456789",value:a.phone,onChange:N=>j("phone",N.target.value),className:o.phone?"border-destructive":"",disabled:v}),o.phone&&e.jsx("p",{className:"text-sm text-destructive",children:o.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"password",type:h?"text":"password",placeholder:"Create a secure password",value:a.password,onChange:N=>j("password",N.target.value),className:o.password?"border-destructive":"",disabled:v}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>x(!h),disabled:v,children:h?e.jsx(Zt,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})})]}),o.password&&e.jsx("p",{className:"text-sm text-destructive",children:o.password})]}),o.submit&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:o.submit})}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"The client will receive an email with their login credentials and can access project documentation and progress reports."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:E,className:"flex-1",children:"Cancel"}),e.jsx(T,{type:"submit",className:"flex-1",disabled:c||v,children:v?e.jsx(e.Fragment,{children:"Client Assigned"}):c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Create Client"]})})]})]})]})})}function Qs({projects:t=[],users:s=[],currentUser:r,onCreateProject:n,onAssignFabricator:a,onUpdateProject:i,onAcceptAssignment:o,onDeclineAssignment:l,onCreateUser:c,onBroadcastFabricators:d}){const[m,p]=u.useState(!1),[h,x]=u.useState(!1),[g,f]=u.useState(""),[v,b]=u.useState(""),[j,k]=u.useState(""),[y,E]=u.useState(null),[N,P]=u.useState(!1),[w,$]=u.useState(!1),[D,ee]=u.useState(null),[M,W]=u.useState(new Set),[A,G]=u.useState(null),[C,R]=u.useState("");if(!r)return null;const de=(()=>{let _;return r.role==="admin"?_=t:r.role==="supervisor"?_=t.filter(L=>L.supervisorId===r.id||L.pendingSupervisors&&L.pendingSupervisors.includes(r.id)):r.role==="fabricator"?_=t.filter(L=>{var te;return L.fabricatorIds.includes(r.id)||((te=L.pendingAssignments)==null?void 0:te.some(le=>le.fabricatorId===r.id&&le.status==="pending"))}):_=t.filter(L=>L.fabricatorIds.includes(r.id)),_.filter(L=>L.status!=="completed")})(),je=_=>M.has(_.id)||_.clientName&&_.clientName.trim().length>0?!0:s.some(L=>L.role==="client"&&L.clientProjectId===_.id),S=_=>{const L=t.find(te=>te.id===_);return L?s.filter(te=>{var le;return te.role==="fabricator"&&!L.fabricatorIds.includes(te.id)&&!((le=L.pendingAssignments)!=null&&le.some(J=>J.fabricatorId===te.id&&J.status==="pending"))}):[]},U=()=>{a&&g&&v&&(a(g,v,j||void 0),x(!1),f(""),b(""),k(""))},ae=r.role==="admin"||r.role==="supervisor",ye=_=>{switch(_){case"0_Created":return"outline";case"1_Assigned_to_FAB":return"secondary";case"2_Ready_for_Supervisor_Review":return"destructive";case"3_Ready_for_Admin_Review":return"destructive";case"4_Ready_for_Client_Signoff":return"default";default:return"outline"}},Ne=_=>{switch(_){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},De=_=>{const L=s.find(te=>te.id===_);return(L==null?void 0:L.name)||"Unknown Supervisor"},Ye=_=>_.map(L=>{var te;return((te=s.find(le=>le.id===L))==null?void 0:te.name)||"Unknown"}).join(", "),Ae=_=>{if(_===0)return"0 Bytes";const L=1024,te=["Bytes","KB","MB","GB"],le=Math.floor(Math.log(_)/Math.log(L));return parseFloat((_/Math.pow(L,le)).toFixed(2))+" "+te[le]},Be=(_,L)=>{var te;return(te=_.fabricatorBudgets)==null?void 0:te.find(le=>le.fabricatorId===L)},Ce=async _=>{let L;return n&&(L=await n(_)),L},F=_=>{E(_),P(!0)},V=_=>{i&&(i(_),bs.sendProjectUpdate(_,s,"progress_update",r))},Y=()=>t.filter(_=>_.status==="completed"||_.status==="4_Ready_for_Client_Signoff"||_.progress>=100),X=()=>{if(!i)return;Y().forEach(L=>{const te={...L,status:"completed"};i(te)})},se=(_,L)=>{if(!i)return;const te={..._,status:L};i(te),bs.sendProjectUpdate(te,s,"status_change",r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl",children:"Projects"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and track your projects"})]}),e.jsxs("div",{className:"flex gap-2",children:[(r.role==="admin"||r.role==="supervisor")&&e.jsxs(T,{variant:"outline",onClick:X,disabled:Y().length===0,title:Y().length===0?"No projects ready to archive":"",children:["Archive Completed (",Y().length,")"]}),ae&&e.jsxs(T,{onClick:()=>p(!0),className:"bg-accent hover:bg-accent/90",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:de.map(_=>{var L,te,le;return e.jsxs(q,{className:"hover:shadow-lg transition-all duration-200 border-0 shadow-md overflow-hidden group",children:[e.jsx("div",{className:"h-2 bg-gradient-to-r from-primary to-accent"}),e.jsx(re,{className:"bg-gradient-to-br from-primary/5 to-transparent",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(ne,{className:"text-lg",children:_.name}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ie,{variant:ye(_.status),className:"text-xs",children:_.status}),e.jsx(ie,{variant:Ne(_.priority),className:"text-xs",children:_.priority})]})]})}),e.jsxs(H,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:_.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[_.progress,"%"]})]}),e.jsx(ts,{value:_.progress})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Client: ",_.clientName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-3 w-3"}),e.jsxs("span",{children:[new Date(_.startDate).toLocaleDateString()," - "," ",new Date(_.endDate).toLocaleDateString()]})]}),r.role==="fabricator"&&e.jsx("div",{className:"space-y-1",children:(()=>{const J=Be(_,r.id);return J?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["My Budget: ",J.allocatedAmount.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Spent: ",J.spentAmount.toLocaleString()]})]}),e.jsx("div",{className:"text-xs text-muted-foreground ml-5",children:J.description})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Project Value: ",_.revenue.toLocaleString()]})]})})()}),r.role==="supervisor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Budget: ",_.budget.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Spent: ",_.spent.toLocaleString()]})]})]}),r.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Revenue: ",_.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Budget: ",_.budget.toLocaleString()," | Spent: ",_.spent.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Supervisor: ",De(_.supervisorId)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-3 w-3"}),e.jsxs("span",{className:"truncate",children:["Team: ",Ye(_.fabricatorIds)]})]}),_.documentationUrl&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-3 w-3"}),e.jsx("a",{href:_.documentationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:"Google Drive Documentation"})]}),_.attachments&&_.attachments.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wc,{className:"h-3 w-3"}),e.jsxs("span",{children:["Attachments (",_.attachments.length,")"]})]}),e.jsxs("div",{className:"ml-5 space-y-1",children:[_.attachments.slice(0,2).map(J=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:J.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",Ae(J.size),")"]})]},J.id)),_.attachments.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground ml-4",children:["+",_.attachments.length-2," more files"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ge,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:["Created by: ",((L=s.find(J=>J.id===_.createdBy))==null?void 0:L.name)||"Unknown"]})]})]}),r.role==="supervisor"&&((te=_.pendingSupervisors)==null?void 0:te.includes(r.id))&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-4 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Pending Project Assignment"})]}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"You have been invited to supervise this project."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>o&&o("","accepted",_.id),children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Accept Project"]}),e.jsxs(T,{size:"sm",variant:"outline",className:"flex-1 border-red-300 text-red-600 hover:bg-red-50",onClick:()=>l&&l("","declined",_.id),children:[e.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Decline"]})]})]}),r.role==="fabricator"&&((le=_.pendingAssignments)==null?void 0:le.some(J=>J.fabricatorId===r.id&&J.status==="pending"))&&!_.fabricatorIds.includes(r.id)&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-300 dark:border-orange-700 rounded-lg p-4 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"New Project Assignment"})]}),_.pendingAssignments.filter(J=>J.fabricatorId===r.id&&J.status==="pending").map(J=>{const Ue=s.find(qt=>qt.id===J.assignedBy),Se=A===`accept-${J.id}`,nn=A===J.id&&!(A!=null&&A.includes("accept-"));return e.jsxs("div",{className:"space-y-3",children:[J.message&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-md p-3 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ec,{className:"h-4 w-4 mt-0.5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-100 mb-1",children:"Message from Supervisor:"}),e.jsx("p",{className:"text-orange-800 dark:text-orange-200",children:J.message})]})]})}),e.jsxs("div",{className:"text-xs text-orange-700 dark:text-orange-300 flex items-center gap-2",children:[e.jsx(Ge,{className:"h-3 w-3"}),e.jsxs("span",{children:["Assigned by: ",e.jsx("strong",{children:(Ue==null?void 0:Ue.name)||"Unknown Supervisor"})]})]}),!Se&&!nn&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{G(`accept-${J.id}`),R("")},children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Accept Assignment"]}),e.jsxs(T,{size:"sm",variant:"outline",className:"flex-1 border-red-300 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 hover:border-red-400",onClick:()=>{G(J.id),R("")},children:[e.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Decline Assignment"]})]}),Se&&e.jsxs("div",{className:"space-y-3 bg-green-50 dark:bg-green-900/10 rounded-md p-3 border border-green-200 dark:border-green-800",children:[e.jsx(I,{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Accept Assignment"}),e.jsx(et,{value:C,onChange:qt=>R(qt.target.value),placeholder:"Add an optional message to the supervisor...",className:"text-sm",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{G(null),R("")},children:"Cancel"}),e.jsxs(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{o&&(o(J.id,C.trim()||void 0),G(null),R(""))},children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Confirm Accept"]})]})]}),nn&&e.jsxs("div",{className:"space-y-3 bg-red-50 dark:bg-red-900/10 rounded-md p-3 border border-red-200 dark:border-red-800",children:[e.jsx(I,{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Decline Assignment"}),e.jsx(et,{value:C,onChange:qt=>R(qt.target.value),placeholder:"Add an optional reason for declining...",className:"text-sm",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{G(null),R("")},children:"Cancel"}),e.jsxs(T,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>{l&&(l(J.id,C.trim()||void 0),G(null),R(""))},children:[e.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Confirm Decline"]})]})]})]},J.id)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1",onClick:()=>F(_),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:"Details"})]}),(r.role==="admin"||r.role==="supervisor")&&(je(_)?e.jsxs(T,{variant:"outline",size:"sm",disabled:!0,className:"w-full lg:flex-1",title:"Client already assigned to this project",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:"Assigned"})]}):e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 text-primary",onClick:()=>{ee(_),$(!0)},children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:"Client"})]})),r.role==="supervisor"&&_.supervisorId===r.id&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 text-accent",onClick:()=>{f(_.id),x(!0)},children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:"Assign"})]}),e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 col-span-2 lg:col-auto",onClick:()=>d&&d(_.id),children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:"Broadcast FABs"})]})]}),r.role==="admin"&&_.status==="0_Created"&&e.jsx(T,{variant:"default",size:"sm",className:"w-full lg:flex-1 col-span-2 lg:col-auto bg-primary",onClick:()=>se(_,"1_Assigned_to_FAB"),children:"Assign Now"}),r.role==="fabricator"&&_.status==="1_Assigned_to_FAB"&&e.jsx(T,{variant:"default",size:"sm",className:"w-full lg:flex-1 col-span-2 lg:col-auto bg-primary",onClick:()=>se(_,"2_Ready_for_Supervisor_Review"),disabled:!(_.documentationUrl||_.attachments&&_.attachments.length>0),children:"Submit Review"}),r.role==="supervisor"&&_.status==="2_Ready_for_Supervisor_Review"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"default",size:"sm",className:"w-full lg:flex-1 bg-green-600 hover:bg-green-700",onClick:()=>se(_,"3_Ready_for_Admin_Review"),children:"Approve"}),e.jsx(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 text-destructive border-destructive/20",onClick:()=>se(_,"1_Assigned_to_FAB"),children:"Reject"})]}),r.role==="admin"&&_.status==="3_Ready_for_Admin_Review"&&e.jsx(T,{variant:"default",size:"sm",className:"w-full lg:flex-1 col-span-2 lg:col-auto bg-green-600 hover:bg-green-700",onClick:()=>se(_,"4_Ready_for_Client_Signoff"),children:"Final Approval"})]})]})]},_.id)})}),de.length===0&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"No projects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r.role==="admin"||r.role==="supervisor"?"Create your first project to get started.":"Wait for project assignments from your supervisor."}),ae&&e.jsxs(T,{onClick:()=>p(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})})}),m&&e.jsx(Xi,{currentUser:r,users:s,onCreateProject:async _=>{await Ce(_)},onClose:()=>p(!1)}),h&&e.jsx(ze,{open:h,onOpenChange:x,children:e.jsxs(Ie,{children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Assign Fabricator to Project"}),e.jsx(Fe,{children:"Select a fabricator to assign to this project and send them a message."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"fabricatorId",children:"Select Fabricator"}),e.jsxs(me,{value:v,onValueChange:b,children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Choose a fabricator"})}),e.jsx(fe,{children:S(g).map(_=>e.jsxs(z,{value:_.id,children:[_.name," (",_.secureId,")"]},_.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"assignMessage",children:"Message (optional)"}),e.jsx(et,{id:"assignMessage",value:j,onChange:_=>k(_.target.value),placeholder:"Add a message for the fabricator about this project assignment...",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsxs(T,{onClick:U,disabled:!v,children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Send Assignment"]})]})]})]})}),N&&y&&e.jsx(go,{project:y,users:s,currentUser:r,onUpdateProject:V,onClose:()=>P(!1)}),w&&D&&e.jsx(Wp,{open:w,onClose:()=>{$(!1),ee(null)},project:D,onClientCreated:_=>{c==null||c(_),W(L=>new Set(L).add(D.id)),$(!1),ee(null)}})]})}function Bp({className:t,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:B("w-full caption-bottom text-sm",t),...s})})}function Vp({className:t,...s}){return e.jsx("thead",{"data-slot":"table-header",className:B("[&_tr]:border-b",t),...s})}function qp({className:t,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:B("[&_tr:last-child]:border-0",t),...s})}function Hn({className:t,...s}){return e.jsx("tr",{"data-slot":"table-row",className:B("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function wt({className:t,...s}){return e.jsx("th",{"data-slot":"table-head",className:B("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Ct({className:t,...s}){return e.jsx("td",{"data-slot":"table-cell",className:B("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Hp(t){const s={admin:"ADMID",supervisor:"SUPID",fabricator:"FABID"},r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let a=0;a<8;a++)n+=r.charAt(Math.floor(Math.random()*r.length));return`${s[t]}-${n}`}function Yp(){const t=new Date().getFullYear().toString().slice(-2),s=Math.floor(Math.random()*9999).toString().padStart(4,"0");return`EMP${t}${s}`}function Up({onSignup:t,onClose:s}){const[r,n]=u.useState({name:"",email:"",password:"",phone:"",department:""}),[a,i]=u.useState({}),[o,l]=u.useState(!1),c=["Production","Quality Control","Operations","Manufacturing","Engineering","Safety","Maintenance"],d=()=>{const h={};return r.name.trim()||(h.name="Full name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(h.email="Please enter a valid email address"):h.email="Email is required",r.password.trim()?r.password.length<6&&(h.password="Password must be at least 6 characters"):h.password="Password is required",r.phone.trim()?/^(\+639|09)\d{9}$/.test(r.phone)||(h.phone="Please enter a valid Philippine phone number"):h.phone="Phone number is required",r.department||(h.department="Department selection is required"),i(h),Object.keys(h).length===0},m=(h,x)=>{n(g=>({...g,[h]:x})),a[h]&&i(g=>({...g,[h]:""}))},p=async h=>{if(h.preventDefault(),!!d()){l(!0);try{const x={id:`user-${Date.now()}`,name:r.name,email:r.email.toLowerCase(),role:"supervisor",department:r.department,school:r.department,secureId:Hp("supervisor"),employeeNumber:Yp(),phone:r.phone,password:r.password};t(x)}catch(x){i({submit:x instanceof Error?x.message:"Failed to create supervisor account"})}finally{l(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(q,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(re,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-6 w-6"}),e.jsx(ne,{children:"Create Supervisor Account"})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(lt,{className:"h-4 w-4"})})]}),e.jsx(Jt,{children:"Add a new supervisor to the system"})]}),e.jsx(H,{className:"space-y-4",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Full Name"}),e.jsx(K,{id:"name",type:"text",placeholder:"Enter supervisor's full name",value:r.name,onChange:h=>m("name",h.target.value),className:a.name?"border-destructive":""}),a.name&&e.jsx("p",{className:"text-sm text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email Address"}),e.jsx(K,{id:"email",type:"email",placeholder:"Enter supervisor's email",value:r.email,onChange:h=>m("email",h.target.value),className:a.email?"border-destructive":""}),a.email&&e.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsx(K,{id:"password",type:"password",placeholder:"Enter password",value:r.password,onChange:h=>m("password",h.target.value),className:a.password?"border-destructive":""}),a.password&&e.jsx("p",{className:"text-sm text-destructive",children:a.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number"}),e.jsx(K,{id:"phone",type:"tel",placeholder:"+639123456789 or 09123456789",value:r.phone,onChange:h=>m("phone",h.target.value),className:a.phone?"border-destructive":""}),a.phone&&e.jsx("p",{className:"text-sm text-destructive",children:a.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"department",children:"Department"}),e.jsxs(me,{value:r.department,onValueChange:h=>m("department",h),children:[e.jsx(xe,{className:a.department?"border-destructive":"",children:e.jsx(he,{placeholder:"Select department"})}),e.jsx(fe,{children:c.map(h=>e.jsx(z,{value:h,children:h},h))})]}),a.department&&e.jsx("p",{className:"text-sm text-destructive",children:a.department})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Account Information"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"}),e.jsx(ie,{variant:"default",children:"Supervisor"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Secure ID:"}),e.jsx("span",{className:"font-mono text-xs",children:"Auto-generated"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created by:"}),e.jsx("span",{className:"text-xs",children:"Administrator"})]})]})]}),a.submit&&e.jsx(Te,{variant:"destructive",children:e.jsx(Ee,{children:a.submit})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:o,children:"Cancel"}),e.jsx(T,{type:"submit",className:"flex-1",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Create Supervisor"]})})]})]})})]})})}function Gp({users:t,setUsers:s,currentUser:r}){const[n,a]=u.useState(!1),[i,o]=u.useState(!1),[l,c]=u.useState(null),[d,m]=u.useState(!1),p=j=>{s([...t,j]),a(!1)},h=j=>{c({...j}),m(!0)},x=()=>{l&&(s(t.map(j=>j.id===l.id?l:j)),m(!1),c(null))},g=j=>{window.confirm("Are you sure you want to deactivate this user?")&&s(t.filter(k=>k.id!==j))},f=()=>{m(!1),c(null)},v=j=>{switch(j){case"admin":return"destructive";case"supervisor":return"default";case"fabricator":return"secondary";default:return"outline"}},b=r.role==="admin";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{children:"User Management"}),b&&e.jsxs(T,{onClick:()=>a(!0),children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Supervisor"]})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ne,{children:"System Users"}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>o(!i),children:[i?e.jsx(Zt,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"}),i?"Hide":"Show"," Secure IDs"]})]})}),e.jsx(H,{children:e.jsxs(Bp,{children:[e.jsx(Vp,{children:e.jsxs(Hn,{children:[e.jsx(wt,{children:"Name"}),e.jsx(wt,{children:"Role"}),e.jsx(wt,{children:"School/Institution"}),e.jsx(wt,{children:"Contact"}),i&&e.jsx(wt,{children:"Secure ID"}),e.jsx(wt,{children:"Employee #"}),r.role==="admin"&&e.jsx(wt,{children:"Actions"})]})}),e.jsx(qp,{children:t.map(j=>e.jsxs(Hn,{children:[e.jsx(Ct,{children:e.jsxs("div",{children:[e.jsx("div",{children:j.name}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(nr,{className:"h-3 w-3"}),j.email]})]})}),e.jsx(Ct,{children:e.jsx(ie,{variant:v(j.role),children:j.role.toUpperCase()})}),e.jsx(Ct,{children:j.school}),e.jsx(Ct,{children:e.jsxs("div",{className:"space-y-1",children:[j.phone&&e.jsxs("div",{className:"text-sm flex items-center gap-1",children:[e.jsx(Vc,{className:"h-3 w-3"}),j.phone]}),j.gcashNumber&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["GCash: ",j.gcashNumber]})]})}),i&&e.jsx(Ct,{children:e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:j.secureId})}),e.jsx(Ct,{children:e.jsx("code",{className:"text-xs",children:j.employeeNumber})}),r.role==="admin"&&e.jsx(Ct,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>h(j),children:"Edit"}),j.id!==r.id&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>g(j.id),children:"Deactivate"})]})})]},j.id))})]})})]}),!b&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"Limited Access"}),e.jsx("p",{className:"text-muted-foreground",children:"Only administrators can manage users and create supervisor accounts."})]})})}),n&&e.jsx(Up,{onSignup:p,onClose:()=>a(!1)}),d&&l&&e.jsx(ze,{open:d,onOpenChange:m,children:e.jsxs(Ie,{children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Edit User"}),e.jsx(Fe,{children:"Update user information and settings."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Name"}),e.jsx(K,{id:"name",value:l.name||"",onChange:j=>c({...l,name:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",value:l.email||"",onChange:j=>c({...l,email:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"phone",children:"Phone"}),e.jsx(K,{id:"phone",value:l.phone||"",onChange:j=>c({...l,phone:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"gcashNumber",children:"GCash Number"}),e.jsx(K,{id:"gcashNumber",value:l.gcashNumber||"",onChange:j=>c({...l,gcashNumber:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"school",children:"School/Institution"}),e.jsx(K,{id:"school",value:l.school||"",onChange:j=>c({...l,school:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"role",children:"Role"}),e.jsxs(me,{value:l.role,onValueChange:j=>c({...l,role:j}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"admin",children:"Admin"}),e.jsx(z,{value:"supervisor",children:"Supervisor"}),e.jsx(z,{value:"fabricator",children:"Fabricator"}),e.jsx(z,{value:"client",children:"Client"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"secureId",children:"Secure ID"}),e.jsx(K,{id:"secureId",value:l.secureId||"",onChange:j=>c({...l,secureId:j.target.value})})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"employeeNumber",children:"Employee #"}),e.jsx(K,{id:"employeeNumber",value:l.employeeNumber||"",onChange:j=>c({...l,employeeNumber:j.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(T,{variant:"outline",onClick:f,children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(T,{onClick:x,children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})]})}function Xp({projects:t,companyRevenue:s,currentUser:r}){const a=r.role==="admin"?t:r.role==="supervisor"?t.filter(h=>h.supervisorId===r.id):t.filter(h=>h.fabricatorIds.includes(r.id)),i=r.role==="admin",o=r.role==="admin"||r.role==="supervisor",l=a.reduce((h,x)=>h+x.revenue,0),c=a.reduce((h,x)=>h+x.budget,0),d=a.reduce((h,x)=>h+x.spent,0),m=l-d,p=s[0];if(r.role==="fabricator"){const h=a.reduce((x,g)=>{var v;const f=(v=g.fabricatorBudgets)==null?void 0:v.find(b=>b.fabricatorId===r.id);return x+((f==null?void 0:f.allocatedRevenue)||0)},0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{children:"My Revenue & Projects"}),e.jsxs(q,{className:"bg-accent/10 border-accent",children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-accent"}),"Total Allocated Revenue"]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-3xl text-accent",children:["",h.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["From ",a.length," active project",a.length!==1?"s":""]})]})]}),e.jsx("div",{className:"grid gap-4",children:a.map(x=>{var b;const g=(b=x.fabricatorBudgets)==null?void 0:b.find(j=>j.fabricatorId===r.id),f=(g==null?void 0:g.allocatedRevenue)||0,v=x.revenue>0?(f/x.revenue*100).toFixed(1):"0";return e.jsxs(q,{children:[e.jsx(re,{className:"pb-3",children:e.jsxs(ne,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:x.name}),f>0&&e.jsxs("span",{className:"text-accent text-base",children:["",f.toLocaleString()]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Client"})]}),e.jsx("p",{children:x.clientName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Project Value"})]}),e.jsxs("p",{className:"text-lg",children:["",x.revenue.toLocaleString()]})]})]}),f>0&&e.jsx("div",{className:"mt-4 p-3 bg-accent/10 rounded-lg border border-accent/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Allocated Revenue"}),e.jsxs("p",{className:"text-xl text-accent",children:["",f.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Share"}),e.jsxs("p",{className:"text-xl",children:[v,"%"]})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project Progress"}),e.jsxs("span",{children:[x.progress,"%"]})]})})]})]},x.id)})})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{children:"Revenue & Financial Overview"}),o&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Project Revenue"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl",children:["",l.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",a.length," projects"]})]})]}),e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Project Budget"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl",children:["",c.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total allocated budget"})]})]}),e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Project Spent"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl",children:["",d.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(d/c*100),"% of budget"]})]})]}),e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Project Profit"}),m>=0?e.jsx(ar,{className:"h-4 w-4 text-green-500"}):e.jsx(sd,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:`text-2xl ${m>=0?"text-green-500":"text-red-500"}`,children:["",m.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue - Expenses"})]})]})]}),i&&p&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"mb-4",children:"Company Revenue Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Total Company Revenue"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl",children:["",p.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Q",p.quarter," ",p.year]})]})]}),e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Total Expenses"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl",children:["",p.totalExpenses.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Operating costs"})]})]}),e.jsxs(q,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ne,{className:"text-sm",children:"Net Profit"}),e.jsx(ar,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"text-2xl text-green-500",children:["",p.netProfit.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.projectsCompleted," projects completed"]})]})]})]})]})}),o&&e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Project Financial Details"})}),e.jsx(H,{children:e.jsx("div",{className:"space-y-4",children:a.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{children:h.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.clientName})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsxs("p",{className:"text-sm",children:["Revenue: ",h.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Spent: ",h.spent.toLocaleString()," / ",h.budget.toLocaleString()]})]})]},h.id))})})]})]})}function Kp({currentUser:t,projects:s,workLogs:r,materials:n,onAddWorkLog:a,onUpdateProject:i}){const[o,l]=u.useState(""),[c,d]=u.useState(!1),[m,p]=u.useState({date:new Date().toISOString().split("T")[0],description:"",progressPercentage:"",materialsUsed:[]}),h=s.filter(w=>w.fabricatorIds.includes(t.id)&&w.status!=="pending-assignment"),x=o?r.filter(w=>w.projectId===o&&w.fabricatorId===t.id):r.filter(w=>w.fabricatorId===t.id),g=o?n.filter(w=>w.projectId===o||!w.projectId):n,f=(w,$)=>{p(D=>({...D,[w]:$}))},v=w=>{p($=>({...$,materialsUsed:$.materialsUsed.includes(w)?$.materialsUsed.filter(D=>D!==w):[...$.materialsUsed,w]}))},b=w=>{if(w.preventDefault(),!o){alert("Please select a project first");return}const $={projectId:o,fabricatorId:t.id,date:m.date,hoursWorked:0,description:m.description,progressPercentage:parseInt(m.progressPercentage),materials:m.materialsUsed.length>0?m.materialsUsed:void 0};a($),p({date:new Date().toISOString().split("T")[0],description:"",progressPercentage:"",materialsUsed:[]}),d(!1)},j=w=>{const $=s.find(D=>D.id===w);return($==null?void 0:$.progress)||0},k=()=>s.find(w=>w.id===o),y=()=>{const w=k();if(!w)return!1;const $=Array.isArray(w.attachments)&&w.attachments.length>0,D=!!w.documentationUrl&&w.documentationUrl.trim().length>0;return $||D},E=()=>{var G;const w=k();if(!w)return!1;const D=["1_Assigned_to_FAB","in-progress","planning"].includes(w.status),M=["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"].includes(w.status),W=y(),A=w.progress>=100;return console.log("Submit button check:",{projectId:w.id,status:w.status,statusMatch:D&&!M,progress:w.progress,hasProgress:A,hasDocs:W,attachments:((G=w.attachments)==null?void 0:G.length)||0,docUrl:w.documentationUrl,canSubmit:D&&!M&&W&&A}),D&&!M&&W&&A},N=()=>{const w=k();if(!w||!i)return;const $={...w,status:"2_Ready_for_Supervisor_Review"};i($)},P=w=>{const $=s.find(D=>D.id===w);return($==null?void 0:$.name)||"Unknown Project"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"Work Log & Progress Reports"]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your daily work progress and material usage"})]}),e.jsxs(T,{onClick:()=>d(!0),disabled:!o,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Work Log"]})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5"}),"Select Project"]})}),e.jsx(H,{children:e.jsxs(me,{value:o,onValueChange:l,children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Choose a project to log work for"})}),e.jsx(fe,{children:h.map(w=>e.jsx(z,{value:w.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:w.name}),e.jsxs(ie,{variant:"outline",className:"ml-2",children:[w.progress,"% Complete"]})]})},w.id))})]})})]}),o&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Project Progress"})]}),e.jsxs("p",{className:"text-2xl",children:[j(o),"%"]})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Work Entries"})]}),e.jsx("p",{className:"text-2xl",children:x.length})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Documentation"})]}),e.jsx("p",{className:"text-2xl",children:y()?"Ready":"Missing"})]})})]}),c&&o&&e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Add Work Log Entry"})}),e.jsx(H,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"date",children:"Date"}),e.jsx(K,{id:"date",type:"date",value:m.date,onChange:w=>f("date",w.target.value),required:!0})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"progress",children:"Progress Contribution (%)"}),e.jsx(K,{id:"progress",type:"number",min:"0",max:"100",placeholder:"5",value:m.progressPercentage,onChange:w=>f("progressPercentage",w.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How much of the project does this work session complete?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Work Description"}),e.jsx(et,{id:"description",placeholder:"Describe the work performed, challenges faced, and achievements...",value:m.description,onChange:w=>f("description",w.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Materials Used (Optional)"}),e.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:g.map(w=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`material-${w.id}`,checked:m.materialsUsed.includes(w.name),onChange:()=>v(w.name),className:"rounded"}),e.jsx(I,{htmlFor:`material-${w.id}`,className:"text-sm cursor-pointer",children:w.name})]},w.id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(T,{type:"submit",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Work Log"]})]})]})})]}),o&&e.jsx(q,{children:e.jsx(H,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("div",{children:"Upload files in the Project Details  Files or add a documentation link."}),(()=>{var $;const w=k();return w?(y(),w.progress<100,w.status,e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Progress: ",e.jsxs("strong",{children:[w.progress,"%"]})," ",w.progress<100&&"(Must be 100% to submit)"]}),e.jsxs("div",{children:["Status: ",e.jsx("strong",{children:w.status})," ",!["1_Assigned_to_FAB","in-progress","planning"].includes(w.status)&&!["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"].includes(w.status)&&"(Status must allow submission)"]}),e.jsxs("div",{children:["Documentation: ",e.jsx("strong",{children:y()?"Ready":"Missing"}),!y()&&e.jsxs("span",{className:"ml-1",children:["(",(($=w.attachments)==null?void 0:$.length)||0," files, ",w.documentationUrl?"has link":"no link",")"]})]})]})):null})()]}),e.jsx(T,{onClick:N,disabled:!E(),className:E()?"bg-green-600 hover:bg-green-700":"",title:(()=>{const w=k();if(!w)return"Select a project first";const $=["1_Assigned_to_FAB","in-progress","planning"],D=["2_Ready_for_Supervisor_Review","3_Ready_for_Admin_Review","4_Ready_for_Client_Signoff","completed","on-hold"];return!$.includes(w.status)||D.includes(w.status)?`Status must allow submission (currently: ${w.status})`:y()?w.progress<100?`Progress must be 100% (currently: ${w.progress}%)`:"Click to submit for supervisor review":"Add documentation (files or link) before submitting"})(),children:"Submit for Supervisor Review"})]})})}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Work Log History",o&&e.jsx(ie,{variant:"outline",children:P(o)})]})}),e.jsx(H,{children:x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(we,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No work logs found"}),e.jsx("p",{className:"text-muted-foreground",children:o?"Start logging your work progress for this project.":"Select a project to view your work logs."})]}):e.jsx("div",{className:"space-y-4",children:x.sort((w,$)=>new Date($.date).getTime()-new Date(w.date).getTime()).map(w=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(w.date).toLocaleDateString()}),e.jsxs(ie,{variant:"outline",children:["+",w.progressPercentage,"% progress"]})]}),!o&&e.jsx(ie,{variant:"outline",children:P(w.projectId)})]}),e.jsx("p",{className:"text-sm mb-3",children:w.description}),w.materials&&w.materials.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Materials Used:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w.materials.map(($,D)=>e.jsx(ie,{variant:"outline",className:"text-xs",children:$},D))})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Logged on ",new Date(w.createdAt).toLocaleString()]})]},w.id))})})]})]})}function Qp({currentUser:t,projects:s,materials:r,onAddMaterial:n,_onUpdateMaterial:a,_onDeleteMaterial:i}){const[o,l]=u.useState(!1),[c,d]=u.useState(""),[m,p]=u.useState("all"),[h,x]=u.useState(""),[g,f]=u.useState({name:"",description:"",quantity:"",unit:"",cost:"",supplier:"",status:"ordered",projectId:"",category:""}),v=s.filter(D=>D.fabricatorIds.includes(t.id)&&D.status!=="pending-assignment"),b=r.filter(D=>{var ee,M;return(D.addedBy===t.id||!D.projectId)&&(c===""||c==="all"||D.projectId===c||c==="general"&&!D.projectId)&&(m==="all"||D.status===m)&&(h===""||D.name.toLowerCase().includes(h.toLowerCase())||((ee=D.description)==null?void 0:ee.toLowerCase().includes(h.toLowerCase()))||((M=D.category)==null?void 0:M.toLowerCase().includes(h.toLowerCase())))}),j=["Raw Materials","Structural Materials","Consumables","Tools & Equipment","Safety","Electrical","Finishing Materials","Hardware","Other"],k=["pieces","kg","lbs","meters","feet","inches","liters","gallons","sets","rolls","sheets","tubes","boxes","bags","cans"],y=(D,ee)=>{f(M=>({...M,[D]:ee}))},E=D=>{D.preventDefault();const ee={name:g.name,description:g.description||void 0,quantity:parseFloat(g.quantity),unit:g.unit,cost:parseFloat(g.cost),supplier:g.supplier||void 0,status:g.status,projectId:g.projectId&&g.projectId!=="none"?g.projectId:void 0,addedBy:t.id,category:g.category||void 0};n(ee),f({name:"",description:"",quantity:"",unit:"",cost:"",supplier:"",status:"ordered",projectId:"none",category:""}),l(!1)},N=D=>{switch(D){case"ordered":return e.jsx(ad,{className:"h-4 w-4"});case"delivered":return e.jsx(Ve,{className:"h-4 w-4 text-green-600"});case"in-use":return e.jsx(gt,{className:"h-4 w-4 text-orange-600"});case"depleted":return e.jsx(Kt,{className:"h-4 w-4 text-red-600"});default:return e.jsx(kt,{className:"h-4 w-4"})}},P=D=>{switch(D){case"ordered":return"secondary";case"delivered":return"default";case"in-use":return"secondary";case"depleted":return"destructive";default:return"outline"}},w=D=>{if(!D)return"General Inventory";const ee=s.find(M=>M.id===D);return(ee==null?void 0:ee.name)||"Unknown Project"},$=()=>b.reduce((D,ee)=>D+ee.cost*ee.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5"}),"Materials Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage materials and inventory for your projects"})]}),e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Material"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Total Items"})]}),e.jsx("p",{className:"text-2xl",children:b.length})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Total Value"})]}),e.jsxs("p",{className:"text-2xl",children:["",$().toLocaleString()]})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"In Use"})]}),e.jsx("p",{className:"text-2xl",children:r.filter(D=>D.status==="in-use"&&D.addedBy===t.id).length})]})}),e.jsx(q,{children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm",children:"Depleted"})]}),e.jsx("p",{className:"text-2xl",children:r.filter(D=>D.status==="depleted"&&D.addedBy===t.id).length})]})})]}),e.jsx(q,{children:e.jsx(H,{className:"pt-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Search Materials"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uc,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search by name, description...",value:h,onChange:D=>x(D.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Project Filter"}),e.jsxs(me,{value:c,onValueChange:d,children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"All Projects"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"all",children:"All Projects"}),e.jsx(z,{value:"general",children:"General Inventory"}),v.map(D=>e.jsx(z,{value:D.id,children:D.name},D.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Status Filter"}),e.jsxs(me,{value:m,onValueChange:D=>p(D),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"all",children:"All Status"}),e.jsx(z,{value:"ordered",children:"Ordered"}),e.jsx(z,{value:"delivered",children:"Delivered"}),e.jsx(z,{value:"in-use",children:"In Use"}),e.jsx(z,{value:"depleted",children:"Depleted"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(T,{variant:"outline",onClick:()=>{d("all"),p("all"),x("")},children:"Clear Filters"})})]})})}),o&&e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{children:"Add New Material"})}),e.jsx(H,{children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Material Name *"}),e.jsx(K,{id:"name",value:g.name,onChange:D=>y("name",D.target.value),placeholder:"Enter material name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"category",children:"Category"}),e.jsxs(me,{value:g.category,onValueChange:D=>y("category",D),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select category"})}),e.jsx(fe,{children:j.map(D=>e.jsx(z,{value:D,children:D},D))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(et,{id:"description",value:g.description,onChange:D=>y("description",D.target.value),placeholder:"Optional material description",rows:2})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"quantity",children:"Quantity *"}),e.jsx(K,{id:"quantity",type:"number",min:"0",step:"0.01",value:g.quantity,onChange:D=>y("quantity",D.target.value),placeholder:"0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"unit",children:"Unit *"}),e.jsxs(me,{value:g.unit,onValueChange:D=>y("unit",D),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select unit"})}),e.jsx(fe,{children:k.map(D=>e.jsx(z,{value:D,children:D},D))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"cost",children:"Cost per Unit () *"}),e.jsx(K,{id:"cost",type:"number",min:"0",step:"0.01",value:g.cost,onChange:D=>y("cost",D.target.value),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"supplier",children:"Supplier"}),e.jsx(K,{id:"supplier",value:g.supplier,onChange:D=>y("supplier",D.target.value),placeholder:"Enter supplier name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"status",children:"Status *"}),e.jsxs(me,{value:g.status,onValueChange:D=>y("status",D),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"ordered",children:"Ordered"}),e.jsx(z,{value:"delivered",children:"Delivered"}),e.jsx(z,{value:"in-use",children:"In Use"}),e.jsx(z,{value:"depleted",children:"Depleted"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"projectId",children:"Assign to Project"}),e.jsxs(me,{value:g.projectId,onValueChange:D=>y("projectId",D),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"General inventory (no project)"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"none",children:"General Inventory"}),v.map(D=>e.jsx(z,{value:D.id,children:D.name},D.id))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(T,{type:"submit",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Material"]})]})]})})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5"}),"Materials Inventory",e.jsxs(ie,{variant:"outline",children:[b.length," items"]})]})}),e.jsx(H,{children:b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(kt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No materials found"}),e.jsx("p",{className:"text-muted-foreground",children:"Start adding materials to track your inventory."})]}):e.jsx("div",{className:"space-y-4",children:b.map(D=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N(D.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:D.name}),D.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:D.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:P(D.status),children:D.status}),D.category&&e.jsx(ie,{variant:"outline",children:D.category})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Quantity"}),e.jsxs("p",{children:[D.quantity," ",D.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Unit Cost"}),e.jsx("p",{children:e.jsxs("span",{className:"text-lg",children:["",D.cost.toLocaleString()]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Value"}),e.jsxs("p",{children:["",(D.cost*D.quantity).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Project"}),e.jsx("p",{children:w(D.projectId)})]})]}),D.supplier&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supplier: ",D.supplier]})}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Added on ",new Date(D.addedAt).toLocaleDateString()]})]},D.id))})})]})]})}function Jp(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=p=>{var b;const{scope:h,children:x,...g}=p,f=((b=h==null?void 0:h[t])==null?void 0:b[c])||l,v=u.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})};d.displayName=i+"Provider";function m(p,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||l,g=u.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,Zp(a,...s)]}function Zp(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}function Yn(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function eg(...t){return s=>{let r=!1;const n=t.map(a=>{const i=Yn(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Yn(t[a],null)}}}}function vo(...t){return u.useCallback(eg(...t),t)}function tg(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}var jo="AlertDialog",[sg]=Jp(jo,[ia]),ut=ia(),bo=t=>{const{__scopeAlertDialog:s,...r}=t,n=ut(s);return e.jsx(fr,{...n,...r,modal:!0})};bo.displayName=jo;var rg="AlertDialogTrigger",ng=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ut(r);return e.jsx(Zo,{...a,...n,ref:s})});ng.displayName=rg;var ag="AlertDialogPortal",yo=t=>{const{__scopeAlertDialog:s,...r}=t,n=ut(s);return e.jsx(xr,{...n,...r})};yo.displayName=ag;var ig="AlertDialogOverlay",No=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ut(r);return e.jsx(ys,{...a,...n,ref:s})});No.displayName=ig;var Ot="AlertDialogContent",[og,lg]=sg(Ot),wo=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,i=ut(r),o=u.useRef(null),l=vo(s,o),c=u.useRef(null);return e.jsx(Jo,{contentName:Ot,titleName:Co,docsSlug:"alert-dialog",children:e.jsx(og,{scope:r,cancelRef:c,children:e.jsxs(Ns,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:tg(a.onOpenAutoFocus,d=>{var m;d.preventDefault(),(m=c.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(aa,{children:n}),e.jsx(dg,{contentRef:o})]})})})});wo.displayName=Ot;var Co="AlertDialogTitle",So=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ut(r);return e.jsx(Cs,{...a,...n,ref:s})});So.displayName=Co;var ko="AlertDialogDescription",Po=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ut(r);return e.jsx(Ss,{...a,...n,ref:s})});Po.displayName=ko;var cg="AlertDialogAction",Do=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ut(r);return e.jsx(ws,{...a,...n,ref:s})});Do.displayName=cg;var Ao="AlertDialogCancel",_o=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=lg(Ao,r),i=ut(r),o=vo(s,a);return e.jsx(ws,{...i,...n,ref:o})});_o.displayName=Ao;var dg=({contentRef:t})=>{const s=`\`${Ot}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ot}\` by passing a \`${ko}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ot}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},ug=bo,mg=yo,hg=No,xg=wo,fg=Do,pg=_o,gg=So,vg=Po;function Kr({...t}){return e.jsx(ug,{"data-slot":"alert-dialog",...t})}function jg({...t}){return e.jsx(mg,{"data-slot":"alert-dialog-portal",...t})}function bg({className:t,...s}){return e.jsx(hg,{"data-slot":"alert-dialog-overlay",className:B("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Qr({className:t,...s}){return e.jsxs(jg,{children:[e.jsx(bg,{}),e.jsx(xg,{"data-slot":"alert-dialog-content",className:B("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function Jr({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:B("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Zr({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:B("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function en({className:t,...s}){return e.jsx(gg,{"data-slot":"alert-dialog-title",className:B("text-lg font-semibold",t),...s})}function tn({className:t,...s}){return e.jsx(vg,{"data-slot":"alert-dialog-description",className:B("text-muted-foreground text-sm",t),...s})}function sn({className:t,...s}){return e.jsx(fg,{className:B(Qt(),t),...s})}function rn({className:t,...s}){return e.jsx(pg,{className:B(Qt({variant:"outline"}),t),...s})}function yg({tasks:t,projects:s,users:r,currentUser:n,onCreateTask:a,onUpdateTask:i,onDeleteTask:o}){const[l,c]=u.useState(!1),[d,m]=u.useState(!1),[p,h]=u.useState(!1),[x,g]=u.useState(null),[f,v]=u.useState({title:"",description:"",status:"pending",priority:"medium",projectId:"",assignedTo:"unassigned",dueDate:""}),b=()=>{v({title:"",description:"",status:"pending",priority:"medium",projectId:"",assignedTo:"unassigned",dueDate:""})},j=()=>{!f.title||!f.projectId||(a({title:f.title,description:f.description,status:f.status,priority:f.priority,projectId:f.projectId,assignedTo:f.assignedTo==="unassigned"?void 0:f.assignedTo,dueDate:f.dueDate||void 0,createdBy:n.id}),b(),c(!1))},k=A=>{g(A),v({title:A.title,description:A.description||"",status:A.status,priority:A.priority,projectId:A.projectId,assignedTo:A.assignedTo||"unassigned",dueDate:A.dueDate||""}),m(!0)},y=()=>{!x||!f.title||!f.projectId||(i(x.id,{title:f.title,description:f.description,status:f.status,priority:f.priority,projectId:f.projectId,assignedTo:f.assignedTo==="unassigned"?void 0:f.assignedTo,dueDate:f.dueDate||void 0}),b(),g(null),m(!1))},E=A=>{g(A),h(!0)},N=()=>{x&&(o(x.id),g(null),h(!1))},P=A=>{i(A.id,{status:"completed",updatedAt:new Date().toISOString()})},w=A=>{switch(A){case"completed":return"default";case"in-progress":return"secondary";case"pending":return"outline";case"blocked":return"destructive";default:return"outline"}},$=A=>{switch(A){case"urgent":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"outline"}},ee=(()=>{if(n.role==="admin")return t;if(n.role==="supervisor"){const A=s.filter(G=>G.supervisorId===n.id);return t.filter(G=>A.some(C=>C.id===G.projectId))}return t.filter(A=>A.assignedTo===n.id||A.createdBy===n.id)})(),M=n.role==="admin"||n.role==="supervisor",W=A=>n.role==="admin"||A.createdBy===n.id||n.role==="supervisor"&&s.some(G=>G.id===A.projectId&&G.supervisorId===n.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Task Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, manage, and track project tasks"})]}),M&&e.jsxs(T,{onClick:()=>c(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),e.jsx("div",{className:"grid gap-4",children:ee.map(A=>{var G,C,R;return e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsx(re,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ne,{className:"text-lg",children:A.title}),A.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:A.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(ie,{variant:w(A.status),children:A.status}),e.jsx(ie,{variant:$(A.priority),children:A.priority})]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",((G=s.find(O=>O.id===A.projectId))==null?void 0:G.name)||"Unknown"]})]}),A.assignedTo&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Assigned to: ",((C=r.find(O=>O.id===A.assignedTo))==null?void 0:C.name)||"Unknown"]})]}),A.dueDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Due: ",new Date(A.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created by: ",((R=r.find(O=>O.id===A.createdBy))==null?void 0:R.name)||"Unknown"]}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]}),W(A)&&e.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>k(A),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>E(A),className:"text-destructive hover:text-destructive",children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]}),A.status!=="completed"&&e.jsxs(T,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>P(A),children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Mark as Done"]})]})]})]},A.id)})}),ee.length===0&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:M?"Create your first task to get started.":"No tasks have been assigned to you yet."}),M&&e.jsxs(T,{onClick:()=>c(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})})}),e.jsx(ze,{open:l,onOpenChange:c,children:e.jsxs(Ie,{children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Create New Task"}),e.jsx(Fe,{children:"Create a new task and assign it to a team member."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"title",children:"Task Title"}),e.jsx(K,{id:"title",value:f.title,onChange:A=>v({...f,title:A.target.value}),placeholder:"Enter task title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(et,{id:"description",value:f.description,onChange:A=>v({...f,description:A.target.value}),placeholder:"Enter task description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"status",children:"Status"}),e.jsxs(me,{value:f.status,onValueChange:A=>v({...f,status:A}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"pending",children:"Pending"}),e.jsx(z,{value:"in-progress",children:"In Progress"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"blocked",children:"Blocked"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"priority",children:"Priority"}),e.jsxs(me,{value:f.priority,onValueChange:A=>v({...f,priority:A}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"project",children:"Project"}),e.jsxs(me,{value:f.projectId,onValueChange:A=>v({...f,projectId:A}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a project"})}),e.jsx(fe,{children:s.filter(A=>n.role==="admin"||A.supervisorId===n.id).map(A=>e.jsx(z,{value:A.id,children:A.name},A.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"assignedTo",children:"Assign To"}),e.jsxs(me,{value:f.assignedTo||"unassigned",onValueChange:A=>v({...f,assignedTo:A==="unassigned"?"":A}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a team member"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"unassigned",children:"Unassigned"}),r.filter(A=>A.role==="fabricator"||A.role==="supervisor").map(A=>e.jsxs(z,{value:A.id,children:[A.name," (",A.secureId,")"]},A.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"dueDate",children:"Due Date"}),e.jsx(K,{id:"dueDate",type:"date",value:f.dueDate,onChange:A=>v({...f,dueDate:A.target.value})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(T,{onClick:j,disabled:!f.title||!f.projectId,children:"Create Task"})]})]})]})}),e.jsx(ze,{open:d,onOpenChange:m,children:e.jsxs(Ie,{children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Edit Task"}),e.jsx(Fe,{children:"Update task details and assignments."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-title",children:"Task Title"}),e.jsx(K,{id:"edit-title",value:f.title,onChange:A=>v({...f,title:A.target.value}),placeholder:"Enter task title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-description",children:"Description"}),e.jsx(et,{id:"edit-description",value:f.description,onChange:A=>v({...f,description:A.target.value}),placeholder:"Enter task description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-status",children:"Status"}),e.jsxs(me,{value:f.status,onValueChange:A=>v({...f,status:A}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"pending",children:"Pending"}),e.jsx(z,{value:"in-progress",children:"In Progress"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"blocked",children:"Blocked"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-priority",children:"Priority"}),e.jsxs(me,{value:f.priority,onValueChange:A=>v({...f,priority:A}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-project",children:"Project"}),e.jsxs(me,{value:f.projectId,onValueChange:A=>v({...f,projectId:A}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a project"})}),e.jsx(fe,{children:s.filter(A=>n.role==="admin"||A.supervisorId===n.id).map(A=>e.jsx(z,{value:A.id,children:A.name},A.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-assignedTo",children:"Assign To"}),e.jsxs(me,{value:f.assignedTo||"unassigned",onValueChange:A=>v({...f,assignedTo:A==="unassigned"?"":A}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a team member"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"unassigned",children:"Unassigned"}),r.filter(A=>A.role==="fabricator"||A.role==="supervisor").map(A=>e.jsxs(z,{value:A.id,children:[A.name," (",A.secureId,")"]},A.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-dueDate",children:"Due Date"}),e.jsx(K,{id:"edit-dueDate",type:"date",value:f.dueDate,onChange:A=>v({...f,dueDate:A.target.value})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(T,{onClick:y,disabled:!f.title||!f.projectId,children:"Update Task"})]})]})]})}),e.jsx(Kr,{open:p,onOpenChange:h,children:e.jsxs(Qr,{children:[e.jsxs(Jr,{children:[e.jsxs(en,{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-5 w-5 text-destructive"}),"Delete Task"]}),e.jsxs(tn,{children:['Are you sure you want to delete "',x==null?void 0:x.title,'"? This action cannot be undone.']})]}),e.jsxs(Zr,{children:[e.jsx(rn,{children:"Cancel"}),e.jsx(sn,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Task"})]})]})})]})}function Ng({projects:t,users:s,tasks:r,currentUser:n}){const[a,i]=u.useState([{id:"report-1",title:"Monthly Project Progress",description:"Comprehensive overview of all project progress for the current month",type:"project",status:"published",createdBy:"admin-001",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z",data:{},filters:{month:"current",status:"all"}},{id:"report-2",title:"Team Performance Analysis",description:"Analysis of team member performance and task completion rates",type:"user",status:"published",createdBy:"admin-001",createdAt:"2024-01-10T14:30:00Z",updatedAt:"2024-01-10T14:30:00Z",data:{},filters:{period:"last30days",includeAll:!0}}]),[o,l]=u.useState(!1),[c,d]=u.useState(!1),[m,p]=u.useState(!1),[h,x]=u.useState(!1),[g,f]=u.useState(null),[v,b]=u.useState({title:"",description:"",type:"project",status:"draft",projectId:"",filters:{}}),j=()=>{b({title:"",description:"",type:"project",status:"draft",projectId:"",filters:{}})},k=()=>{if(!v.title)return;const C={id:`report-${Date.now()}`,title:v.title,description:v.description,type:v.type,status:v.status,projectId:v.projectId||void 0,createdBy:n.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),data:$(v.type,v.projectId),filters:v.filters};i(R=>[...R,C]),j(),l(!1)},y=C=>{f(C),b({title:C.title,description:C.description,type:C.type,status:C.status,projectId:C.projectId||"",filters:C.filters}),d(!0)},E=()=>{!g||!v.title||(i(C=>C.map(R=>R.id===g.id?{...R,title:v.title,description:v.description,type:v.type,status:v.status,projectId:v.projectId||void 0,updatedAt:new Date().toISOString(),data:$(v.type,v.projectId),filters:v.filters}:R)),j(),f(null),d(!1))},N=C=>{f(C),p(!0)},P=()=>{g&&(i(C=>C.filter(R=>R.id!==g.id)),f(null),p(!1))},w=C=>{f(C),x(!0)},$=(C,R)=>{switch(C){case"project":if(R){const S=t.find(ae=>ae.id===R),U=r.filter(ae=>ae.projectId===R);return{project:S,tasks:U,totalTasks:U.length,completedTasks:U.filter(ae=>ae.status==="completed").length,completionRate:U.length>0?U.filter(ae=>ae.status==="completed").length/U.length*100:0}}return{projects:t.length,completedProjects:t.filter(S=>S.status==="completed").length,inProgressProjects:t.filter(S=>S.status==="in-progress").length};case"task":return{totalTasks:r.length,completedTasks:r.filter(S=>S.status==="completed").length,pendingTasks:r.filter(S=>S.status==="pending").length,inProgressTasks:r.filter(S=>S.status==="in-progress").length,blockedTasks:r.filter(S=>S.status==="blocked").length};case"user":return{totalUsers:s.length,admins:s.filter(S=>S.role==="admin").length,supervisors:s.filter(S=>S.role==="supervisor").length,fabricators:s.filter(S=>S.role==="fabricator").length};case"financial":const O=t.reduce((S,U)=>S+U.revenue,0),de=t.reduce((S,U)=>S+U.budget,0),je=t.reduce((S,U)=>S+U.spent,0);return{totalRevenue:O,totalBudget:de,totalSpent:je,profit:O-je,budgetUtilization:de>0?je/de*100:0};default:return{}}},D=C=>{switch(C){case"published":return"default";case"draft":return"secondary";case"archived":return"outline";default:return"outline"}},ee=C=>{switch(C){case"project":return"default";case"task":return"secondary";case"user":return"outline";case"financial":return"destructive";case"custom":return"outline";default:return"outline"}},M=n.role==="admin"||n.role==="supervisor",W=C=>n.role==="admin"||C.createdBy===n.id,G=n.role==="admin"?a:n.role==="supervisor"?a.filter(C=>C.createdBy===n.id||C.status==="published"||C.projectId&&t.some(R=>R.id===C.projectId&&R.supervisorId===n.id)):a.filter(C=>C.status==="published");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Reports & Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate and manage comprehensive project reports"})]}),M&&e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Report"]})]}),e.jsxs(Is,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(Rs,{children:[e.jsx(ke,{value:"all",children:"All Reports"}),e.jsx(ke,{value:"project",children:"Project Reports"}),e.jsx(ke,{value:"task",children:"Task Reports"}),e.jsx(ke,{value:"financial",children:"Financial Reports"})]}),e.jsx(Pe,{value:"all",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:G.map(C=>{var R,O;return e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsx(re,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ne,{className:"text-lg",children:C.title}),C.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:C.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(ie,{variant:D(C.status),children:C.status}),e.jsx(ie,{variant:ee(C.type),children:C.type})]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[C.projectId&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",((R=t.find(de=>de.id===C.projectId))==null?void 0:R.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Created by: ",((O=s.find(de=>de.id===C.createdBy))==null?void 0:O.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Created: ",new Date(C.createdAt).toLocaleDateString()]}),C.updatedAt!==C.createdAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Updated: ",new Date(C.updatedAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(C),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{},children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Export"]}),W(C)&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>y(C),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>N(C),className:"text-destructive hover:text-destructive",children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]},C.id)})})}),e.jsx(Pe,{value:"project",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:G.filter(C=>C.type==="project").map(C=>e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(re,{children:[e.jsx(ne,{children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Projects"}),e.jsx("p",{className:"text-2xl",children:C.data.projects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl text-green-600",children:C.data.completedProjects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl text-blue-600",children:C.data.inProgressProjects||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completion Rate"}),e.jsxs("p",{className:"text-2xl",children:[C.data.completionRate||0,"%"]})]})]})})]},C.id))})}),e.jsx(Pe,{value:"task",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:G.filter(C=>C.type==="task").map(C=>e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(re,{children:[e.jsx(ne,{children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl",children:C.data.totalTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl text-green-600",children:C.data.completedTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl text-blue-600",children:C.data.inProgressTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl text-yellow-600",children:C.data.pendingTasks||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Blocked"}),e.jsx("p",{className:"text-2xl text-red-600",children:C.data.blockedTasks||0})]})]})})]},C.id))})}),e.jsx(Pe,{value:"financial",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:G.filter(C=>C.type==="financial").map(C=>e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(re,{children:[e.jsx(ne,{children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl text-green-600",children:["$",(C.data.totalRevenue||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Budget"}),e.jsxs("p",{className:"text-2xl",children:["$",(C.data.totalBudget||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl text-red-600",children:["$",(C.data.totalSpent||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Profit"}),e.jsxs("p",{className:`text-2xl ${(C.data.profit||0)>=0?"text-green-600":"text-red-600"}`,children:["$",(C.data.profit||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Budget Usage"}),e.jsxs("p",{className:"text-2xl",children:[(C.data.budgetUtilization||0).toFixed(1),"%"]})]})]})})]},C.id))})})]}),G.length===0&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No reports found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:M?"Create your first report to get started with analytics.":"No reports have been published yet."}),M&&e.jsxs(T,{onClick:()=>l(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})})}),e.jsx(ze,{open:o,onOpenChange:l,children:e.jsxs(Ie,{className:"max-w-2xl",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Create New Report"}),e.jsx(Fe,{children:"Generate a comprehensive report with customizable filters and data."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"title",children:"Report Title"}),e.jsx(K,{id:"title",value:v.title,onChange:C=>b({...v,title:C.target.value}),placeholder:"Enter report title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(et,{id:"description",value:v.description,onChange:C=>b({...v,description:C.target.value}),placeholder:"Enter report description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"type",children:"Report Type"}),e.jsxs(me,{value:v.type,onValueChange:C=>b({...v,type:C}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"project",children:"Project Report"}),e.jsx(z,{value:"task",children:"Task Report"}),e.jsx(z,{value:"user",children:"User Report"}),e.jsx(z,{value:"financial",children:"Financial Report"}),e.jsx(z,{value:"custom",children:"Custom Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"status",children:"Status"}),e.jsxs(me,{value:v.status,onValueChange:C=>b({...v,status:C}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"draft",children:"Draft"}),e.jsx(z,{value:"published",children:"Published"}),e.jsx(z,{value:"archived",children:"Archived"})]})]})]})]}),v.type==="project"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"project",children:"Specific Project (Optional)"}),e.jsxs(me,{value:v.projectId,onValueChange:C=>b({...v,projectId:C}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a project or leave blank for all projects"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"",children:"All Projects"}),t.filter(C=>n.role==="admin"||C.supervisorId===n.id).map(C=>e.jsx(z,{value:C.id,children:C.name},C.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(T,{onClick:k,disabled:!v.title,children:"Create Report"})]})]})]})}),e.jsx(ze,{open:c,onOpenChange:d,children:e.jsxs(Ie,{className:"max-w-2xl",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Edit Report"}),e.jsx(Fe,{children:"Update report details and regenerate data."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-title",children:"Report Title"}),e.jsx(K,{id:"edit-title",value:v.title,onChange:C=>b({...v,title:C.target.value}),placeholder:"Enter report title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-description",children:"Description"}),e.jsx(et,{id:"edit-description",value:v.description,onChange:C=>b({...v,description:C.target.value}),placeholder:"Enter report description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-type",children:"Report Type"}),e.jsxs(me,{value:v.type,onValueChange:C=>b({...v,type:C}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"project",children:"Project Report"}),e.jsx(z,{value:"task",children:"Task Report"}),e.jsx(z,{value:"user",children:"User Report"}),e.jsx(z,{value:"financial",children:"Financial Report"}),e.jsx(z,{value:"custom",children:"Custom Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-status",children:"Status"}),e.jsxs(me,{value:v.status,onValueChange:C=>b({...v,status:C}),children:[e.jsx(xe,{children:e.jsx(he,{})}),e.jsxs(fe,{children:[e.jsx(z,{value:"draft",children:"Draft"}),e.jsx(z,{value:"published",children:"Published"}),e.jsx(z,{value:"archived",children:"Archived"})]})]})]})]}),v.type==="project"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"edit-project",children:"Specific Project (Optional)"}),e.jsxs(me,{value:v.projectId,onValueChange:C=>b({...v,projectId:C}),children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select a project or leave blank for all projects"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"",children:"All Projects"}),t.filter(C=>n.role==="admin"||C.supervisorId===n.id).map(C=>e.jsx(z,{value:C.id,children:C.name},C.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(T,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(T,{onClick:E,disabled:!v.title,children:"Update Report"})]})]})]})}),e.jsx(ze,{open:h,onOpenChange:x,children:e.jsxs(Ie,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:g==null?void 0:g.title}),e.jsx(Fe,{children:g==null?void 0:g.description})]}),e.jsx("div",{className:"space-y-4",children:g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Report Type"}),e.jsx("p",{className:"text-sm",children:g.type})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Status"}),e.jsx("p",{className:"text-sm",children:g.status})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Created"}),e.jsx("p",{className:"text-sm",children:new Date(g.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Updated"}),e.jsx("p",{className:"text-sm",children:new Date(g.updatedAt).toLocaleString()})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"mb-4",children:"Report Data"}),e.jsx("pre",{className:"text-sm bg-muted p-4 rounded overflow-auto",children:JSON.stringify(g.data,null,2)})]})]})})]})}),e.jsx(Kr,{open:m,onOpenChange:p,children:e.jsxs(Qr,{children:[e.jsxs(Jr,{children:[e.jsxs(en,{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-5 w-5 text-destructive"}),"Delete Report"]}),e.jsxs(tn,{children:['Are you sure you want to delete "',g==null?void 0:g.title,'"? This action cannot be undone.']})]}),e.jsxs(Zr,{children:[e.jsx(rn,{children:"Cancel"}),e.jsx(sn,{onClick:P,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Report"})]})]})})]})}function Un({projects:t,users:s,materials:r,workLogs:n,currentUser:a,onUpdateProject:i,onDeleteProject:o,onCreateProject:l}){var O,de,je;const[c,d]=u.useState(""),[m,p]=u.useState("all"),[h,x]=u.useState(null),[g,f]=u.useState(!1),[v,b]=u.useState(!1),[j,k]=u.useState(!1),[y,E]=u.useState(null),[N,P]=u.useState(!1),w=t.filter(S=>S.status==="completed"),$=Array.from(new Set(w.map(S=>{var U;return((U=s.find(ae=>ae.role==="client"&&ae.clientProjectId===S.id))==null?void 0:U.school)||S.clientName}))).sort(),D=w.filter(S=>{var Ne;const U=S.name.toLowerCase().includes(c.toLowerCase())||S.description.toLowerCase().includes(c.toLowerCase())||S.clientName.toLowerCase().includes(c.toLowerCase()),ae=((Ne=s.find(De=>De.role==="client"&&De.clientProjectId===S.id))==null?void 0:Ne.school)||S.clientName;return U&&(m==="all"||ae===m)}),ee=S=>{x(S),f(!0)},M=S=>r.filter(U=>U.projectId===S),W=S=>n.filter(U=>U.projectId===S),A=S=>M(S).reduce((U,ae)=>U+ae.cost,0),G=S=>{var U;return((U=S.attachments)==null?void 0:U.filter(ae=>S.fabricatorIds.some(ye=>ae.uploadedBy===ye)))||[]},C=S=>{var U;return((U=S.attachments)==null?void 0:U.filter(ae=>ae.name.toLowerCase().includes("cost")||ae.name.toLowerCase().includes("analysis")||ae.name.toLowerCase().includes("budget")||ae.type.includes("spreadsheet")))||[]},R=a.role==="admin";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-6 w-6"}),"Project Archives"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed projects with documentation and cost analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ie,{variant:"secondary",className:"text-sm",children:[D.length," Archived Projects"]}),(a.role==="admin"||a.role==="supervisor")&&e.jsxs(T,{size:"sm",onClick:()=>P(!0),children:[e.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Record"]})]})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsx(ne,{className:"text-base",children:"Filter Archives"})}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"search",children:"Search Projects"}),e.jsx(K,{id:"search",placeholder:"Search by name, description, or client...",value:c,onChange:S=>d(S.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"school",children:"Filter by School/Client"}),e.jsxs(me,{value:m,onValueChange:p,children:[e.jsx(xe,{children:e.jsx(he,{placeholder:"Select school/client"})}),e.jsxs(fe,{children:[e.jsx(z,{value:"all",children:"All Schools/Clients"}),$.map(S=>e.jsx(z,{value:S,children:S},S))]})]})]})]})})]}),e.jsx("div",{className:"grid gap-6",children:D.map(S=>{var Be;const U=s.find(Ce=>Ce.id===S.supervisorId),ae=s.filter(Ce=>S.fabricatorIds.includes(Ce.id)),ye=s.find(Ce=>Ce.role==="client"&&Ce.clientProjectId===S.id),Ne=(ye==null?void 0:ye.school)||S.clientName,De=G(S),Ye=C(S),Ae=A(S.id);return e.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ne,{className:"text-lg",children:S.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(ie,{variant:"default",className:"bg-green-600",children:"Completed"}),e.jsx(ie,{variant:"outline",children:S.priority})]})]})}),e.jsx(H,{children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:Ne})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Supervisor: ",U==null?void 0:U.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[new Date(S.startDate).toLocaleDateString()," - ",new Date(S.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[ae.length," Fabricators"]})]})]}),R&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Budget"}),e.jsxs("p",{className:"font-medium",children:["$",S.budget.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Spent"}),e.jsxs("p",{className:"font-medium",children:["$",S.spent.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Materials"}),e.jsxs("p",{className:"font-medium",children:["$",Ae.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsxs("p",{className:"font-medium text-green-600",children:["$",S.revenue.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm",children:[De.length," Fabricator Documents"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[Ye.length," Cost Analysis Files"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-purple-600"}),e.jsxs("span",{className:"text-sm",children:[((Be=S.attachments)==null?void 0:Be.length)||0," Total Documents"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:flex gap-2 pt-2 border-t",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1",onClick:()=>ee(S),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"truncate",children:"Details"})]}),S.documentationUrl&&e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1",onClick:()=>window.open(S.documentationUrl,"_blank"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"truncate",children:"Docs"})]}),(a.role==="admin"||a.role==="supervisor")&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 text-primary",onClick:()=>{x(S),b(!0)},children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"truncate",children:"Edit"})]}),e.jsxs(T,{variant:"outline",size:"sm",className:"w-full lg:flex-1 text-destructive hover:text-destructive",onClick:()=>{E(S),k(!0)},children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"truncate",children:"Delete"})]})]})]})]})})]},S.id)})}),D.length===0&&e.jsx(q,{children:e.jsx(H,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No Archived Projects Found"}),e.jsx("p",{className:"text-muted-foreground",children:c||m!=="all"?"Try adjusting your search filters.":"No completed projects available in the archives yet."})]})})}),e.jsx(ze,{open:g,onOpenChange:f,children:e.jsxs(Ie,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:h==null?void 0:h.name}),e.jsx(Fe,{children:"Completed project details and documentation"})]}),h&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Is,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Rs,{className:"grid w-full grid-cols-4",children:[e.jsx(ke,{value:"overview",children:"Overview"}),e.jsx(ke,{value:"documentation",children:"Documentation"}),e.jsx(ke,{value:"costs",children:"Cost Analysis"}),e.jsx(ke,{value:"team",children:"Team"})]}),e.jsxs(Pe,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Project Description"}),e.jsx("p",{className:"text-sm mt-1",children:h.description})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Client/School"}),e.jsx("p",{className:"text-sm mt-1",children:((O=s.find(S=>S.role==="client"&&S.clientProjectId===h.id))==null?void 0:O.school)||h.clientName})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Project Duration"}),e.jsxs("p",{className:"text-sm mt-1",children:[new Date(h.startDate).toLocaleDateString()," - ",new Date(h.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Completion Date"}),e.jsx("p",{className:"text-sm mt-1",children:new Date(h.endDate).toLocaleDateString()})]})]}),R&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Total Budget"}),e.jsxs("p",{className:"text-lg",children:["$",h.budget.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Amount Spent"}),e.jsxs("p",{className:"text-lg",children:["$",h.spent.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Material Costs"}),e.jsxs("p",{className:"text-lg",children:["$",A(h.id).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Total Revenue"}),e.jsxs("p",{className:"text-lg text-green-600",children:["$",h.revenue.toLocaleString()]})]})]})]}),e.jsx(Pe,{value:"documentation",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabricator Documentation"}),e.jsx("div",{className:"grid gap-2",children:G(h).map(S=>{var U;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:S.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded by ",(U=s.find(ae=>ae.id===S.uploadedBy))==null?void 0:U.name," on ",new Date(S.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},S.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"All Project Documents"}),e.jsx("div",{className:"grid gap-2",children:((de=h.attachments)==null?void 0:de.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:S.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(S.size/1024/1024).toFixed(2)," MB  ",new Date(S.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},S.id)))||e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents available."})})]})]})}),e.jsx(Pe,{value:"costs",className:"space-y-4",children:R?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Cost Analysis Documents"}),e.jsx("div",{className:"grid gap-2",children:C(h).map(S=>{var U;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:S.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created by ",(U=s.find(ae=>ae.id===S.uploadedBy))==null?void 0:U.name]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},S.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Budget Breakdown by Fabricator"}),e.jsx("div",{className:"space-y-3",children:(je=h.fabricatorBudgets)==null?void 0:je.map(S=>{const U=s.find(ye=>ye.id===S.fabricatorId),ae=S.spentAmount/S.allocatedAmount*100;return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:U==null?void 0:U.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),e.jsxs(ie,{variant:ae>100?"destructive":"default",children:[ae.toFixed(1),"% utilized"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Allocated:"}),e.jsxs("span",{className:"ml-2",children:["$",S.allocatedAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Spent:"}),e.jsxs("span",{className:"ml-2",children:["$",S.spentAmount.toLocaleString()]})]})]})]},S.fabricatorId)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Material Costs"}),e.jsx("div",{className:"grid gap-2",children:M(h.id).map(S=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:S.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.quantity," ",S.unit,"  ",S.supplier]})]}),e.jsxs("p",{className:"font-medium",children:["$",S.cost.toLocaleString()]})]},S.id))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"Financial Information Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Cost analysis and budget information is only available to administrators."})]})}),e.jsx(Pe,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Supervisor"}),e.jsx("div",{className:"p-4 border rounded-lg",children:(()=>{const S=s.find(U=>U.id===h.supervisorId);return S?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(it,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.school,"  ",S.secureId]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supervisor information not available"})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabricators"}),e.jsx("div",{className:"grid gap-3",children:h.fabricatorIds.map(S=>{const U=s.find(Ne=>Ne.id===S),ae=W(h.id).filter(Ne=>Ne.fabricatorId===S),ye=ae.reduce((Ne,De)=>Ne+De.hoursWorked,0);return U?e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary/10 flex items-center justify-center",children:e.jsx(it,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:U.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[U.school,"  ",U.secureId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[ye," hours"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ae.length," work logs"]})]})]})},S):null})})]})]})})]})})]})}),v&&h&&e.jsx(go,{project:h,users:s,currentUser:a,onUpdateProject:S=>{i&&i(S),x(S)},onClose:()=>{b(!1),x(null)}}),e.jsx(ze,{open:N,onOpenChange:P,children:e.jsxs(Ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Add Archived Project"}),e.jsx(Fe,{children:"Create a new historical project record for the archives."})]}),e.jsx(Xi,{users:s,currentUser:a,onSubmit:async S=>{l&&(await l({...S,status:"completed",progress:100}),P(!1))},onCancel:()=>P(!1)})]})}),e.jsx(Kr,{open:j,onOpenChange:k,children:e.jsxs(Qr,{children:[e.jsxs(Jr,{children:[e.jsx(en,{children:"Delete Archived Project"}),e.jsxs(tn,{children:['Are you sure you want to delete "',y==null?void 0:y.name,'"? This action cannot be undone.']})]}),e.jsxs(Zr,{children:[e.jsx(rn,{onClick:()=>E(null),children:"Cancel"}),e.jsx(sn,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>{y&&o&&o(y.id),k(!1),E(null)},children:"Delete"})]})]})})]})}function Gn({currentUser:t,projects:s,users:r,workLogs:n,tasks:a}){var E;const[i,o]=u.useState(null),[l,c]=u.useState(!1),d=s.find(N=>N.id===t.clientProjectId);if(!d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg mb-2",children:"No Project Assigned"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned to your account yet."})]})});const m=r.find(N=>N.id===d.supervisorId),p=r.filter(N=>d.fabricatorIds.includes(N.id)),h=n.filter(N=>N.projectId===d.id),x=a.filter(N=>N.projectId===d.id),g=N=>{switch(N){case"completed":return"default";case"in-progress":return"secondary";case"review":return"outline";case"on-hold":return"destructive";case"planning":return"secondary";default:return"outline"}},f=N=>{switch(N){case"completed":return e.jsx(Ve,{className:"h-4 w-4"});case"in-progress":return e.jsx(Ft,{className:"h-4 w-4"});default:return e.jsx(Ft,{className:"h-4 w-4"})}},v=()=>{o(d),c(!0)},b=[...h].sort((N,P)=>new Date(P.createdAt).getTime()-new Date(N.createdAt).getTime()),j=x.filter(N=>N.status==="completed").length,k=x.length,y=k>0?j/k*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Client Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your project progress and documentation"})]}),e.jsx(ie,{variant:"secondary",className:"text-sm",children:t.school})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ne,{className:"text-xl",children:d.name}),e.jsx("p",{className:"text-muted-foreground mt-1",children:d.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(ie,{variant:g(d.status),className:"flex items-center gap-1",children:[f(d.status),d.status]}),e.jsx(ie,{variant:"outline",children:d.priority})]})]})}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Project Progress"}),e.jsxs("span",{className:"text-sm",children:[d.progress,"%"]})]}),e.jsx(ts,{value:d.progress,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{children:new Date(d.startDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Due Date"}),e.jsx("p",{children:new Date(d.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Supervisor"}),e.jsx("p",{children:m==null?void 0:m.name})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl",children:k}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-green-600",children:j}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl",children:[y.toFixed(0),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Task Progress"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:v,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"View Full Details"]}),d.documentationUrl&&e.jsxs(T,{variant:"outline",onClick:()=>window.open(d.documentationUrl,"_blank"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Documentation"]})]})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"Recent Progress Reports"]})}),e.jsx(H,{children:b.length>0?e.jsxs("div",{className:"space-y-4",children:[b.slice(0,5).map(N=>{const P=r.find(w=>w.id===N.fabricatorId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:P==null?void 0:P.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(N.date).toLocaleDateString(),"  ",N.hoursWorked," hours"]})]}),e.jsxs(ie,{variant:"secondary",className:"text-xs",children:["+",N.progressPercentage,"% progress"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.description}),N.materials&&N.materials.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Materials Used:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.materials.join(", ")})]})]},N.id)}),b.length>5&&e.jsxs(T,{variant:"outline",size:"sm",onClick:v,children:["View All Reports (",b.length,")"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(we,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No progress reports available yet."})]})})]}),e.jsxs(q,{children:[e.jsx(re,{children:e.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Project Documentation"]})}),e.jsx(H,{children:d.attachments&&d.attachments.length>0?e.jsx("div",{className:"space-y-3",children:d.attachments.map(N=>{const P=r.find(w=>w.id===N.uploadedBy);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(N.size/1024/1024).toFixed(2)," MB  Uploaded by ",P==null?void 0:P.name," on ",new Date(N.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},N.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documentation available yet."})]})})]})]}),e.jsx(ze,{open:l,onOpenChange:c,children:e.jsxs(Ie,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:i==null?void 0:i.name}),e.jsx(Fe,{children:"Complete project details and progress tracking"})]}),i&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Is,{defaultValue:"progress",className:"w-full",children:[e.jsxs(Rs,{className:"grid w-full grid-cols-3",children:[e.jsx(ke,{value:"progress",children:"Progress"}),e.jsx(ke,{value:"documentation",children:"Documentation"}),e.jsx(ke,{value:"team",children:"Team"})]}),e.jsxs(Pe,{value:"progress",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Project Status"}),e.jsx("p",{className:"text-sm mt-1 flex items-center gap-2",children:e.jsxs(ie,{variant:g(i.status),className:"flex items-center gap-1",children:[f(i.status),i.status]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(ts,{value:i.progress,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.progress,"% complete"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"All Progress Reports"}),e.jsx("div",{className:"space-y-3",children:b.map(N=>{const P=r.find(w=>w.id===N.fabricatorId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:P==null?void 0:P.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(N.date).toLocaleDateString(),"  ",N.hoursWorked," hours worked"]})]}),e.jsxs(ie,{variant:"secondary",children:["+",N.progressPercentage,"% progress"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:N.description}),N.materials&&N.materials.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:"Materials Used:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.materials.join(", ")})]})]},N.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Task Progress"}),e.jsx("div",{className:"space-y-2",children:x.map(N=>{const P=r.find(w=>w.id===N.assignedTo);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:N.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Assigned to: ",P==null?void 0:P.name]})]}),e.jsx(ie,{variant:N.status==="completed"?"default":"secondary",children:N.status})]},N.id)})})]})]}),e.jsx(Pe,{value:"documentation",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Documents"}),e.jsx("div",{className:"grid gap-2",children:((E=i.attachments)==null?void 0:E.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(N.size/1024/1024).toFixed(2)," MB  Uploaded on ",new Date(N.uploadedAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"outline",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})]},N.id)))||e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents available."})})]}),i.documentationUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"External Documentation"}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Google Drive Documentation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete project documentation and files"})]}),e.jsxs(T,{variant:"outline",onClick:()=>window.open(i.documentationUrl,"_blank"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Open"]})]})})]})]})}),e.jsx(Pe,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Project Supervisor"}),e.jsx("div",{className:"p-4 border rounded-lg",children:m?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(it,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.school,"  ",m.secureId]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supervisor information not available"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3",children:"Fabrication Team"}),e.jsx("div",{className:"grid gap-3",children:p.map(N=>{const P=h.filter($=>$.fabricatorId===N.id),w=P.reduce(($,D)=>$+D.hoursWorked,0);return e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary/10 flex items-center justify-center",children:e.jsx(it,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:N.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.school,"  ",N.secureId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[w," hours"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.length," reports"]})]})]})},N.id)})})]})]})})]})})]})})]})}const wg=[],Cg=[],Sg=[],kg=[],Pg=[],Dg=[{totalRevenue:0,monthlyRevenue:[],yearlyRevenue:[]}];function Ag(t){const s=Array.isArray(t.fabricator_ids)?t.fabricator_ids:typeof t.fabricator_ids=="string"?_g(t.fabricator_ids):Array.isArray(t.fabricatorIds)?t.fabricatorIds:[],r=t.start_date||t.startDate||null,n=t.end_date||t.due_date||t.endDate||null;return{id:t.id,name:t.name||t.title||"",description:t.description||"",status:t.status||"planning",priority:t.priority||"medium",startDate:Zs(r),endDate:Zs(n),progress:Number.isFinite(t.progress)?t.progress:0,supervisorId:t.supervisor_id||t.supervisorId||"",fabricatorIds:s,budget:Js(t.budget),spent:Js(t.spent),revenue:Js(t.revenue),clientName:t.client_name||t.clientName||"",documentationUrl:t.documentation_url||t.documentationUrl||void 0,attachments:Array.isArray(t.attachments)?t.attachments:void 0,fabricatorBudgets:Array.isArray(t.fabricatorBudgets)?t.fabricatorBudgets:void 0,createdBy:t.created_by||t.createdBy||"",createdAt:Zs(t.created_at||t.createdAt||new Date().toISOString()),pendingAssignments:Array.isArray(t.pendingAssignments)?t.pendingAssignments:void 0}}function Xn(t){return Array.isArray(t)?t.map(Ag):[]}function _g(t){try{const s=JSON.parse(t);return Array.isArray(s)?s:[]}catch{return[]}}function Js(t){const s=typeof t=="string"?parseFloat(t):t;return Number.isFinite(s)?Number(s):0}function Zs(t){if(!t)return new Date().toISOString().split("T")[0];const s=new Date(t);return isNaN(s.getTime())?new Date().toISOString().split("T")[0]:s.toISOString().split("T")[0]}const Mg={lightStart:6,darkStart:18,transitionDuration:30},Tg=(t={})=>{const s={...Mg,...t},[r,n]=u.useState(!1),[a,i]=u.useState(!1);return u.useEffect(()=>{const c=()=>{const x=localStorage.getItem("theme-override");if(x&&x!=="auto")return;const g=new Date,f=g.getHours(),v=g.getMinutes(),b=f+v/60,j=s.lightStart,k=s.darkStart,y=s.transitionDuration/60;let E=!1,N=!1;k>j,(b>=k||b<j)&&(E=!0),b>=k-y&&b<k&&(N=!0),b>=j-y&&b<j&&(N=!0),n(E),i(N);const P=document.documentElement;E?P.classList.add("dark"):P.classList.remove("dark"),N?P.classList.add("theme-transition"):P.classList.remove("theme-transition")};(()=>{const x=localStorage.getItem("theme-override");x==="light"?(n(!1),document.documentElement.classList.remove("dark")):x==="dark"?(n(!0),document.documentElement.classList.add("dark")):c()})();const m=setInterval(c,6e4),p=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>{localStorage.getItem("theme-override")||c()};return p.addEventListener("change",h),()=>{clearInterval(m),p.removeEventListener("change",h)}},[s]),{isDark:r,isTransitioning:a,setTheme:c=>{console.log(" Setting theme to:",c);const d=document.documentElement;if(c==="auto"){localStorage.removeItem("theme-override"),console.log(" Switched to auto mode - will follow time-based schedule");const m=new Date,p=m.getHours(),h=m.getMinutes(),x=p+h/60,g=x>=s.darkStart||x<s.lightStart;n(g),i(!1),g?(d.classList.add("dark"),console.log(" Auto mode: Dark theme applied")):(d.classList.remove("dark"),console.log(" Auto mode: Light theme applied"))}else{localStorage.setItem("theme-override",c);const m=c==="dark";n(m),i(!1),m?(d.classList.add("dark"),console.log(" Manual: Dark theme applied")):(d.classList.remove("dark"),console.log(" Manual: Light theme applied"))}},getCurrentTheme:()=>{const c=localStorage.getItem("theme-override");return c||"auto"},config:s}};function Eg(){const[t,s]=u.useState(null),[r,n]=u.useState("dashboard"),[a,i]=u.useState("main"),[o,l]=u.useState(Sg),[c,d]=u.useState(wg),[m,p]=u.useState(Cg),[h,x]=u.useState(kg),[g,f]=u.useState(Pg),[v,b]=u.useState(!1),[j,k]=u.useState(null),[y,E]=u.useState(0),{isTransitioning:N,setTheme:P,getCurrentTheme:w}=Tg();u.useEffect(()=>{(async()=>{try{try{const Y=localStorage.getItem("currentUser");if(Y){const se=JSON.parse(Y);s(se)}if(!(window.location.hash||"").slice(1)&&Y){n("dashboard");try{window.location.hash="dashboard"}catch{}}}catch{}if((await be.healthCheck()).error){console.warn("Backend not available. Running in demo mode with local data."),k(!1),b(!0);return}await $(),k(!0),b(!0)}catch(V){console.error("Failed to initialize app:",V),console.warn("Falling back to demo mode with local data."),k(!1),b(!0)}})()},[]),u.useEffect(()=>{if(!t)return;const F=t.role;if(!({admin:["dashboard","projects","tasks","users","materials","reports","settings","team","revenue","assignments","archives"],supervisor:["dashboard","projects","tasks","team","reports","archives"],fabricator:["dashboard","projects","assignments","worklog","materials","tasks"],client:["dashboard","project-status","documentation"]}[F]||["dashboard"]).includes(r)){n("dashboard");try{window.location.hash="dashboard"}catch{}}},[t==null?void 0:t.role,r]);const $=async()=>{try{const[F,V,Y,X,se]=await Promise.all([be.getProjects(),be.getTasks(),be.getWorkLogs(),be.getMaterials(),be.getUsers()]);F.data&&p(Xn(F.data)),V.data&&l(V.data),Y.data&&x(Y.data),X.data&&f(X.data),se.data&&d(se.data.map(yr))}catch(F){console.error("Failed to load data from database:",F)}},D=F=>{s(F);try{localStorage.setItem("currentUser",JSON.stringify(F))}catch{}n("dashboard");try{window.location.hash="dashboard"}catch{}},ee=()=>{be.logout(),s(null),n("dashboard"),i("main");try{localStorage.removeItem("currentUser")}catch{}try{window.location.hash="dashboard"}catch{}},M=F=>{d(V=>[...V,F]),s(F);try{localStorage.setItem("currentUser",JSON.stringify(F))}catch{}n("dashboard")},W=F=>{d(V=>[...V,F])},A=()=>{i("fabricator-signup")},G=()=>{i("forgot-password")},C=()=>{i("main")},R=(F,V)=>{l(Y=>Y.map(X=>X.id===F?{...X,status:V,updatedAt:new Date().toISOString()}:X))},O=F=>{const V={...F,id:`task-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l(Y=>[...Y,V])},de=(F,V)=>{l(Y=>Y.map(X=>X.id===F?{...X,...V,updatedAt:new Date().toISOString()}:X))},je=F=>{l(V=>V.filter(Y=>Y.id!==F))},S=async F=>{try{const V=await be.createProject(F);if(V.data){const Y=Xn([V.data])[0];return p(X=>[...X,Y]),Y}else throw new Error(V.error||"Failed to create project")}catch(V){console.error("Failed to create project:",V);const Y={...F,id:`project-${Date.now()}`};return p(X=>[...X,Y]),Y}},U=F=>{const V={...F,id:`wl-${Date.now()}`,createdAt:new Date().toISOString()};x(X=>[...X,V]);const Y=F.progressPercentage;p(X=>X.map(se=>se.id===F.projectId?{...se,progress:Math.min(100,se.progress+Y)}:se))},ae=F=>{const V={...F,id:`mat-${Date.now()}`,addedAt:new Date().toISOString()};f(Y=>[...Y,V])},ye=async(F,V,Y)=>{var se;const X=Y||(F?(se=m.find(_=>{var L;return(L=_.pendingAssignments)==null?void 0:L.some(te=>te.id===F)}))==null?void 0:se.id:null);if(X)try{await be.respondToAssignment(X,"accepted",F||void 0),p(_=>_.map(L=>{var te,le,J,Ue;return L.id!==X?L:(t==null?void 0:t.role)==="supervisor"&&((te=L.pendingSupervisors)!=null&&te.includes(t.id))?{...L,supervisorId:t.id,pendingSupervisors:L.pendingSupervisors.filter(Se=>Se!==t.id),status:"planning"}:{...L,pendingAssignments:(le=L.pendingAssignments)==null?void 0:le.map(Se=>Se.id===F?{...Se,status:"accepted",response:V,respondedAt:new Date().toISOString()}:Se),fabricatorIds:(J=L.pendingAssignments)!=null&&J.find(Se=>Se.id===F&&Se.status==="pending")?[...L.fabricatorIds,L.pendingAssignments.find(Se=>Se.id===F).fabricatorId]:L.fabricatorIds,status:(Ue=L.pendingAssignments)!=null&&Ue.find(Se=>Se.id===F&&Se.status==="pending")?"planning":L.status}}))}catch(_){console.error("Failed to accept assignment",_)}},Ne=async(F,V,Y)=>{var se;const X=Y||(F?(se=m.find(_=>{var L;return(L=_.pendingAssignments)==null?void 0:L.some(te=>te.id===F)}))==null?void 0:se.id:null);if(X)try{await be.respondToAssignment(X,"declined",F||void 0),p(_=>_.map(L=>{var te,le;return L.id!==X?L:(t==null?void 0:t.role)==="supervisor"&&((te=L.pendingSupervisors)!=null&&te.includes(t.id))?{...L,pendingSupervisors:L.pendingSupervisors.filter(J=>J!==t.id)}:{...L,pendingAssignments:(le=L.pendingAssignments)==null?void 0:le.map(J=>J.id===F?{...J,status:"declined",response:V,respondedAt:new Date().toISOString()}:J)}}))}catch(_){console.error("Failed to decline assignment",_)}},De=(F,V,Y)=>{const X=m.find(J=>J.id===F),se=c.find(J=>J.id===V),_=t;if(!X||!se||!_)return;const L={id:`pa-${Date.now()}`,projectId:F,fabricatorId:V,assignedBy:t.id,assignedAt:new Date().toISOString(),status:"pending",message:Y};p(J=>J.map(Ue=>Ue.id===F?{...Ue,pendingAssignments:[...Ue.pendingAssignments||[],L],status:"pending-assignment"}:Ue)),bs.sendProjectAssignment(L,X,se,_);const le=[{projectId:F,title:"Project Planning Review",description:"Review project requirements and create detailed work plan",status:"pending",priority:"high",assignedTo:V,dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimatedHours:8,actualHours:0,createdBy:t.id},{projectId:F,title:"Material Assessment",description:"Assess and order required materials for the project",status:"pending",priority:"medium",assignedTo:V,dueDate:new Date(Date.now()+10*24*60*60*1e3).toISOString().split("T")[0],estimatedHours:4,actualHours:0,createdBy:t.id}].map(J=>({...J,id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));l(J=>[...J,...le])},Ye=async(F,V)=>{var Y;try{const X=await be.broadcastToFabricators(F,V);(Y=X.data)!=null&&Y.assignments&&p(se=>se.map(_=>_.id===F?{..._,pendingAssignments:X.data.assignments,status:"pending-assignment"}:_))}catch(X){console.error("Broadcast failed",X)}},Ae=async F=>{p(V=>V.map(Y=>Y.id===F.id?F:Y));try{await be.updateProject(F.id,F)}catch(V){console.warn("Failed to persist project update; will retry on next refresh.",V)}t&&bs.sendProjectUpdate(F,c,"progress_update",t)},Be=async F=>{try{const V=await be.deleteProject(F);if(!V.error)p(Y=>Y.filter(X=>X.id!==F));else throw new Error(V.error)}catch(V){console.error("Failed to delete project:",V),p(Y=>Y.filter(X=>X.id!==F))}};if(u.useEffect(()=>{const F=["dashboard","projects","tasks","users","materials","reports","settings","team","worklog","revenue","assignments","archives","project-status","documentation","admin-projects","admin-tasks"],V=()=>{const se=window.location.hash.slice(1);if(se==="admin-projects"||se==="admin-tasks"){window.location.hash="projects",n("projects");try{localStorage.setItem("currentView","projects")}catch{}return}if(se==="assignments"&&(t==null?void 0:t.role)==="fabricator"){window.location.hash="projects",n("projects");try{localStorage.setItem("currentView","projects")}catch{}return}if(F.includes(se)){n(se);try{localStorage.setItem("currentView",se)}catch{}}else if(!se){n("dashboard");try{localStorage.setItem("currentView","dashboard")}catch{}}};window.addEventListener("hashchange",V);const Y=se=>{const _=se.target;if(!_)return;const L=_.closest('a[href^="#"]');if(!L)return;const te=L.getAttribute("href")||"",le=te.startsWith("#")?te.slice(1):te;F.includes(le)&&n(le)};document.addEventListener("click",Y);const X=window.location.hash.slice(1);if(F.includes(X))V();else try{const se=localStorage.getItem("currentUser"),_=localStorage.getItem("currentView");if(se){const L=_&&F.includes(_)?_:"dashboard";if(n(L),!X)try{window.location.hash=L}catch{}}}catch{}return()=>{window.removeEventListener("hashchange",V),document.removeEventListener("click",Y)}},[]),u.useEffect(()=>{let F=!0;const V=setInterval(async()=>{try{const X=!(await be.healthCheck()).error;if(!F)return;k(se=>(se===!1&&X&&$().then(()=>E(Date.now())).catch(()=>{}),X))}catch{if(!F)return;k(!1)}},2e4);return()=>{F=!1,clearInterval(V)}},[]),u.useEffect(()=>{const F=()=>{document.visibilityState==="visible"&&j&&Date.now()-y>1e4&&$().then(()=>E(Date.now())).catch(()=>{})},V=()=>{setTimeout(async()=>{const X=!(await be.healthCheck()).error;k(X),X&&$().then(()=>E(Date.now())).catch(()=>{})},1e3)};return document.addEventListener("visibilitychange",F),window.addEventListener("online",V),()=>{document.removeEventListener("visibilitychange",F),window.removeEventListener("online",V)}},[j,y]),!t)switch(a){case"fabricator-signup":return e.jsx(wd,{onSignup:M,onBackToMain:C});case"forgot-password":return e.jsx(Cd,{onBackToLogin:C});default:return e.jsx(pd,{onLogin:D,onShowSignup:A,onShowForgotPassword:G})}const Ce=()=>{if(t.role==="client")switch(r){case"dashboard":case"project-status":case"documentation":return e.jsx(Gn,{currentUser:t,projects:m,users:c,workLogs:h,tasks:o});default:return e.jsx(Gn,{currentUser:t,projects:m,users:c,workLogs:h,tasks:o})}switch(r){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(lm,{projects:m,tasks:o,users:c,currentUser:t}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(bm,{projects:m,currentUser:t}),e.jsx(ym,{tasks:o,projects:m,currentUser:t,onUpdateTaskStatus:R})]})]});case"projects":return e.jsx(Qs,{projects:m,users:c,currentUser:t,onCreateProject:t.role==="admin"||t.role==="supervisor"?S:void 0,onAssignFabricator:t.role==="supervisor"?De:void 0,onUpdateProject:Ae,onAcceptAssignment:ye,onDeclineAssignment:Ne,onCreateUser:W,onBroadcastFabricators:t.role==="supervisor"?Ye:void 0});case"archives":return t.role==="admin"||t.role==="supervisor"?e.jsx(Un,{projects:m,users:c,materials:g,workLogs:h,currentUser:t}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Project archives are only available for administrators and supervisors."})]})});case"assignments":return t.role==="fabricator"?(typeof window<"u"&&(window.location.hash="projects"),e.jsx(Qs,{projects:m,users:c,currentUser:t,onCreateProject:void 0,onAssignFabricator:void 0,onUpdateProject:Ae,onAcceptAssignment:ye,onDeclineAssignment:Ne,onCreateUser:W})):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Project assignments are only available for fabricators."})]})});case"worklog":return t.role==="fabricator"?e.jsx(Kp,{currentUser:t,projects:m,workLogs:h,materials:g,onAddWorkLog:U,onUpdateProject:Ae}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Work logs are only available for fabricators."})]})});case"materials":return t.role==="fabricator"?e.jsx(Qp,{currentUser:t,projects:m,materials:g,onAddMaterial:ae}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Materials management is only available for fabricators."})]})});case"revenue":return e.jsx(Xp,{projects:m,companyRevenue:Dg,currentUser:t});case"reports":return e.jsx(Ng,{projects:m,users:c,tasks:o,currentUser:t});case"archives":return t.role==="admin"||t.role==="supervisor"?e.jsx(Un,{projects:m,users:c,materials:g,workLogs:h,currentUser:t,onUpdateProject:Ae,onDeleteProject:Be,onCreateProject:S}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Archives are only available for admins and supervisors."})]})});case"users":return e.jsx(Gp,{users:c,setUsers:d,currentUser:t});case"tasks":return e.jsx(yg,{tasks:o,projects:m,users:c,currentUser:t,onCreateTask:O,onUpdateTask:de,onDeleteTask:je});case"admin-projects":case"admin-tasks":return e.jsx(Qs,{projects:m,users:c,currentUser:t,onCreateProject:t.role==="admin"||t.role==="supervisor"?S:void 0,onAssignFabricator:t.role==="supervisor"?De:void 0,onUpdateProject:Ae,onCreateUser:W});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-muted-foreground",children:["The ",r," section is under development."]})]})})}};return e.jsx(om,{currentUser:t,onLogout:ee,currentTheme:w(),onThemeChange:P,isTransitioning:N,children:Ce()})}er.createRoot(document.getElementById("root")).render(e.jsx(ft.StrictMode,{children:e.jsx(Eg,{})}));
//# sourceMappingURL=index-d9bAFAQZ.js.map
